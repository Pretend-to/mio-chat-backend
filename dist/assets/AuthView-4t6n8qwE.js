import{_ as d,m as l,p as v,q as p,c as f,a as s,w as m,v as w,s as g,i as k,E as c,u as _,o as y}from"./index-Bo072YnU.js";const E={class:"auth-view"},C={class:"container"},x={class:"controls"},L={__name:"AuthView",setup(V){const t=l(),o=l(!1),r=l(),a=async n=>{if(console.log("触发login了"),await g(()=>r.value.classList.add("active")),!o.value){o.value=!0;try{const e=await k.login(n);e&&(c.success(`成功以${e.is_admin?"管理员身份":"游客身份"}登录，欢迎使用!`),await _.push("/"))}catch(e){c.error(e)}o.value=!1}};function u(n){n.key==="Enter"&&a(t.value)}return v(()=>{console.log("unmounted"),removeEventListener("keydown",u)}),p(()=>{addEventListener("keydown",u)}),(n,e)=>(y(),f("div",E,[s("div",C,[s("div",{class:"icon-container",ref_key:"iconContainer",ref:r},e[3]||(e[3]=[s("i",{class:"iconfont ChatGPT"},null,-1)]),512),e[4]||(e[4]=s("h1",{class:"title"},"登录验证",-1)),e[5]||(e[5]=s("p",{class:"hint"},"管理员开启了密码验证，请在下方填入访问码",-1)),m(s("input",{type:"password","onUpdate:modelValue":e[0]||(e[0]=i=>t.value=i),placeholder:"在此处填写访问码"},null,512),[[w,t.value]]),s("div",x,[s("button",{class:"later",onClick:e[1]||(e[1]=i=>a())},"游客登录"),s("button",{class:"login",onClick:e[2]||(e[2]=i=>a(t.value))},"Login")])])]))}},B=d(L,[["__scopeId","data-v-040a123a"]]);export{B as default};
