import{_,c as r,C as f,o as c,a as d,b as o,F as v,r as g,t as p,n as C,p as L,d as b,e as m,f as u}from"./index-BMc87C_W.js";const w={data(){const t=r.contactList;return{onPhone:r.onPhone,contactorList:t}},methods:{showChat(t){this.$router.push({path:"/home/chat/"+t})},getId(t){let s=this.$route.params.id,n=this.contactorList[t].id;return s==n?"active":this.contactorList[t].priority==0?"important":""},genOpenaiContactor(){const s=r.models.map(i=>({value:i.owner,label:i.owner,children:i.models.map(a=>({value:a,label:a}))})),n={id:this.genFakeId(),name:"OpenAI",avatar:"/api/avatar/openai.png",title:"gpt",priority:1,options:{models:r.models,modelsOptions:s,textWarper:{options:s,presets:{default:""}}}};this.addConcator("openai",n)},async addConcator(t,s){const n=new f(t,s);this.contactorList.push(n),await r.setLocalStorage()},genFakeId(){const s=`1${Math.floor(1e3+Math.random()*9e3)}`;if(this.id){const n=Math.floor(1e3+Math.random()*9e3),i=`${this.id}${n}`;return parseInt(i)}else return parseInt(s)}},components:{}},$=t=>(L("data-v-598a18b0"),t=t(),b(),t),I={class:"upsidebar",id:"friends"},k=$(()=>o("div",{class:"search"},[o("svg",{t:"1695130526763",class:"listicon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3427"},[o("path",{d:"M945.066667 898.133333l-189.866667-189.866666c55.466667-64 87.466667-149.333333 87.466667-241.066667 0-204.8-168.533333-373.333333-373.333334-373.333333S96 264.533333 96 469.333333 264.533333 842.666667 469.333333 842.666667c91.733333 0 174.933333-34.133333 241.066667-87.466667l189.866667 189.866667c6.4 6.4 14.933333 8.533333 23.466666 8.533333s17.066667-2.133333 23.466667-8.533333c8.533333-12.8 8.533333-34.133333-2.133333-46.933334zM469.333333 778.666667C298.666667 778.666667 160 640 160 469.333333S298.666667 160 469.333333 160 778.666667 298.666667 778.666667 469.333333 640 778.666667 469.333333 778.666667z","p-id":"3428"})]),o("input",{type:"text",id:"tosearch",placeholder:"搜索"})],-1)),y={class:"bu-add"},S={class:"people"},P=["onClick","id"],M={class:"avatar"},N=["src","alt"],x={class:"info"},O={class:"name"},B={class:"msginfo",id:"time"},F={class:"msginfo",id:"msgctt"};function z(t,s,n,i,a,l){return c(),d("div",{id:"friendlists",class:C(a.onPhone?"mobile":"")},[o("div",I,[k,o("div",y,[o("button",{id:"addcont",onClick:s[0]||(s[0]=(...e)=>l.genOpenaiContactor&&l.genOpenaiContactor(...e))},"+")])]),o("div",S,[(c(!0),d(v,null,g(a.contactorList,(e,h)=>(c(),d("div",{onClick:V=>l.showChat(e.id),key:h,class:"lists",id:l.getId(h)},[o("div",M,[o("img",{src:e.avatar,alt:e.name},null,8,N)]),o("div",x,[o("div",O,p(e.name),1),o("div",B,p(e.getLastTime()),1),o("div",F,p(e.getMessageSummary()),1)])],8,P))),128))])],2)}const D=_(w,[["render",z],["__scopeId","data-v-598a18b0"]]),A={data(){return{client:r,onList:null}},components:{friendlist:D},methods:{},mounted(){const t=this.$route;t.name==="toChat"||t.name==="toProfile"?this.onList=!0:t.name==="privateChat"&&(this.onList=!1)},computed:{},watch:{$route:function(t){t.name==="toChat"||t.name==="toProfile"?this.onList=!0:t.name==="privateChat"&&(this.onList=!1)}}},E={key:0,id:"main"},H={key:1,id:"main-mobile"},R={key:2,id:"main-mobile",class:"mobile-chat"};function T(t,s,n,i,a,l){const e=u("friendlist"),h=u("router-view");return a.client.onPhone?a.onList||this.$route.name==="home"?(c(),d("div",H,[m(e)])):(c(),d("div",R,[m(h)])):(c(),d("div",E,[m(e),m(h)]))}const j=_(A,[["render",T]]);export{j as default};
