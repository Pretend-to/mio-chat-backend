import{_ as p,s as c,H as v,m as f,a as h,b as s,A as m,I as w,x as k,c as g,J as _,K as y,o as E,p as x,d as C}from"./index-C4qpvyHk.js";const r=n=>(x("data-v-6e94f34b"),n=n(),C(),n),b={class:"auth-view"},I={class:"container"},L=r(()=>s("i",{class:"iconfont ChatGPT"},null,-1)),V=[L],A=r(()=>s("h1",{class:"title"},"登录验证",-1)),B=r(()=>s("p",{class:"hint"},"管理员开启了密码验证，请在下方填入访问码",-1)),M={class:"controls"},S={__name:"AuthView",setup(n){const o=c(),i=c(!1),d=c(),a=async t=>{if(console.log("触发login了"),await k(()=>d.value.classList.add("active")),!i.value){i.value=!0;try{const e=await g.login(t);e&&(_.success(`成功以${e.is_admin?"管理员身份":"游客身份"}登录，欢迎使用!`),await y.push("/home"))}catch(e){_.error(e)}i.value=!1}};function u(t){t.key==="Enter"&&a(o.value)}return v(()=>{console.log("unmounted"),removeEventListener("keydown",u)}),f(()=>{addEventListener("keydown",u)}),v(()=>{console.log("unmounted"),removeEventListener("keydown",t=>{t.key==="Enter"&&a(o.value)})}),(t,e)=>(E(),h("div",b,[s("div",I,[s("div",{class:"icon-container",ref_key:"iconContainer",ref:d},V,512),A,B,m(s("input",{type:"password","onUpdate:modelValue":e[0]||(e[0]=l=>o.value=l),placeholder:"在此处填写访问码"},null,512),[[w,o.value]]),s("div",M,[s("button",{class:"later",onClick:e[1]||(e[1]=l=>a())},"游客登录"),s("button",{class:"login",onClick:e[2]||(e[2]=l=>a(o.value))},"Login")])])]))}},$=p(S,[["__scopeId","data-v-6e94f34b"]]);export{$ as default};
