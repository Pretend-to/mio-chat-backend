import{_ as f,c as r,C as _,o as d,a as l,b as o,F as v,r as g,t as u,n as L,p as C,d as b,e as m,f as p}from"./index-D4q0vMfO.js";const z={data(){const t=r.contactList;return{onPhone:r.onPhone,contactorList:t}},methods:{showChat(t){this.$router.push({path:"/home/chat/"+t})},getId(t){let e=this.$route.params.id,s=this.contactorList[t].id;return e==s?"active":this.contactorList[t].priority==0?"important":""},genOpenaiContactor(){const e=r.models.map(n=>({value:n.owner,label:n.owner,children:n.models.map(a=>({value:a,label:a}))})),s={id:this.genFakeId(),name:r.default_model,activeModel:r.default_model,avatar:"/api/avatar/openai.png",title:"gpt",priority:1,options:{models:r.models,modelsOptions:e,textWraper:{options:e,presets:{default:""}}}};this.addConcator("openai",s)},async addConcator(t,e){const s=new _(t,e);s.avatar=s.getAvatar(s.activeModel),this.contactorList.push(s),await r.setLocalStorage()},startResize(t){this.isResizing=!0,this.startX=t.clientX,this.startWidth=this.$refs.friendlists.offsetWidth,document.addEventListener("mousemove",this.resize),document.addEventListener("mouseup",this.stopResize)},resize(t){if(this.isResizing){let e=this.startWidth+(t.clientX-this.startX);const s=500,n=176;e=e>s?s:e<n?n:e,this.$refs.friendlists.style.width=e+"px"}},stopResize(){this.isResizing=!1,document.removeEventListener("mousemove",this.resize),document.removeEventListener("mouseup",this.stopResize)},genFakeId(){const e=`1${Math.floor(1e3+Math.random()*9e3)}`;if(this.id){const s=Math.floor(1e3+Math.random()*9e3),n=`${this.id}${s}`;return parseInt(n)}else return parseInt(e)}},components:{},watch:{}},$=t=>(C("data-v-efa128b1"),t=t(),b(),t),w={class:"upsidebar",id:"friends"},I=$(()=>o("div",{class:"search"},[o("i",{class:"iconfont sousuo listicon"}),o("input",{type:"text",id:"tosearch",placeholder:"搜索"})],-1)),k={class:"bu-add"},y={class:"people"},R=["onClick","id"],M={class:"avatar"},P=["src","alt"],S={class:"info"},N={class:"name"},W={class:"msginfo",id:"time"},x={class:"msginfo",id:"msgctt"};function E(t,e,s,n,a,c){return d(),l("div",{id:"friendlists",ref:"friendlists",class:L(a.onPhone?"mobile":"")},[o("div",w,[I,o("div",k,[o("button",{id:"addcont",onClick:e[0]||(e[0]=(...i)=>c.genOpenaiContactor&&c.genOpenaiContactor(...i))},"+")])]),o("div",y,[(d(!0),l(v,null,g(a.contactorList,(i,h)=>(d(),l("div",{onClick:H=>c.showChat(i.id),key:h,class:"lists",id:c.getId(h)},[o("div",M,[o("img",{src:i.avatar,alt:i.name},null,8,P)]),o("div",S,[o("div",N,u(i.name),1),o("div",W,u(i.getLastTime()),1),o("div",x,u(i.getMessageSummary()),1)])],8,R))),128))]),o("div",{class:"resizer",onMousedown:e[1]||(e[1]=(...i)=>c.startResize&&c.startResize(...i))},null,32)],2)}const F=f(z,[["render",E],["__scopeId","data-v-efa128b1"]]),O={data(){return{client:r,onList:null}},components:{friendlist:F},methods:{},mounted(){const t=this.$route;t.name==="toChat"||t.name==="toProfile"?this.onList=!0:t.name==="privateChat"&&(this.onList=!1)},computed:{},watch:{$route:function(t){t.name==="toChat"||t.name==="toProfile"?this.onList=!0:t.name==="privateChat"&&(this.onList=!1)}}},X={key:0,id:"main"},B={key:1,id:"main-mobile"},D={key:2,id:"main-mobile",class:"mobile-chat"};function A(t,e,s,n,a,c){const i=p("friendlist"),h=p("router-view");return a.client.onPhone?a.onList||this.$route.name==="home"?(d(),l("div",B,[m(i)])):(d(),l("div",D,[m(h)])):(d(),l("div",X,[m(i),m(h)]))}const V=f(O,[["render",A]]);export{V as default};
