import{_,c as d,C as f,o as r,a as c,b as s,F as v,r as g,t as p,n as C,p as L,d as $,e as m,f as u}from"./index-RRfWw93L.js";const I={data(){const t=d.contactList;return{onPhone:d.onPhone,contactorList:t}},methods:{showChat(t){this.$router.push({path:"/home/chat/"+t})},getId(t){let o=this.$route.params.id,n=this.contactorList[t].id;return o==n?"active":this.contactorList[t].priority==0?"important":""},genOpenaiContactor(){const o=d.models.map(i=>({value:i.owner,label:i.owner,children:i.models.map(a=>({value:a,label:a}))})),n={id:this.genFakeId(),name:"OpenAI",avatar:"/api/avatar/openai.png",title:"gpt",priority:1,options:{models:d.models,modelsOptions:o,textWarper:{options:o,presets:{default:""}}}};this.addConcator("openai",n)},async addConcator(t,o){const n=new f(t,o);this.contactorList.push(n),await d.setLocalStorage()},genFakeId(){const o=`1${Math.floor(1e3+Math.random()*9e3)}`;if(this.id){const n=Math.floor(1e3+Math.random()*9e3),i=`${this.id}${n}`;return parseInt(i)}else return parseInt(o)}},components:{}},b=t=>(L("data-v-1e3872a5"),t=t(),$(),t),k={class:"upsidebar",id:"friends"},y=b(()=>s("div",{class:"search"},[s("i",{class:"iconfont sousuo listicon"}),s("input",{type:"text",id:"tosearch",placeholder:"搜索"})],-1)),w={class:"bu-add"},P={class:"people"},S=["onClick","id"],N={class:"avatar"},M=["src","alt"],O={class:"name"},x={class:"msginfo",id:"time"},F={class:"msginfo",id:"msgctt"};function B(t,o,n,i,a,l){return r(),c("div",{id:"friendlists",class:C(a.onPhone?"mobile":"")},[s("div",k,[y,s("div",w,[s("button",{id:"addcont",onClick:o[0]||(o[0]=(...e)=>l.genOpenaiContactor&&l.genOpenaiContactor(...e))},"+")])]),s("div",P,[(r(!0),c(v,null,g(a.contactorList,(e,h)=>(r(),c("div",{onClick:T=>l.showChat(e.id),key:h,class:"lists",id:l.getId(h)},[s("div",N,[s("img",{src:e.avatar,alt:e.name},null,8,M)]),(r(),c("div",{class:"info",key:e.lastUpdate},[s("div",O,p(e.name),1),s("div",x,p(e.getLastTime()),1),s("div",F,p(e.getMessageSummary()),1)]))],8,S))),128))])],2)}const D=_(I,[["render",B],["__scopeId","data-v-1e3872a5"]]),z={data(){return{client:d,onList:null}},components:{friendlist:D},methods:{},mounted(){const t=this.$route;t.name==="toChat"||t.name==="toProfile"?this.onList=!0:t.name==="privateChat"&&(this.onList=!1)},computed:{},watch:{$route:function(t){t.name==="toChat"||t.name==="toProfile"?this.onList=!0:t.name==="privateChat"&&(this.onList=!1)}}},A={key:0,id:"main"},E={key:1,id:"main-mobile"},H={key:2,id:"main-mobile",class:"mobile-chat"};function R(t,o,n,i,a,l){const e=u("friendlist"),h=u("router-view");return a.client.onPhone?a.onList||this.$route.name==="home"?(r(),c("div",E,[m(e)])):(r(),c("div",H,[m(h)])):(r(),c("div",A,[m(e),m(h)]))}const V=_(z,[["render",R]]);export{V as default};
