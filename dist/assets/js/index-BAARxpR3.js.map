{"version":3,"file":"index-BAARxpR3.js","sources":["../../../src/App.vue","../../../src/main.js"],"sourcesContent":["<script>\nimport { client, config } from \"@/lib/runtime.js\";\nimport sideBar from \"@/components/SideBar.vue\";\nimport displayButtons from \"./components/DisplayButtons.vue\";\nexport default {\n  components: {\n    sideBar,\n    displayButtons,\n  },\n  data() {\n    const displayConfig = config.getBaseConfig();\n    const onPhone = window.innerWidth < 600;\n    return {\n      onPhone,\n      client: client,\n      fullScreen: displayConfig?.full_screen || false,\n      beian: displayConfig?.beian || \"\",\n    };\n  },\n  computed: {\n    onPrivate() {\n      return (\n        this.$route.path.includes(\"/auth\") ||\n        this.$route.path.includes(\"/profile\") ||\n        this.$route.path.includes(\"/chat\")\n      );\n    },\n  },\n  created() {\n    const displayConfig = config.getBaseConfig();\n    if (Object.keys(displayConfig).length > 0) {\n      this.fullScreen = displayConfig.full_screen;\n      this.beian = displayConfig.beian;\n      document.title = displayConfig.title;\n    } else {\n      config.setBaseConfigCallback((data) => {\n        this.fullScreen = data.full_screen;\n        this.beian = data.beian;\n        document.title = data.title;\n      });\n    }\n\n    window.addEventListener(\"resize\", this.handleResize);\n  },\n  beforeUnmount() {\n    window.removeEventListener(\"resize\", this.handleResize);\n  },\n  methods: {\n    setWindowSize(fullScreen) {\n      this.fullScreen = fullScreen;\n      config.updateBaseConfig({\n        full_screen: fullScreen,\n      });\n    },\n    handleResize() {\n      this.onPhone = window.innerWidth < 600;\n    },\n  },\n};\n</script>\n<template>\n  <div id=\"app\">\n    <div v-if=\"onPhone\" class=\"mio-chat-mobile\">\n      <router-view></router-view>\n      <sideBar v-if=\"!onPrivate\"></sideBar>\n    </div>\n    <div v-else class=\"mio-chat\" :class=\"{ fullscreen: fullScreen }\">\n      <displayButtons :full-screen @set-screen=\"setWindowSize\"></displayButtons>\n      <sideBar></sideBar>\n      <router-view></router-view>\n    </div>\n  </div>\n  <a\n    v-if=\"beian\"\n    id=\"beian\"\n    href=\"https://beian.miit.gov.cn/\"\n    target=\"_blank\"\n    >{{ beian }}</a\n  >\n</template>\n<style scoped>\n#app {\n  background-image: url(/static/background/default.png);\n  background-size: cover;\n  background-position: center;\n  background-repeat: no-repeat;\n}\n#app::before {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  /* 黑色蒙版，可调整透明度 */\n}\n.mio-chat {\n  position: relative;\n  width: 60rem;\n  height: 85%;\n  min-height: 30rem;\n  z-index: 1;\n  box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.5);\n  border-radius: 1rem;\n  display: flex;\n  overflow: hidden;\n  margin: 5rem 5rem;\n  min-width: 35rem;\n}\n.mio-chat.fullscreen {\n  width: 100%;\n  height: 100%;\n  border-radius: 0rem;\n  margin: 0rem;\n}\n.mio-chat-mobile {\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n  box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.5);\n  border-radius: 0;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  margin: 0;\n}\na#beian {\n  position: fixed;\n  bottom: 1rem;\n  right: 50%;\n  transform: translateX(50%);\n  font-size: 0.8rem;\n  color: #fff;\n  text-decoration: none;\n}\n@media (min-width: 1024px) {\n}\n</style>\n","/**\n * @author Mio-FCIP <1099834705@qq.com>\n * @lastEditor 彭志勇 <2457305628@qq.com>\n * @lastEditTime 2024-04-25 06:25:30\n */\n\nimport \"./assets/global.sass\";\nimport \"element-plus/dist/index.css\";\nimport \"md-editor-v3/lib/style.css\";\nimport \"./assets/mio.css\";\n\nimport { createApp } from \"vue\";\n\nimport ElementPlus from \"element-plus\";\n\nimport App from \"./App.vue\";\nimport router from \"./router\";\n\nconst app = createApp(App);\n\napp.use(ElementPlus);\napp.use(router);\n\napp.mount(\"#app\");\n\n// 注册 Service Worker\nif (\"serviceWorker\" in navigator) {\n  window.addEventListener(\"load\", () => {\n    navigator.serviceWorker\n      .register(\"/service-worker.v4.js\")\n      .then((registration) => {\n        console.log(\"Service Worker registered: \", registration);\n\n        // 发送消息到 Service Worker\n        const isLocalhost =\n          window.location.hostname === \"localhost\" ||\n          window.location.hostname === \"127.0.0.1\";\n        const isDev = process.env.NODE_ENV === \"development\" || isLocalhost;\n\n        if (registration.active) {\n          // 确保 active 已经存在\n          registration.active.postMessage({\n            type: \"SET_DEV_MODE\",\n            isDevMode: isDev,\n          });\n        } else {\n          // 如果 active 为 null，等待激活后再发送消息 (可选)\n          navigator.serviceWorker.addEventListener(\"controllerchange\", () => {\n            if (navigator.serviceWorker.controller) {\n              navigator.serviceWorker.controller.postMessage({\n                type: \"SET_DEV_MODE\",\n                isDevMode: isDev,\n              });\n            }\n          });\n        }\n      })\n      .catch((error) => {\n        console.log(\"Service Worker registration failed: \", error);\n      });\n  });\n}\n"],"names":["_hoisted_1","id","key","class","href","target","app","createApp","components","sideBar","displayButtons","data","displayConfig","config","getBaseConfig","onPhone","window","innerWidth","client","fullScreen","full_screen","beian","computed","onPrivate","this","$route","path","includes","created","Object","keys","length","document","title","setBaseConfigCallback","addEventListener","handleResize","beforeUnmount","removeEventListener","methods","setWindowSize","updateBaseConfig","_openBlock","_createElementBlock","_Fragment","_createElementVNode","$data","_hoisted_2","_createVNode","_component_router_view","$options","_createCommentVNode","_createBlock","_component_sideBar","_normalizeClass","fullscreen","_component_displayButtons","onSetScreen","_hoisted_3","_toDisplayString","use","ElementPlus","router","mount","navigator","serviceWorker","register","then","registration","isDev","location","hostname","active","postMessage","type","isDevMode","controller","catch","error"],"mappings":"q+BAIA,MAyDOA,EAAA,CAAAC,GAAG,UA7DVC,IAAA,EA8DwBC,MAAM,sBA9D9BD,IAAA,EA0EID,GAAG,QACHG,KAAK,6BACLC,OAAO,gBC1DLC,EAAMC,IDdG,CACbC,WAAY,CACVC,UACAC,kBAEF,IAAAC,GACQ,MAAAC,EAAgBC,EAAOC,gBAEtB,MAAA,CACLC,QAFcC,OAAOC,WAAa,IAGlCC,SACAC,WAAYP,GAAeQ,cAAe,EAC1CC,MAAOT,GAAeS,OAAS,GAElC,EACDC,SAAU,CACR,SAAAC,GACE,OACEC,KAAKC,OAAOC,KAAKC,SAAS,UAC1BH,KAAKC,OAAOC,KAAKC,SAAS,aAC1BH,KAAKC,OAAOC,KAAKC,SAAS,QAE7B,GAEH,OAAAC,GACQ,MAAAhB,EAAgBC,EAAOC,gBACzBe,OAAOC,KAAKlB,GAAemB,OAAS,GACtCP,KAAKL,WAAaP,EAAcQ,YAChCI,KAAKH,MAAQT,EAAcS,MAC3BW,SAASC,MAAQrB,EAAcqB,OAExBpB,EAAAqB,uBAAuBvB,IAC5Ba,KAAKL,WAAaR,EAAKS,YACvBI,KAAKH,MAAQV,EAAKU,MAClBW,SAASC,MAAQtB,EAAKsB,KAAA,IAInBjB,OAAAmB,iBAAiB,SAAUX,KAAKY,aACxC,EACD,aAAAC,GACSrB,OAAAsB,oBAAoB,SAAUd,KAAKY,aAC3C,EACDG,QAAS,CACP,aAAAC,CAAcrB,GACZK,KAAKL,WAAaA,EAClBN,EAAO4B,iBAAiB,CACtBrB,YAAaD,GAEhB,EACD,YAAAiB,GACOZ,KAAAT,QAAUC,OAAOC,WAAa,GACpC,mGAxDL,OAAAyB,IAAAC,EAAAC,EAAA,KAAA,CA6DEC,EAUM,MAVN7C,EAUM,CATO8C,EAAO/B,SAAlB2B,IAAAC,EAGM,MAHNI,EAGM,CAFJC,EAA2BC,GACXC,EAAS3B,UAhE/B4B,EAAA,IAAA,IAgEMT,IAAAU,EAAqCC,GAhE3CnD,IAAA,aAkEIyC,EAIM,MAAA,CAtEVzC,IAAA,EAkEgBC,MAlEhBmD,EAAA,CAkEsB,WAAU,CAAAC,WAAuBT,EAAU3B,gBAC3D6B,EAA0EQ,EAAA,CAAzD,cAAAV,EAAW3B,WAAEsC,YAAYP,EAAaV,qDACvDQ,EAAmBK,GACnBL,EAA2BC,UAIvBH,EAAKzB,WADbsB,EAMC,IANDe,EAMCC,EADKb,EAAKzB,OAAA,IA7Eb8B,EAAA,IAAA,6CCoBA7C,EAAIsD,IAAIC,GACRvD,EAAIsD,IAAIE,GAERxD,EAAIyD,MAAM,QAGN,kBAAmBC,WACdhD,OAAAmB,iBAAiB,QAAQ,KAC9B6B,UAAUC,cACPC,SAAS,yBACTC,MAAMC,IAIL,MAGMC,EAFyB,cAA7BrD,OAAOsD,SAASC,UACa,cAA7BvD,OAAOsD,SAASC,SAGdH,EAAaI,OAEfJ,EAAaI,OAAOC,YAAY,CAC9BC,KAAM,eACNC,UAAWN,IAIHL,UAAAC,cAAc9B,iBAAiB,oBAAoB,KACvD6B,UAAUC,cAAcW,YAChBZ,UAAAC,cAAcW,WAAWH,YAAY,CAC7CC,KAAM,eACNC,UAAWN,GAEf,GAEJ,IAEDQ,OAAOC,IACmD,GAC1D"}