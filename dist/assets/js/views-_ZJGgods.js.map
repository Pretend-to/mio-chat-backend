{"version":3,"mappings":"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","names":["BlankView","__vitePreload","Promise","resolve","then","__VITE_PRELOAD__","router","createRouter","history","createWebHistory","routes","path","name","component","HomeView$1","children","ChatView$1","ProfileView$1","AuthView$1","SettingsView$1","redirect","OverviewView$1","LLMAdaptersView$1","ServerConfigView$1","WebConfigView$1","OnebotConfigView$1","PluginsView$1","PresetsView$1","LogsView$1","beforeEach","async","to","client","everLogin","ElMessage","warning","query","fullPath","_hoisted_1","id","_hoisted_2","class","_hoisted_3","_hoisted_4","_hoisted_5","ref","key","_hoisted_8","_hoisted_10","_hoisted_11","_hoisted_13","_hoisted_15","_hoisted_16","style","width","height","position","_hoisted_21","_hoisted_22","_hoisted_23","components","MdRenderer","ContextMenu","ForwardMsg","InputEditor","ToolCallBar","FileBlock","ReasonBlock","data","shareId","contactor","preview","scroll","currentUrl","window","location","href","params","URL","searchParams","has","get","currentId","parseInt","this","$route","getContactor","Error","e","defaultId","contactList","$router","push","activeContactor","showwindow","showemoji","userInput","extraOptions","wraperPresets","selectedOption","currentDelay","toupdate","seletedText","seletedImage","retryList","showMenu","menuTop","menuLeft","validMessageIndex","repliedMessageId","autoScroll","fullScreen","chatWindowRef","messagesWrapperRef","prevScrollTop","showRollDown","inputBarTop","clearMessageTip","loadingIcon","katexPlugin","mioPlugins","plugin","codeBlockPlugin","mermaidPlugin","cursorPlugin","options","shape","imageViewerPlugin","computed","getMenuStyle","innerWidth","basicHeight","top","bottom","innerHeight","left","getDelayStatus","activeMessageChain","presetSettings","opening","role","content","type","text","time","createTime","messageChain","watch","newVal","oldVal","initContactor","toButtom","oldId","oldContactor","disableContactor","mounted","document","addEventListener","$refs","chatWindow","messagesWrapper","scrollHandler","element","querySelector","pageHeight","offsetTop","loadOriginalContactors","$message","message","updated","length","beforeUnmount","removeEventListener","methods","handleMouseUp","selectedText","getSelection","toString","clicked","setTimeout","elm","getElementById","scrollTo","scrollHeight","behavior","scrollToBottom","cleanScreen","updateFirstMessage","setLocalStorage","emit","cleanHistory","i","splice","makeSystemMessage","delSystemMessage","index","firstMessageIndex","isValidInput","input","test","waiting","tolist","setModel","list","provider","model","base","loadAvatar","toImg","snapdom","download","format","filename","error","share","hasOpening","getFullMessages","showTime","thisTime","show","getShownTime","separateTextAndImages","markdownText","regex","matches","result","lastIndex","exec","textContent","slice","trim","file","getChatwindowScrollheight","scrollTop","clientHeight","active","on","$forceUpdate","messageId","rawMessage","getMessageById","includes","filter","item","forEach","platform","formatedMessage","loadName","off","getReplyText","find","String","imageLoaded","showMessageMenu","event","messageIndex","target","tagName","toLowerCase","imgSrc","src","preventDefault","clientY","clientX","currentSelectedText","toProfile","currentScrollTop","isScrollingDown","isScrollingUp","isAtBottom","getseletedMessage","handleMessageOption","option","webSend","targetIndex","validMessage","baseContainer","getBaseUserContainer","insertMessage","status","retryMessage","_openBlock","_createElementBlock","_createElementVNode","onClick","$options","args","_toDisplayString","$data","_normalizeClass","_normalizeStyle","_createCommentVNode","_createVNode","_component_ContextMenu","onMessageOption","onClose","_hoisted_6","_Fragment","_renderList","ref_for","_hoisted_7","_hoisted_9","avatar","alt","_hoisted_12","title","_hoisted_14","onMouseup","onContextmenu","$event","elmIndex","_createBlock","_component_MdRenderer","md","theme","isStreaming","breaks","_hoisted_17","_component_ForwardMsg","messages","_component_FileBlock","_hoisted_18","_component_ReasonBlock","endTime","startTime","_hoisted_19","_cache","_component_ToolCallBar","_hoisted_20","_component_InputEditor","onStroge","onSetModel","onCleanScreen","onCleanHistory","onToButtom","created","friendlist","blankView","onPhone","pagePath","loaded","inited","_component_friendlist","_component_blankView","_component_router_view","_hoisted_24","_hoisted_25","ContactorSettings","toolCallModes","config","getToolCallModes","providers","getLLMProviders","safetyParams","getSafetySettingsParams","safetySimpleValue","Object","keys","map","value","label","allLLMTools","llmTools","toolsObject","toolsList","toolKey","enabled","tools","collapsed","centerDialogVisible","avatarPolicyList","namePolicyList","isOnebot","llmProviders","basicInfo","getAvatarPolicyValue","avatarPolicy","newId","handler","newOptions","JSON","parse","stringify","deep","newInfo","namePolicy","priority","delayInterval","setInterval","socket","delay","clearInterval","toolCallSettings","mode","handleUpdateOpenaiPresets","presets","delContactor","rmContactor","handleProviderSwitched","updateContactorName","updateContactorAvatar","_component_el_image","_createTextVNode","_component_el_input","modelValue","disabled","_component_el_select","onChange","default","_withCtx","_component_el_option","_","_component_el_switch","_component_ContactorSettings","onProviderChanged","onUpdatePresets","_component_el_button","plain","_ctx","_component_el_dialog","center","footer","useLogViewer","logs","isSubscribed","stats","isConnected","pendingRequests","Map","logMessageHandler","initLogListener","cleanupLogListener","protocol","request_id","resolver","delete","success","addLog","handleLogMessage","sendRequest","reject","requestId","randomString","set","sendMessage","log","subscribe","defaultOptions","level","modules","realtime","bufferSize","sendHistory","response","startMockLogStream","mockLogInterval","counter","mockLog","timestamp","Date","toISOString","Math","floor","random","module","caller","ip","stopMockLogStream","unsubscribe","setupSocketListeners","onConnect","info","autoSubscribe","onDisconnect","reason","onConnectError","setupStatusPolling","lastSocketId","interval","currentConnected","currentSocket","currentSocketId","cleanupSocketListeners","cleanupStatusPolling","onMounted","onUnmounted","clear","search","exportLogs","updateConfig","getStats","clearLogs","manualInit","globalLogViewer","useLogStore","defineStore","isInitialized","totalLogsCount","syncLogViewerState","initialize","route","useRoute","useRouter","configStore","useConfigStore","logStore","forbidden","isMobile","mobileMenuVisible","showMobileMenu","menuItems","icon","Menu","Connection","Monitor","ChromeFilled","ChatDotRound","Grid","Document","handleSwitchAccount","clearAdminCode","handleReturnHome","checkMobile","activeMenu","isInSubPage","currentPath","startsWith","getMobileTitle","currentItem","toggleMobileMenu","closeMobileMenu","handleBackToHome","handleMenuSelect","handleRestartService","ElMessageBox","confirm","confirmButtonText","cancelButtonText","handleReset","reset","reload","handleResetCache","resetCache","isAuthenticated","fetchConfig","accessCode","requesting","iconContainer","login","code","nextTick","classList","add","is_admin","setAdminCode","currentRoute","remove","handleEnter","presetsAPI","constructor","configAPI","getPresets","queryString","URLSearchParams","endpoint","request","getPreset","presetId","encodeURIComponent","createPreset","method","body","updatePreset","deletePreset","reloadPresets","importPreset","formData","FormData","append","headers","adminCode","fetch","json","ok","localStorage","removeItem","exportPreset","contentDisposition","match","blob","url","createObjectURL","a","createElement","appendChild","click","removeChild","revokeObjectURL","presetData","exportData","category","Blob","fallbackError","batchDeletePresets","presetIds","results","validatePreset","usePresetsStore","summary","totalCount","categoryCount","common","recommended","hidden","sourceCount","custom","pagination","total","start","nums","hasMore","loading","allPresets","preset","countByCategory","countBySource","presetsByCategory","grouped","hasOwnProperty","fetchPresets","newPresets","findIndex","p","searchPresets","keyword","presetsArray","lowerKeyword","some","h","findPresetById","findPresetByName","presetsStore","refreshing","showCompare","systemStatus","needRestart","values","adapters","instances","adapter","enable","systemStatusText","allAdapterTypes","typesFromApi","adapterTypes","types","typesFromConfig","getAdapterInstanceCount","getAdapterInstances","pendingItems","items","action","entries","providerName","models","disabledCount","flat","onebot","onebotConfig","reverse_ws_url","bot_qq","adapterTypeName","names","openai","gemini","vertex","deepseek","anthropic","charAt","toUpperCase","adapterInfo","handleRefreshModels","refreshAllModels","handleExportConfig","split","exportConfig","handleImportConfig","configData","importConfig","validateResult","validateConfig","valid","alert","errors","join","navigateTo","navigateToChat","promises","fetchAdapterTypes","catch","fetchPlugins","all","editorVisible","editorMode","editorType","editorAdapter","editorIndex","allAdapters","modelCount","reduce","count","group","enabledCount","formatTypeLabel","handleAddAdapter","handleSelectionChange","selection","clearAdapterSelection","toggleAdapterSelection","handleRefreshAll","handleBatchEnable","selectedAdapters","successCount","batchToggleAdapters","r","handleBatchDisable","handleBatchDelete","batchDeleteAdapters","handleEditorClose","handleEditorSubmit","addAdapter","updateAdapter","row","updatedData","refreshAdapterModels","adapterName","deleteAdapter","formRef","saving","reactive","port","host","max_rate_pre_min","debug","originalData","rules","required","trigger","min","max","handleSave","validate","updateConfigSection","assign","clearValidate","serverConfig","server","fetchConfigSection","debugConfig","loadConfig","showAdminCode","showUserCode","beian","admin_code","user_code","full_screen","webConfig","web","showToken","token","admin_qq","validator","rule","callback","plugins","detailDialogVisible","configDialogVisible","debugDialogVisible","currentPlugin","currentTool","pluginTools","configJsonStr","savingConfig","debugParams","debugResult","debugging","activeCollapseNames","totalToolsCount","sum","toolCount","customPluginsCount","loadPlugins","pluginAPI","listPlugins","reloading","toggling","handleRefreshPlugins","handleReloadAll","reloadAllPlugins","handleReloadPlugin","reloadPlugin","displayName","handleSaveConfig","updatePluginConfig","SyntaxError","fillExampleParams","parameters","properties","example","props","prop","enum","minimum","handleExecuteDebug","debugTool","togglePlugin","getPluginTools","g","getPluginConfig","tool","searchKeyword","categoryFilter","sourceFilter","selectedPresets","editorPreset","fileInput","waterfallRef","loadTrigger","currentPage","pageSize","shouldShowTrigger","loadingMore","loadError","displayedPresets","getPresetId","isPresetSelected","searchTimeout","clearTimeout","handleFilterChange","newHasMore","oldHasMore","setupInfiniteScroll","cleanupObserver","fetchPresetsWithFilters","source","loadMore","retryLoad","handleSearch","handleRefresh","handleCreate","handleEdit","handleDelete","handleExport","handleImport","handleFileSelect","files","observer","IntersectionObserver","isIntersecting","rootMargin","threshold","observe","disconnect","selected","indexOf","exportLogsData","clearLogsData","filterLevel","filterModule","logsContainer","exportDialogVisible","exportLoading","jsonDialogVisible","selectedLog","extraObjectKey","exportForm","maxRecords","includeMetadata","filteredLogs","filtered","performSearch","page","confirmExport","getContentType","replace","csv","txt","formatUptime","uptime","seconds","minutes","hours","days","getJsonSummary","jsonObj","extra","originalObject","formatJsonContent","copyJsonContent","formattedJson","navigator","clipboard","writeText","getObjectSummary","Array","isArray","substring","isObjectValue","formatTagValue","maxLength","str","truncateText","getTagTitle","getDisplayExtra","displayExtra","handleScroll","newValue","oldValue","immediate","statsInterval","toLocaleString","year","month","day","hour","minute","second","fractionalSecondDigits","tempLog"],"ignoreList":[],"sources":["../../../src/router/index.js","../../../src/views/ChatView.vue","../../../src/views/BlankView.vue","../../../src/views/HomeView.vue","../../../src/views/ProfileView.vue","../../../src/composables/useLogViewer.js","../../../src/stores/logStore.js","../../../src/views/SettingsView.vue","../../../src/views/AuthView.vue","../../../src/lib/presetsApi.js","../../../src/stores/presetsStore.js","../../../src/views/settings/OverviewView.vue","../../../src/views/settings/LLMAdaptersView.vue","../../../src/views/settings/ServerConfigView.vue","../../../src/views/settings/WebConfigView.vue","../../../src/views/settings/OnebotConfigView.vue","../../../src/views/settings/PluginsView.vue","../../../src/views/settings/PresetsView.vue","../../../src/views/settings/LogsView.vue"],"sourcesContent":["import { client } from \"@/lib/runtime.js\";\nimport { ElMessage } from \"element-plus\";\nimport { createRouter, createWebHistory } from \"vue-router\";\nconst ChatView = () => import(\"../views/ChatView.vue\");\nconst HomeView = () => import(\"../views/HomeView.vue\");\nconst ProfileView = () => import(\"../views/ProfileView.vue\");\nconst SettingsView = () => import(\"../views/SettingsView.vue\");\nconst AuthView = () => import(\"../views/AuthView.vue\");\nconst BlankView = () => import(\"../views/BlankView.vue\");\n\nconst router = createRouter({\n  history: createWebHistory(import.meta.env.BASE_URL),\n  routes: [\n    {\n      path: \"/\",\n      name: \"home\",\n      component: HomeView,\n      children: [\n        {\n          path: \"/\",\n          name: \"blank\",\n          component: BlankView,\n        },\n        {\n          path: \"/contactors\",\n          name: \"contactors\",\n          component: BlankView,\n        },\n        {\n          path: \"/chat/:id\",\n          name: \"chat_view\",\n          component: ChatView,\n        },\n        {\n          path: \"/profile/:id\",\n          name: \"profile_view\",\n          component: ProfileView,\n        },\n      ],\n    },\n    {\n      path: \"/auth\",\n      name: \"auth\",\n      component: AuthView,\n    },\n    {\n      path: \"/settings\",\n      name: \"settings\",\n      component: SettingsView,\n      redirect: \"/settings\",\n      children: [\n        {\n          path: \"\",\n          name: \"settings_overview\",\n          component: () => import(\"../views/settings/OverviewView.vue\"),\n        },\n        {\n          path: \"llm-adapters\",\n          name: \"settings_llm_adapters\",\n          component: () => import(\"../views/settings/LLMAdaptersView.vue\"),\n        },\n        {\n          path: \"server\",\n          name: \"settings_server\",\n          component: () => import(\"../views/settings/ServerConfigView.vue\"),\n        },\n        {\n          path: \"web\",\n          name: \"settings_web\",\n          component: () => import(\"../views/settings/WebConfigView.vue\"),\n        },\n        {\n          path: \"onebot\",\n          name: \"settings_onebot\",\n          component: () => import(\"../views/settings/OnebotConfigView.vue\"),\n        },\n        {\n          path: \"plugins\",\n          name: \"settings_plugins\",\n          component: () => import(\"../views/settings/PluginsView.vue\"),\n        },\n        {\n          path: \"presets\",\n          name: \"settings_presets\",\n          component: () => import(\"../views/settings/PresetsView.vue\"),\n        },\n        {\n          path: \"logs\",\n          name: \"settings_logs\",\n          component: () => import(\"../views/settings/LogsView.vue\"),\n        },\n      ],\n    },\n  ],\n});\n\nrouter.beforeEach(async (to) => {\n  const everLogin = client.everLogin();\n  if (\n    // \n    !everLogin &&\n    //  \n    to.name !== \"auth\"\n  ) {\n    console.log(\n      `everLogin: ${everLogin} to.name!== auth: ${to.name !== \"auth\"}`,\n    );\n    ElMessage.warning(\"\");\n    //   login?redirect=\n    const query = to.path === \"/settings\" ? null : { redirect: to.fullPath };\n    return { name: \"auth\", query };\n  }\n});\n\nexport default router;\n","<script>\nimport ForwardMsg from \"@/components/ForwardMsg.vue\";\nimport InputEditor from \"@/components/InputEditor.vue\";\nimport FileBlock from \"@/components/FileBlock.vue\";\nimport ToolCallBar from \"@/components/ToolCallBar.vue\";\nimport ReasonBlock from \"@/components/ReasonBlock.vue\";\nimport ContextMenu from \"@/components/ContextMenu.vue\";\nimport MdRenderer from \"mio-previewer\";\nimport { mermaidPlugin, codeBlockPlugin, cursorPlugin, imageViewerPlugin } from 'mio-previewer/plugins/custom';\nimport { katexPlugin } from 'mio-previewer/plugins/markdown-it';\nimport \"emoji-picker-element\";\nimport { snapdom } from \"@zumer/snapdom\";\nimport { client } from \"@/lib/runtime.js\";\nimport { shareOrCopy } from \"@/utils/tools.js\";\n\nexport default {\n  components: {\n    MdRenderer,\n    ContextMenu,\n    ForwardMsg,\n    InputEditor,\n    ToolCallBar,\n    FileBlock,\n    ReasonBlock,\n  },\n  data() {\n    let preview = false;\n    let shareId = undefined;\n    let contactor = undefined;\n    let scroll = true;\n\n    // URL\n    const currentUrl = window.location.href;\n    // URL\n    const url = new URL(currentUrl);\n    // URL\n    const params = url.searchParams;\n    // URLpreview\n    if (params.has(\"preview\")) {\n      if (params.get(\"preview\") === \"true\") {\n        preview = true;\n      }\n    }\n    // URLshareId\n    if (params.has(\"shareId\")) {\n      shareId = params.get(\"shareId\");\n    }\n    if (params.has(\"scroll\")) {\n      scroll = params.get(\"scroll\") || \"true\";\n    }\n\n    const currentId = parseInt(this.$route.params.id);\n    try {\n      contactor = client.getContactor(currentId);\n      if (!contactor) {\n        throw new Error(\"\");\n      }\n    } catch (e) {\n      const defaultId = client.contactList[0].id;\n      this.$router.push({\n        path: `/chat/${defaultId}`,\n        query: {\n          preview,\n          shareId,\n        },\n      });\n      contactor = client.getContactor(defaultId);\n    }\n    const mioPlugins = [{\n      plugin: codeBlockPlugin,\n    },\n    {\n      plugin: mermaidPlugin,\n    },\n    {\n      plugin: cursorPlugin,\n      options: {\n        shape: 'circle'\n      }\n    },\n    {\n      plugin: imageViewerPlugin,\n    }\n    ]\n\n    return {\n      scroll,\n      preview,\n      shareId,\n      activeContactor: contactor,\n      showwindow: true,\n      showemoji: false,\n      userInput: \"\",\n      client: client,\n      extraOptions: [],\n      wraperPresets: {},\n      selectedOption: null,\n      currentDelay: 0,\n      toupdate: false,\n      seletedText: \"\",\n      seletedImage: \"\",\n      retryList: [],\n      showMenu: false,\n      menuTop: 0,\n      menuLeft: 0,\n      validMessageIndex: -1,\n      repliedMessageId: -1,\n      autoScroll: false,\n      fullScreen: false,\n      chatWindowRef: null,\n      messagesWrapperRef: null,\n      prevScrollTop: 0,\n      showRollDown: false,\n      inputBarTop: 0,\n      clearMessageTip: \"\",\n      loadingIcon: \"<span id='message-loading-icon'></span>\",\n      katexPlugin,\n      mioPlugins\n    };\n  },\n  computed: {\n    getMenuStyle() {\n      // 768px\n      if (window.innerWidth < 768) {\n        const basicHeight = 160;\n        // \n        if (this.menuTop - basicHeight < 0) {\n          return {\n            top: basicHeight + \"px\",\n          };\n        }\n        return {\n          bottom: window.innerHeight - this.menuTop + 16 + \"px\",\n        };\n      } else {\n        // \n        if (this.menuLeft + 110 > window.innerWidth) {\n          return {\n            top: this.menuTop + \"px\",\n            left: this.menuLeft - 110 + \"px\",\n          };\n        } else {\n          return {\n            top: this.menuTop + \"px\",\n            left: this.menuLeft + \"px\",\n          };\n        }\n      }\n    },\n    getDelayStatus() {\n      return this.currentDelay > 1000\n        ? \"high\"\n        : this.currentDelay > 500\n          ? \"mid\"\n          : this.currentDelay > 100\n            ? \"low\"\n            : \"ultra\";\n    },\n    activeMessageChain() {\n      return this.activeContactor.options.presetSettings?.opening\n        ? [\n          {\n            role: \"other\",\n            content: [\n              {\n                type: \"text\",\n                data: {\n                  text: this.activeContactor.options.presetSettings.opening,\n                },\n              },\n            ],\n            time: this.activeContactor.createTime,\n          },\n          ...this.activeContactor.messageChain,\n        ]\n        : this.activeContactor.messageChain;\n    },\n  },\n  watch: {\n    [\"$route.params.id\"](newVal, oldVal) {\n      const currentId = parseInt(newVal);\n      const contactor = client.getContactor(currentId);\n      this.activeContactor = contactor;\n      this.initContactor(this.activeContactor);\n      if (this.chatWindowRef) this.toButtom();\n      if (oldVal) {\n        const oldId = parseInt(oldVal);\n        const oldContactor = client.getContactor(oldId);\n        this.disableContactor(oldContactor);\n      }\n    },\n  },\n  async mounted() {\n    document.addEventListener(\"click\", () => {\n      this.showMenu = false;\n      this.seletedText = \"\";\n      this.seletedImage = \"\";\n      // if( this.showemoji) this.showemoji = false;\n    });\n    this.chatWindowRef = this.$refs.chatWindow;\n    this.messagesWrapperRef = this.$refs.messagesWrapper;\n    this.chatWindowRef.addEventListener(\"scroll\", this.scrollHandler);\n    if (!this.preview && this.scroll) this.toButtom();\n    this.scroll = true;\n    this.initContactor(this.activeContactor);\n    this.fullScreen = this.client.fullScreen;\n    // setInterval(() => {\n    //   this.currentDelay = this.client.socket.delay;\n    // }, 3000);\n    // .input-barinputBarTop\n    const element = document.querySelector(\".input-bar\");\n    if (element) {\n      // \n      const pageHeight = window.innerHeight;\n      this.inputBarTop = pageHeight - element.offsetTop;\n      console.log(this.inputBarTop);\n    }\n\n\n    if (this.shareId) {\n      const loadAble = await client.loadOriginalContactors(this.shareId);\n      if (loadAble) {\n        this.$router.push({\n          path: \"/chat/\" + this.shareId,\n          query: {\n            preview: this.preview,\n            scroll: false,\n          },\n        });\n      } else {\n        this.$message({\n          message: \"\",\n          type: \"error\",\n        });\n      }\n    }\n  },\n  updated() {\n    if (this.toupdate && this.autoScroll && this.retryList.length === 0) {\n      this.toButtom();\n      this.toupdate = false;\n    }\n  },\n  beforeUnmount() {\n    // \n    this.disableContactor(this.activeContactor);\n    this.chatWindowRef.removeEventListener(\"scroll\", this.scrollHandler);\n  },\n  methods: {\n    handleMouseUp() {\n      const selectedText = window.getSelection().toString();\n      if (selectedText) {\n        this.seletedText = selectedText;\n        console.log(\"\" + selectedText);\n      }\n    },\n    toButtom(clicked) {\n      setTimeout(() => {\n        const scrollToBottom = () => {\n          const elm =\n            this.chatWindowRef ||\n            document.getElementById(\"main-messages-window\");\n          if (!elm) return;\n\n          //  or \n          elm.scrollTo({\n            top: elm.scrollHeight,\n            behavior: clicked ? \"smooth\" : \"instant\",\n          });\n        };\n        scrollToBottom();\n      }, 1);\n    },\n    cleanScreen() {\n      this.activeContactor.messageChain = [];\n      this.activeContactor.updateFirstMessage();\n      client.setLocalStorage(); //\n      this.activeContactor.emit(\"updateMessageSummary\");\n\n      this.toupdate = true;\n      this.$message({ message: \"\", type: \"success\" });\n    },\n    cleanHistory() {\n      this.activeContactor.updateFirstMessage();\n      this.$message({\n        message: \"\",\n        type: \"success\",\n      });\n      // \n      for (let i = this.activeContactor.messageChain.length - 1; i >= 0; i--) {\n        const message = this.activeContactor.messageChain[i];\n        // role  \"mio_system\"\n        if (\n          message.role === \"mio_system\" &&\n          message.content[0].type === \"text\" &&\n          message.content[0].data.text === this.clearMessageTip\n        ) {\n          this.activeContactor.messageChain.splice(i, 1);\n        }\n      }\n      this.activeContactor.makeSystemMessage(this.clearMessageTip);\n      // \n      client.setLocalStorage();\n    },\n\n    delSystemMessage(index) {\n      const message = this.activeContactor.messageChain[index];\n      // \n      if (\n        message.content[0].type === \"text\" &&\n        message.content[0].data.text === this.clearMessageTip\n      ) {\n        this.activeContactor.firstMessageIndex = 0;\n      }\n      this.activeContactor.messageChain.splice(index, 1);\n      // \n      client.setLocalStorage();\n    },\n\n    isValidInput(input) {\n      // \n      const regex = /^[ \\n]+$/;\n      const result = !regex.test(input);\n      return result;\n    },\n    waiting() {\n      this.$message({ message: \"\", type: \"warning\" });\n    },\n\n    tolist() {\n      this.$router.push({ name: \"home\" });\n    },\n\n    async setModel(list) {\n      const provider = list[0];\n      const model = list[2];\n      this.activeContactor.options.provider = provider;\n      this.activeContactor.options.base.model = model;\n      this.activeContactor.loadAvatar();\n      await client.setLocalStorage(); //\n    },\n    async toImg() {\n      // snapdom this.messagesWrapperRef \n      try {\n        await snapdom.download(this.messagesWrapperRef, {\n          format: 'png',\n          filename: 'chat.png'\n        });\n      } catch (error) {\n        console.error('Failed to capture chat window:', error);\n        this.$message({\n          message: \"\",\n          type: \"error\",\n        });\n      }\n    },\n    async share() {\n      // \n      // const shareResult = await client.shareContactor(\n      //   this.activeContactor.id,\n      // );\n      // if (shareResult && shareResult.shareUrl) {\n      //   const { shareUrl } = shareResult;\n      //   // api\n      //   const { success, message } = shareOrCopy(shareUrl);\n      //   if (success) {\n      //     this.$message({\n      //       message: message,\n      //       type: \"success\",\n      //     });\n      //   } else {\n      //     this.$message({\n      //       message: message,\n      //       type: \"error\",\n      //     });\n      //   }\n      // }\n      await this.toImg();\n    },\n    hasOpening() {\n      return this.activeContactor.options.presetSettings?.opening\n        ? true\n        : false;\n    },\n    getFullMessages() {\n      return this.hasOpening()\n        ? [\n          {\n            role: \"other\",\n            content: [\n              {\n                type: \"text\",\n                data: {\n                  text: this.activeContactor.options.presetSettings.opening,\n                },\n              },\n            ],\n            time: this.activeContactor.createTime,\n          },\n          ...this.activeContactor.messageChain,\n        ]\n        : this.activeContactor.messageChain;\n    },\n    showTime(index) {\n      const list = this.getFullMessages();\n      const thisTime = list[index].time;\n      if (index === 0) {\n        return {\n          show: true,\n          time: this.activeContactor.getShownTime(thisTime),\n        };\n      } else {\n        const earlyTime = list[index - 1].time;\n        if (thisTime - earlyTime > 600000) {\n          return {\n            show: true,\n            time: this.activeContactor.getShownTime(thisTime),\n          };\n        } else {\n          return {\n            show: false,\n            time: \"\",\n          };\n        }\n      }\n    },\n    separateTextAndImages(markdownText) {\n      // Markdown\n      const regex = /!\\[([^\\]]*)\\]\\((.*)\\)/g;\n      let result = [];\n      let lastIndex = 0;\n\n      // \n      let matches;\n      while ((matches = regex.exec(markdownText)) !== null) {\n        // \n        if (matches.index > lastIndex) {\n          const textContent = markdownText\n            .slice(lastIndex, matches.index)\n            .trim();\n          if (textContent) {\n            result.push({\n              type: \"text\",\n              data: {\n                text: textContent,\n              },\n            });\n          }\n        }\n\n        // \n        result.push({\n          type: \"image\",\n          data: {\n            // file: matches[2].length > 200 ? matches[2] : `/api/proxy?url=${matches[2]}`,\n            file: matches[2],\n          },\n        });\n\n        // lastIndex\n        lastIndex = regex.lastIndex;\n      }\n\n      // \n      if (lastIndex < markdownText.length) {\n        const textContent = markdownText.slice(lastIndex).trim();\n        if (textContent) {\n          result.push({\n            type: \"text\",\n            data: {\n              text: textContent,\n            },\n          });\n        }\n      }\n\n      return result;\n    },\n\n    getChatwindowScrollheight() {\n      var scrollTop = this.chatWindowRef.scrollTop; // \n      var clientHeight = this.chatWindowRef.clientHeight; // \n      var scrollHeight = this.chatWindowRef.scrollHeight; // \n\n      // \n      var scrollPercentage = scrollTop / (scrollHeight - clientHeight);\n      var height = scrollPercentage * scrollHeight;\n\n      return scrollHeight - height;\n    },\n\n    initContactor(contactor) {\n      contactor.active = true;\n\n      contactor.on(\"revMessage\", (message) => {\n        this.activeContactor.messageChain.push(message);\n        this.toupdate = true;\n      });\n      contactor.on(\"delMessage\", (index) => {\n        console.log(`${index}`);\n        // \n        this.activeContactor.messageChain.splice(index, 1);\n        this.toupdate = true;\n      });\n\n      contactor.on(\"updateMessage\", () => {\n        this.$forceUpdate();\n        this.toupdate = true;\n        client.setLocalStorage(); //\n      });\n\n      contactor.on(`completeMessage`, async (e) => {\n        const messageId = e.messageId;\n        const rawMessage = this.activeContactor.getMessageById(messageId);\n\n        if (this.retryList.includes(messageId)) {\n          this.retryList = this.retryList.filter((item) => item !== messageId);\n        }\n\n        rawMessage.content.forEach((element, index) => {\n          if (\n            element.type === \"text\" &&\n            this.activeContactor.platform === \"onebot\"\n          ) {\n            const formatedMessage = this.separateTextAndImages(\n              element.data.text,\n            );\n            //  formatedMessage  index \n            rawMessage.content.splice(index, 1, ...formatedMessage);\n          }\n        });\n\n        this.toupdate = true;\n        this.$forceUpdate();\n        this.activeContactor.loadName();\n        client.setLocalStorage(); //\n        console.log(e);\n      });\n    },\n    disableContactor(contactor) {\n      if (contactor) {\n        contactor.active = false;\n        contactor.off(`updateMessage`);\n        contactor.off(`revMessage`);\n        contactor.off(`delMessage`);\n        contactor.off(`completeMessage`);\n      }\n    },\n    getReplyText(id) {\n      let content = \"\";\n      const message = this.activeContactor.messageChain.find(\n        (item) => item.id === id || String(item.id) === String(id),\n      );\n      if (message) {\n        message.content.forEach((element) => {\n          if (element.type === \"text\") {\n            content += element.data.text;\n          } else if (element.type === \"image\") {\n            content += \"[]\";\n          }\n        });\n        // if (content.length > 20) {\n        //   return `${content.substr(0, 20)}...`;\n        // } else {\n        //   return `${content}`;\n        // }\n        return content.trim().slice(0, 20);\n      } else {\n        console.log(\"\");\n        // id\n        console.log(this.activeContactor.messageChain);\n        console.log(\"id\" + id);\n        return \"[] \";\n      }\n    },\n    imageLoaded() {\n      this.scroll && this.toButtom();\n    },\n    showMessageMenu(event, messageIndex) {\n      // \n      if (event.target.tagName.toLowerCase() === \"img\") {\n        const imgElement = event.target;\n        const imgSrc = imgElement.src;\n        this.seletedImage = imgSrc;\n      } else {\n        console.log(\"\");\n      }\n      this.validMessageIndex =\n        this.activeContactor.platform === \"openai\" && this.hasOpening()\n          ? messageIndex - 1\n          : messageIndex;\n      event.preventDefault();\n      this.showMenu = true;\n      this.menuTop = event.clientY;\n      this.menuLeft = event.clientX;\n\n      const currentSelectedText = window.getSelection().toString();\n      if (currentSelectedText) {\n        this.seletedText = currentSelectedText;\n      } else {\n        this.seletedText = \"\";\n      }\n    },\n    toProfile() {\n      this.$router.push({\n        name: \"profile_view\",\n        params: {\n          id: this.activeContactor.id,\n        },\n      });\n      // \n      // this.$message({\n      //   message: \"\",\n      //   type: \"warning\",\n      // });\n    },\n    scrollHandler() {\n      //  scrollTop\n      const currentScrollTop = this.chatWindowRef.scrollTop;\n\n      // \n      //  scrollTop  scrollTop\n      const isScrollingDown = currentScrollTop > this.prevScrollTop;\n      //  scrollTop  scrollTop\n      const isScrollingUp = currentScrollTop < this.prevScrollTop;\n      // \n\n      //  scrollTop \n      this.prevScrollTop = currentScrollTop;\n\n      // ---  ( isScrollingDown  isScrollingUp) ---\n      this.showMenu = false; // \n      if (this.showemoji) this.showemoji = false; // \n\n      const scrollHeight = this.getChatwindowScrollheight(); // \n\n      this.autoScroll = scrollHeight > 100 ? false : true;\n\n      const isAtBottom = scrollHeight <= 200 - 1; // \n\n      if (isScrollingDown && !this.autoScroll && !isAtBottom) {\n        this.showRollDown = true;\n      } else if (isScrollingUp || this.autoScroll || isAtBottom) {\n        this.showRollDown = false;\n      }\n    },\n    getseletedMessage() {\n      return this.activeContactor.messageChain[this.validMessageIndex];\n    },\n    handleMessageOption(option) {\n      const message = this.getseletedMessage();\n      switch (option) {\n        case \"retry\":\n          if (this.activeContactor.platform === \"onebot\") {\n            // \n            if (message.role === \"user\") {\n              this.activeContactor.webSend(message);\n            } else {\n              this.activeContactor.webSend({\n                ...message,\n                role: \"user\",\n              });\n            }\n            this.$message({ message: \"\", type: \"success\" });\n          } else {\n            const targetIndex =\n              message.role === \"user\"\n                ? this.validMessageIndex + 1\n                : this.validMessageIndex;\n\n            let validMessage = this.activeContactor.messageChain[targetIndex];\n            if (!validMessage || validMessage.role !== \"other\") {\n              // ,\n              const baseContainer = this.activeContactor.getBaseUserContainer();\n              baseContainer.role = \"other\";\n              this.activeContactor.insertMessage(baseContainer, targetIndex);\n              validMessage = baseContainer;\n            }\n            if (validMessage.status === \"retrying\") {\n              this.$message({\n                message: \"\",\n                type: \"warning\",\n              });\n              return;\n            }\n            this.activeContactor.retryMessage(validMessage.id);\n            validMessage.status = \"retrying\";\n            this.retryList.push(validMessage.id);\n          }\n          this.toButtom();\n          break;\n        case \"reply\":\n          if (this.activeContactor.platform === \"onebot\") {\n            this.repliedMessageId = message.id;\n            this.$message({ message: \"\", type: \"success\" });\n          } else {\n            this.userInput +=\n              this.getReplyText(\n                this.activeContactor.messageChain[this.validMessageIndex].id,\n              ) + \"\\n\\n\";\n          }\n          break;\n        case \"delete\":\n          this.activeContactor.messageChain.splice(this.validMessageIndex, 1);\n          client.setLocalStorage();\n          break;\n        default:\n          break;\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <div id=\"chat-window\">\n    <div class=\"upside-bar\">\n      <div class=\"return\" @click=\"tolist()\">\n        <i class=\"iconfont icon-return\"></i>\n      </div>\n      <div class=\"name-area\" @click=\"toProfile\">\n        <div class=\"contactor-name\">{{ activeContactor.name }}</div>\n        <span :class=\"'delay-status ' + getDelayStatus\"></span>\n        <span class=\"delay-num\">: {{ currentDelay }} ms</span>\n      </div>\n      <ul class=\"options\">\n        <li class=\"share\" @click=\"share()\">\n          <i class=\"iconfont icon-share\"></i>\n        </li>\n      </ul>\n    </div>\n    <div id=\"main-messages-window\" ref=\"chatWindow\" :class=\"{\n      'message-window': true,\n      preview: preview,\n    }\">\n      <div v-if=\"showRollDown\" id=\"roll-buttom-button\" :style=\"{ bottom: inputBarTop + 24 + 'px' }\"\n        @click=\"toButtom(true)\">\n        <i class=\"iconfont down1\"></i>\n      </div>\n      <ContextMenu v-show=\"showMenu\" type=\"message\" :message=\"getseletedMessage()\" :seleted-text :seleted-image\n        :style=\"getMenuStyle\" @message-option=\"handleMessageOption\" @close=\"showMenu = false\" />\n      <div class=\"messages-wrapper\" ref=\"messagesWrapper\">\n        <div v-for=\"(item, index) of activeMessageChain\" :key=\"`${activeContactor.id}-${item.id}`\" ref=\"message\"\n          class=\"message-container\">\n          <div v-if=\"showTime(index).show\" class=\"message-time\">\n            {{ showTime(index).time }}\n          </div>\n          <div :id=\"item.role\" class=\"message-body\">\n            <div v-if=\"item.role !== 'mio_system'\" class=\"avatar\">\n              <img v-if=\"item.role === 'other'\" :src=\"activeContactor.avatar\" :alt=\"activeContactor.name\"\n                @click=\"toProfile\" />\n              <img v-else :src=\"client.avatar\" :alt=\"client.name\" />\n            </div>\n            <div v-if=\"item.role !== 'mio_system'\" class=\"msg\">\n              <div class=\"wholename\">\n                <div v-if=\"\n                  item.role === 'other' ? activeContactor.title : client.title\n                \" class=\"title\">\n                  {{\n                    item.role === \"other\" ? activeContactor.title : client.title\n                  }}\n                </div>\n                <div class=\"name\">\n                  {{ item.role === \"other\" ? activeContactor.name : client.name }}\n                </div>\n              </div>\n              <div :class=\"['content', item.status]\" @mouseup=\"handleMouseUp\"\n                @contextmenu=\"showMessageMenu($event, index)\">\n                <div v-for=\"(element, elmIndex) of item.content\" :key=\"elmIndex\" class=\"inner-content\">\n                  <MdRenderer v-if=\"element.type === 'text'\" :md=\"element.data.text\" :theme=\"'github'\" :isStreaming=\"['pending', 'retrying'].includes(item.status) &&\n                    item.content.length - 1 === elmIndex\n                    \" :custom-plugins=\"mioPlugins\" :markdown-it-plugins=\"[{ plugin: katexPlugin }]\"\n                    :markdown-it-options=\"{ breaks: activeContactor.platform === 'onebot' }\" />\n                  <MdRenderer v-if=\"element.type === 'image'\" :md=\"`![image](${element.data.file})`\"\n                    :custom-plugins=\"mioPlugins\" :theme=\"'github'\" :key=\"element.data.file\" />\n                  <div v-else-if=\"element.type === 'reply'\" class=\"reply-block\">\n                    {{ getReplyText(element.data.id) }}\n                  </div>\n                  <ForwardMsg v-else-if=\"element.type === 'nodes'\" :contactor=\"activeContactor\"\n                    :messages=\"element.data.messages\" />\n                  <FileBlock v-else-if=\"element.type === 'file'\" :file-url=\"element.data.file\" />\n                  <span v-else-if=\"element.type === 'at'\" />\n                  <ReasonBlock v-else-if=\"element.type === 'reason'\" :end-time=\"element.data.endTime\"\n                    :start-time=\"element.data.startTime\" :content=\"element.data.text\" />\n                  <div v-else-if=\"element.type === 'blank'\" class=\"blank-message\"\n                    style=\"width: 10rem; height: 28.8px; position: relative\">\n                    <span class=\"blank-loader\"></span>\n                  </div>\n                  <ToolCallBar v-else-if=\"element.type === 'tool_call'\" :tool-call=\"element.data\" />\n                </div>\n              </div>\n            </div>\n            <div v-else class=\"system-message\">\n              <div class=\"system-message-content\">\n                {{ item.content[0].data.text }}\n              </div>\n              <div class=\"system-message-button\">\n                <i class=\"iconfont close\" @click=\"delSystemMessage(index)\"></i>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n    </div>\n    <InputEditor ref=\"inputEditor\" :active-contactor :replied-message-id @stroge=\"client.setLocalStorage()\"\n      @set-model=\"setModel\" @clean-screen=\"cleanScreen\" @clean-history=\"cleanHistory\" @to-buttom=\"toButtom\" />\n  </div>\n</template>\n\n<style lang=\"sass\" scoped>\n$mobile: 600px\n$icon-hover: #09f\n\n.preview\n    position: fixed\n    top: 0\n    left: 0\n    width: 100vw\n    height: 100vh\n    z-index: 10000\n\n#chat-window\n    z-index: 1\n    min-width: 0.0625rem\n    position: relative\n    display: flex\n    flex-grow: 1\n    background-color: #f2f2f2\n    flex-direction: column\n\n    @media (max-width: $mobile)\n        height: 100%\n\n.upside-bar\n    flex-basis: 4rem\n    flex-shrink: 0\n    width: 100%\n    display: flex\n    align-items: flex-end\n    justify-content: flex-start\n    border-bottom: 0.0625rem solid #ebebeb\n    -webkit-app-region: drag\n\n    @media (max-width: $mobile)\n      position: fixed\n      height: 4rem\n      z-index: 1000\n      background-color: hsla(0, 0%, 100%, 0.8)\n      backdrop-filter: blur(0.5rem)\n\n    .return\n        display: none\n\n        &:hover\n            color: $icon-hover\n\n        @media (max-width: $mobile)\n            display: block\n            margin-left: 1rem\n            margin-bottom: .8rem\n\n    .name-area\n        cursor: pointer\n        position: relative\n        display: flex\n        align-items: center\n        flex-basis: 10rem\n        flex-grow: 1\n        justify-content: flex-start\n        margin: 0 0 .5rem 1rem\n\n        .contactor-name\n            text-overflow: ellipsis\n            white-space: nowrap\n            overflow: hidden\n            max-width: 10rem\n\n        .delay-status\n            width: .8rem\n            height: .8rem\n            border-radius: 50%\n            margin-left: .5rem\n            position: relative\n            top: .2rem\n\n            @media screen and (max-width: $mobile)\n              display: none\n\n\n            &:hover + .delay-num\n                display: inline-block\n\n            &.ultra\n                background-color: rgb(53, 233, 146)\n\n            &.low\n                background-color: rgb(255, 204, 0)\n\n            &.mid\n                background-color: rgb(255, 102, 102)\n\n            &.high\n                background-color: #ccc\n\n        .delay-num\n            display: none\n            position: absolute\n            font-size: 0.8rem\n            bottom: 0rem\n            background-color: #fff\n            border: 1px dashed #000\n            border-radius: 0.25rem\n            padding: 0.125rem 0.25rem\n            margin-left: 1rem\n            white-space: nowrap\n\n    .options\n        flex-basis: 10rem\n        display: flex\n        height: 2rem\n        flex-wrap: nowrap\n        flex-direction: row-reverse\n        align-items: flex-end\n        margin: 0 1rem .5rem 0\n\n        li\n            margin-left: 0.5rem\n            color: #000\n            font-weight: 580\n\n            &:hover\n              color: $icon-hover\n\n            i\n                font-size: 1.25rem\n\n\n.black-overlay\n    position: fixed\n    top: 0\n    left: 0\n    width: 100%\n    height: 100%\n    background-color: rgba(0, 0, 0, 0.4)\n    z-index: 1001\n/* z-index */\n\n#roll-buttom-button\n    position: fixed\n    right: 0.5rem\n    cursor: pointer\n    display: flex\n    z-index: 1000\n    background-color: #fff\n    width: 4rem\n    height: 1.5rem\n    border-radius: 0.75rem\n    align-items: center\n    justify-content: center\n    box-shadow: 0 0 0.25rem rgba(0, 0, 0, 0.2)\n    transition: background-color 0.3s ease, transform 0.3s ease\n    &:hover\n        background-color: #f0f0f0\n        transform: scale(1.1)\n\n    &:hover\n        color: $icon-hover\n    i\n        font-size: 1rem\n\n#theimg\n    position: fixed\n    top: 50%\n    left: 50%\n    transform: translate(-50%, -50%)\n    max-height: 75%\n    max-width: 50%\n.inner-content\n  display: flex\n\n.background img\n    position: absolute\n    top: 50%\n    left: 50%\n    transform: translate(-50%, -50%)\n\n.message-body > .avatar\n  cursor: pointer\n  flex-basis: 2.65rem\n  min-width: 2.65rem\n  height: 2.65rem\n\n\n.avatar > img\n  width: 100%\n  height: 100%\n  border-radius: 50%\n\n\n.window-controls\n    display: flex\n    flex-basis: 100%\n\n    @media (max-width: $mobile)\n        display: none\n\n    .button\n        display: flex\n        justify-content: center\n        padding-top: 0.5rem\n        flex: 0 0 2rem\n\n        &:hover\n            background-color: rgb(231, 231, 231)\n\n        &#close:hover\n            background-color: rgb(255, 0, 0)\n            color: white\n\n\n.button#close:hover svg path\n    fill: #fff\n\n\n.voice-box\n    display: flex\n    width: 11.25rem\n    height: 1.5rem\n    margin: 0.25rem 0\n\n    .icon\n        flex-basis: 1.5rem\n        background-color: rgb(0, 0, 0)\n        display: flex\n        justify-content: center\n        align-items: center\n        border-radius: 50%\n\n    .wave\n        display: flex\n        justify-content: center\n        align-items: center\n        flex-grow: 1\n\n.wave svg\n    height: 1.25rem\n    width: 80%\n\n.loader\n    width: 0.625rem\n    padding: 0.25rem\n    aspect-ratio: 1\n    border-radius: 50%\n    background: rgb(0, 153, 255)\n    --_m: conic-gradient(#0000 10%, #000), linear-gradient(#000 0 0) content-box\n    -webkit-mask: var(--_m)\n    mask: var(--_m)\n    -webkit-mask-composite: source-out\n    mask-composite: subtract\n    animation: l3 1s infinite linear\n    position: absolute\n\n@keyframes move\n    0%\n        left: -20% // \n    100%\n        left: 120% // \n\n.blank-loader\n    width: 10%\n    height: 200%\n    position: absolute\n    background: linear-gradient(to right, rgb(255, 255, 255), rgb(0, 0, 0) 50%, transparent 50%, transparent)\n    top: -50%\n    transform: rotate(30deg)\n    filter: blur(5px)\n    animation: move 1s linear infinite // 1s\n\n@keyframes l\n    to\n        transform: rotate(1turn)\n\n@media (max-width: 600px)\n    #chatwindow\n        height: 100%\n\n    .upsidebar\n        white-space: nowrap\n        max-width: 7rem\n        text-overflow: ellipsis\n        overflow: hidden\n        background: #00a8ff linear-gradient(to right, #00d2f8, #00a8ff)\n\n    .upsidebar *\n        color: white\n        fill: white\n\n    .delay-num\n        color: black\n\n    .window-controls\n        display: none\n\n    .name-area\n        padding-bottom: 0.25rem\n\n    .input-area\n        overflow-y: auto\n\n    .inputbar\n        flex-basis: 4rem\n\n    .delay-status\n        position: relative\n        top: -.2rem\n</style>\n","<template>\n  <div class=\"blank-view\">\n    <div class=\"upside-bar\">\n      <div class=\"options\"></div>\n    </div>\n  </div>\n</template>\n<script>\nimport { client } from \"@/lib/runtime.js\";\n\nexport default {\n  name: \"BlankView\",\n  data() {\n    return {\n      fullScreen: false,\n      client: client,\n    };\n  },\n  watch: {},\n  created() {\n    this.fullScreen = client.fullScreen;\n  },\n  methods: {\n    waiting() {\n      this.$message({ message: \"\", type: \"warning\" });\n    },\n  },\n};\n</script>\n<style lang=\"sass\" scoped>\n.blank-view\n  background-color: #f2f2f2\n  flex-grow: 1\n\n.upside-bar\n    flex-basis: 3.75rem\n    flex-shrink: 0\n    height: 3.75rem\n    width: 100%\n    display: flex\n    align-items: flex-end\n    flex-direction: row-reverse\n    justify-content: space-between\n\n    .options\n        flex-basis: 6rem\n        display: flex\n        height: 100%\n        width: 100%\n        flex-wrap: wrap\n        flex-direction: row-reverse\n</style>\n","<template>\n  <div v-if=\"!onPhone\" id=\"main\">\n    <friendlist></friendlist>\n    <router-view v-if=\"loaded\"></router-view>\n    <blankView v-else></blankView>\n  </div>\n  <div v-else-if=\"pagePath === '/'\" id=\"main-mobile\">\n    <friendlist v-if=\"loaded\"></friendlist>\n    <blankView v-else></blankView>\n  </div>\n  <div v-else id=\"main-mobile\" class=\"mobile-chat\">\n    <router-view v-if=\"loaded\"></router-view>\n    <blankView v-else></blankView>\n  </div>\n</template>\n\n<script>\nimport friendlist from \"@/components/FriendList.vue\";\nimport { client } from \"@/lib/runtime.js\";\nimport blankView from \"@/views/BlankView.vue\";\n\nexport default {\n  components: {\n    friendlist,\n    blankView,\n  },\n  data() {\n    const onPhone = window.innerWidth < 600;\n    return {\n      onPhone,\n      pagePath: this.$route.path,\n      loaded: false,\n    };\n  },\n  watch: {\n    $route: function (newVal) {\n      this.pagePath = newVal.path;\n    },\n  },\n  mounted() {\n    if (client.inited) {\n      this.loaded = true;\n    } else {\n      client.on(\n        \"loaded\",\n        () => {\n          this.loaded = true;\n        },\n        false,\n      );\n    }\n  },\n};\n</script>\n\n<style>\n#main {\n  background-color: rgb(255, 255, 255);\n  flex-grow: 1;\n  display: flex;\n  width: calc(100% - 4.5rem);\n  background-color: #f2f2f2;\n}\n\n#main > .profile-body {\n  margin-top: 4rem;\n}\n\n#main-mobile {\n  width: 100%;\n  max-height: calc(100vh - 4rem);\n  background-color: rgb(255, 255, 255);\n  flex-grow: 1;\n  display: flex;\n}\n\n.mobile-chat#main-mobile {\n  max-height: 100%;\n}\n</style>\n","<template>\n  <div class=\"profile-body\">\n    <div id=\"profile\">\n      <div class=\"profile-container\">\n        <div class=\"base-info\">\n          <div class=\"base-info-avatar\">\n            <el-image\n              :src=\"activeContactor.avatar\"\n              :preview-src-list=\"[activeContactor.avatar]\"\n            />\n          </div>\n          <div class=\"base-info-content\">\n            <div class=\"name\">{{ activeContactor.name }}</div>\n            <div class=\"id\">ID {{ activeContactor.id }}</div>\n            <div class=\"status\">\n              <span :class=\"'delay-status ' + getDelayStatus\"></span>\n              \n            </div>\n          </div>\n          <!-- LLM Provider select is now inside ContactorSettings -->\n        </div>\n\n        <div class=\"info-blocks\">\n          <div class=\"settings-block\">\n            <div class=\"block-title\">Bot </div>\n            <div class=\"block-content\">\n              <div class=\"block-content-item\">\n                <div class=\"contactor-name item-title\"></div>\n                <div class=\"item-content\">\n                  <el-input\n                    v-model=\"basicInfo.name\"\n                    :disabled=\"basicInfo.namePolicy !== 1\"\n                  ></el-input>\n                </div>\n              </div>\n              <div class=\"block-content-item\">\n                <div class=\"item-title\"></div>\n                <div class=\"item-content\">\n                  <el-input \n                    v-if=\"basicInfo.avatarPolicy !== 1\"\n                    :value=\"''\"\n                    :disabled=\"true\"\n                  ></el-input>\n                  <el-input \n                    v-else\n                    v-model=\"basicInfo.avatar\"\n                    :disabled=\"isOnebot\"\n                  ></el-input>\n                </div>\n              </div>\n              <div v-if=\"!isOnebot\" class=\"block-content-item\">\n                <div class=\"item-title\"></div>\n                <div class=\"item-content\">\n                  <el-select v-model=\"basicInfo.avatarPolicy\"\n                  @change=\"updateContactorAvatar\"\n                  >\n                    <el-option\n                      v-for=\"item in avatarPolicyList\"\n                      :key=\"item.value\"\n                      :label=\"item.label\"\n                      :value=\"item.value\"\n                    />\n                  </el-select>\n                </div>\n              </div>\n              <div v-if=\"!isOnebot\" class=\"block-content-item\">\n                <div class=\"item-title\"></div>\n                <div class=\"item-content\">\n                  <el-select\n                    v-model=\"basicInfo.namePolicy\"\n                    @change=\"updateContactorName\"\n                  >\n                    <el-option\n                      v-for=\"item in namePolicyList\"\n                      :key=\"item.value\"\n                      :label=\"item.label\"\n                      :value=\"item.value\"\n                    />\n                  </el-select>\n                </div>\n              </div>\n              <div class=\"block-content-item\">\n                <div class=\"item-title\"></div>\n                <div class=\"item-content\">\n                  <el-switch v-model=\"basicInfo.priority\"> </el-switch>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"info-blocks\">\n          <ContactorSettings\n            v-if=\"!isOnebot\"\n            v-model:model-value=\"options\"\n            :active-contactor-platform=\"activeContactor.platform\"\n            :llm-providers-list=\"llmProviders\"\n            :tool-call-modes-list=\"toolCallModes\"\n            :all-llm-tools-data=\"allLLMTools\"\n            :safety-settings-params=\"safetyParams\"\n            :safety-simple-value-options=\"safetySimpleValue\"\n            :presets-history-data=\"options.presetSettings?.history\"\n            @provider-changed=\"handleProviderSwitched\"\n            @update-presets=\"handleUpdateOpenaiPresets\"\n          />\n        </div>\n      </div>\n    </div>\n    <div class=\"action-bar\">\n      <el-button plain @click=\"$router.push(`/chat/${activeContactor.id}`)\">\n        \n      </el-button>\n      <el-button type=\"danger\" plain @click=\"centerDialogVisible = true\">\n        \n      </el-button>\n      <el-dialog v-model=\"centerDialogVisible\" title=\"\" width=\"300\" center class=\"confirm-dialog\">\n        <span>  </span>\n        <template #footer>\n          <div class=\"dialog-footer\">\n            <el-button @click=\"centerDialogVisible = false\"></el-button>\n            <el-button type=\"primary\" @click=\"delContactor\">  </el-button>\n          </div>\n        </template>\n      </el-dialog>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ContactorSettings from \"@/components/ContactorSettings.vue\"; // Import the new component\nimport { client, config } from \"@/lib/runtime.js\";\n\nexport default {\n  components: {\n    ContactorSettings, // Register the new component\n  },\n  data() {\n    const currentId = parseInt(this.$route.params.id);\n    const contactor = client.getContactor(currentId);\n\n    const toolCallModes = config.getToolCallModes();\n    const providers = config.getLLMProviders();\n    const safetyParams = config.getSafetySettingsParams();\n    const safetySimpleValue = Object.keys(safetyParams).map((key) => ({\n      value: key,\n      label: key,\n    }));\n\n    // Initial construction of allLLMTools remains here as it depends on global config\n    const allLLMTools = [];\n    for (const key in config.llmTools) {\n      const toolsObject = config.llmTools[key];\n      const toolsList = Object.keys(toolsObject).map((toolKey) => ({\n        enabled: false, // Initial state, child component will sync with options\n        ...toolsObject[toolKey],\n      }));\n      allLLMTools.push({\n        name: key,\n        tools: toolsList,\n        collapsed: true,\n      });\n    }\n    const avatarPolicyList = [\n      { value: 0, label: \"\" },\n      { value: 1, label: \"\" },\n    ];\n    const namePolicyList = [\n      { value: 0, label: \"\" },\n      { value: 1, label: \"\" },\n      { value: 2, label: \"\" },\n    ];\n\n    return {\n      activeContactor: contactor,\n      options: null, // Will be initialized in initContactor\n      currentDelay: 0,\n      centerDialogVisible: false,\n      avatarPolicyList: avatarPolicyList,\n      namePolicyList: namePolicyList,\n      isOnebot: contactor.platform === \"onebot\",\n\n      // Static config passed as props\n      llmProviders: providers,\n      toolCallModes: toolCallModes,\n      safetyParams: safetyParams,\n      safetySimpleValue: safetySimpleValue,\n      allLLMTools: allLLMTools, // This structure is passed to child\n      basicInfo: null,\n    };\n  },\n  computed: {\n    getDelayStatus() {\n      return this.currentDelay > 1000\n        ? \"high\"\n        : this.currentDelay > 500\n          ? \"mid\"\n          : this.currentDelay > 100\n            ? \"low\"\n            : \"ultra\";\n    },\n    getAvatarPolicyValue() {\n      return this.basicInfo.avatarPolicy === 1 ? \"\" : \"\";\n    },\n  },\n  watch: {\n    \"$route.params.id\"(newVal) {\n      const newId = parseInt(newVal);\n      this.activeContactor = client.getContactor(newId);\n      if (this.activeContactor) {\n        this.isOnebot = this.activeContactor.platform === \"onebot\";\n      }\n      this.initContactor();\n    },\n    options: {\n      handler(newOptions) {\n        if (newOptions && this.activeContactor) {\n          // Sync back to the source of truth\n          this.activeContactor.options = JSON.parse(JSON.stringify(newOptions));\n          client.setLocalStorage();\n        }\n      },\n      deep: true,\n    },\n    basicInfo: {\n      handler(newInfo) {\n        if (newInfo && this.activeContactor) {\n          // Sync back to the source of truth\n          this.activeContactor.name = newInfo.name;\n          this.activeContactor.avatar = newInfo.avatar;\n          this.activeContactor.namePolicy = newInfo.namePolicy;\n          this.activeContactor.avatarPolicy = newInfo.avatarPolicy;\n          this.activeContactor.priority = newInfo.priority ? 0 : 1;\n          client.setLocalStorage();\n        }\n      },\n      deep: true,\n    },\n  },\n  created() {\n    // Use created instead of beforeMount for data initialization\n    this.initContactor();\n  },\n  mounted() {\n    this.delayInterval = setInterval(() => {\n      this.currentDelay = client.socket.delay;\n    }, 3000);\n  },\n  beforeUnmount() {\n    if (this.delayInterval) {\n      clearInterval(this.delayInterval);\n    }\n  },\n  methods: {\n    initContactor() {\n      // Deep clone options to avoid direct mutation of contactor's options by child\n      // The watcher on `this.options` will handle persisting changes.\n      this.options = JSON.parse(JSON.stringify(this.activeContactor.options));\n\n      const { name, avatar, namePolicy, avatarPolicy, priority } =\n        this.activeContactor;\n      this.basicInfo = {\n        name,\n        avatar,\n        namePolicy,\n        avatarPolicy,\n        priority: priority === 1 ? false : true,\n      };\n\n      // If contactor platform is onebot, tool call related options might need to be forced\n      if (this.activeContactor.platform === \"onebot\") {\n        if (this.options.toolCallSettings) {\n          this.options.toolCallSettings.mode = \"none\";\n          this.options.toolCallSettings.tools = [];\n        }\n      }\n      // The child component `ContactorSettings` will use this.options\n      // to initialize its internal state.\n    },\n    handleUpdateOpenaiPresets(presets) {\n      if (this.options && this.options.presetSettings) {\n        this.options.presetSettings.history = presets;\n        // The watcher on `this.options` will trigger saving\n        this.$message({\n          message: \"\",\n          type: \"success\",\n        });\n      }\n    },\n    async delContactor() {\n      this.centerDialogVisible = false;\n      await client.rmContactor(this.activeContactor.id);\n      this.$router.push(\"/\");\n    },\n    handleProviderSwitched() {\n      // This event is specifically for actions parent needs to take,\n      // like reloading avatar, that are outside the 'options' object.\n      this.activeContactor.loadAvatar();\n      // The options object (including provider and default model)\n      // would have already been updated by the child component via v-model.\n    },\n\n    updateContactorName() {\n      if (this.basicInfo.namePolicy === 0) {\n        this.basicInfo.name = this.activeContactor.options.base.model;\n      }\n    },\n    updateContactorAvatar() {\n      const { avatarPolicy } = this.basicInfo;\n      this.activeContactor.avatarPolicy = avatarPolicy;\n      this.basicInfo.avatar = this.activeContactor.loadAvatar();\n    }\n  },\n};\n</script>\n\n<style>\n/* Copied from parent for .settings-block, .block-title etc. */\n.block-title {\n  font-size: 0.8rem;\n}\n.block-content {\n  margin-top: 0.5rem;\n  margin-bottom: 1rem;\n  width: 100%;\n  display: flex;\n  background-color: #fff;\n  min-height: 1rem;\n  border-radius: 0.5rem;\n  flex-direction: column;\n}\n.block-content:last-child {\n  margin-bottom: 2rem;\n}\n.block-content-item {\n  max-height: 50rem; /* Ensure this is sufficient for PresetsList */\n  overflow-y: auto;\n  transition: max-height 0.5s ease;\n  position: relative;\n  display: flex;\n  width: 100%;\n  justify-content: space-between;\n  flex-wrap: nowrap;\n}\n.block-content-item.parent-item {\n  flex-wrap: wrap;\n}\n.child-item {\n  width: calc(100% - 1rem);\n  padding-left: 1rem;\n}\n.item-hidden-content {\n  width: 100%;\n}\n/* Styles specific to settings can be moved here or kept in parent if generic enough */\n.settings-container {\n  width: 100%;\n}\n.base-info-provider {\n  /* Copied from parent, ensure it's styled correctly in context */\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  padding-right: 2rem;\n  margin-bottom: 1rem; /* Added margin for spacing */\n}\n\n.plugin-tools-container {\n  max-height: 20rem;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n}\n.block-content-item::after {\n  content: \"\";\n  position: absolute;\n  bottom: 0;\n  left: 5%;\n  width: 90%;\n  height: 1px;\n  background-color: rgba(145, 145, 145, 0.155);\n}\n.item-title {\n  font-size: 0.8rem;\n  margin-left: 1rem;\n  height: 2.5rem;\n  display: flex;\n  flex-grow: 1;\n  align-items: center;\n  justify-content: flex-start;\n  max-width: calc(100% - 5rem);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.item-content {\n  transform: scale(0.9);\n  flex-basis: 2rem;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  margin-right: 1.5rem;\n}\n.item-content .el-input-number,\n.item-content .el-input,\n.item-content .el-slider,\n.item-content .el-select {\n  width: 10rem;\n}\n.sub-items {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  padding-left: 0; /* Reset ul default padding */\n  list-style: none; /* Reset ul default list-style */\n}\n.extra-info-button.active {\n  transform: rotate(-90deg);\n}\n.item-content button {\n  background-color: transparent;\n  border: none; /* Ensure button is clean */\n  cursor: pointer; /* Add cursor pointer */\n  transition: transform 0.3s ease;\n}\n.block-content-item.hidden {\n  /* This style seems unused, but keeping for now */\n  min-height: 0px;\n  max-height: 0px;\n}\n/*  - Kept in parent as it's a general utility transition */\n.expand-slide-enter-active,\n.expand-slide-leave-active {\n  transition:\n    max-height 0.4s cubic-bezier(0.78, 0.14, 0.15, 0.86),\n    opacity 0.4s;\n}\n.expand-slide-enter-from,\n.expand-slide-leave-to {\n  max-height: 0;\n  opacity: 0;\n}\n.expand-slide-enter-to,\n.expand-slide-leave-from {\n  max-height: 20rem; /* Adjust if necessary for PresetsList or other content */\n  opacity: 1;\n}\n</style>\n\n<style scoped>\n/* Styles from original component that are general layout */\n#profile {\n  position: relative;\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n}\n/* .sub-items and other specific styles are now in ContactorSettings.vue or can be if specific to it */\n/* Keep .base-info-provider here if it's also used for other things, or move if only for provider select */\n/* Moved to child: .base-info-provider */\n\n.profile-container {\n  overflow-y: auto;\n  margin: 2rem 0rem 0rem 0rem;\n  width: calc(100% - 8rem);\n  min-width: 20rem;\n  max-width: 40rem;\n  display: flex;\n  flex-direction: column;\n}\n.base-info {\n  background-color: #fff;\n  border-radius: 0.5rem;\n  display: flex;\n  padding-bottom: 1rem;\n  border-bottom: 1px solid #88888888;\n  flex-wrap: wrap;\n  margin-bottom: 2rem; /* This was on base-info, now applies before info-blocks */\n}\n.base-info-avatar {\n  margin-top: 1rem;\n  margin-left: 1rem;\n  flex-basis: 5.5rem;\n  height: 5.5rem;\n}\n.base-info-avatar .el-image {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n}\n.base-info-content {\n  margin-left: 1.5rem;\n  margin-top: 1rem;\n  display: flex;\n  flex-direction: column;\n}\n.base-info-content .name {\n  font-size: 1.25rem;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 15rem;\n}\n.base-info-content .id {\n  margin-top: 0.25rem;\n  font-size: 0.75rem;\n  color: dimgrey;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 15rem;\n}\n.base-info-content .status {\n  margin-top: 0.25rem;\n}\n.info-blocks {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n.action-bar {\n  position: sticky;\n  background-color: #f2f2f2;\n  bottom: 0px;\n  left: 0px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  height: 6rem;\n  width: 100%;\n  z-index: 2;\n}\n.profile-body {\n  position: relative;\n  overflow-y: auto;\n  flex-grow: 1;\n  background-color: #f2f2f2;\n}\n</style>\n\n<style scoped lang=\"sass\">\n/* SASS styles remain in parent */\n.delay-status\n  display: inline-block\n  width: 1rem\n  height: 1rem\n  border-radius: 50%\n  transform: translateY(.25rem)\n  margin-right: .25rem\n  &:hover + .delay-num\n    display: inline-block\n  &.ultra\n    background-color: rgb(53, 233, 146)\n  &.low\n    background-color: rgb(255, 204, 0)\n  &.mid\n    background-color: rgb(255, 102, 102)\n  &.high\n    background-color: #ccc\n</style>\n","import { client } from '@/lib/runtime.js'\nimport { randomString } from '@/utils/generate.js'\nimport { onMounted, onUnmounted, ref } from 'vue'\n\nexport function useLogViewer() {\n  // \n  const logs = ref([])\n  const isSubscribed = ref(false)\n  const stats = ref(null)\n  \n  // \n  const socket = ref(client.socket)\n  const isConnected = ref(client.isConnected)\n  \n  const pendingRequests = new Map()\n\n  // \n  let logMessageHandler = null\n\n  // \n  const handleLogMessage = (data) => {\n    console.log(':', data)\n    const { request_id, type } = data\n\n    // ID\n    if (request_id) {\n      console.log('request_id:', request_id, ':', Array.from(pendingRequests.keys()))\n      \n      if (pendingRequests.has(request_id)) {\n        const resolver = pendingRequests.get(request_id)\n        pendingRequests.delete(request_id)\n        console.log(':', type)\n        \n        // \n        if (type === 'subscribe' && data.success) {\n          isSubscribed.value = true\n          console.log('')\n        } else if (type === 'unsubscribe' && data.success) {\n          isSubscribed.value = false\n          console.log('')\n        }\n        \n        resolver(data)\n        return\n      } else {\n        console.warn('request_id:', request_id, ':', type)\n      }\n    }\n\n    // \n    switch (type) {\n      case 'SUBSCRIBED':\n        isSubscribed.value = true\n        console.log(':', data.data)\n        break\n        \n      case 'UNSUBSCRIBED':\n        isSubscribed.value = false\n        console.warn(' ')\n        console.log(':', data)\n        break\n        \n      case 'stream':\n        console.log(':', data.data)\n        addLog(data.data)\n        break\n        \n      case 'LOG_STATS':\n        // \n        console.log(':', data.data)\n        if (data.success) {\n          stats.value = data.data\n        }\n        break\n        \n      case 'ERROR':\n        console.error('API:', data.error)\n        break\n        \n      default:\n        console.log(':', type, data)\n    }\n  }\n\n  // \n  const initLogListener = () => {\n    if (!socket.value || !socket.value.socket) {\n      console.log('Socket ...')\n      return\n    }\n\n    // \n    cleanupLogListener()\n\n    // \n    logMessageHandler = (message) => {\n      try {\n        const data = JSON.parse(message)\n        if (data.protocol === 'logs') {\n          console.log(':', data)\n          handleLogMessage(data)\n        }\n      } catch (error) {\n        console.error(':', error)\n      }\n    }\n\n    // \n    socket.value.socket.on('message', logMessageHandler)\n    console.log('')\n  }\n\n  // \n  const cleanupLogListener = () => {\n    if (socket.value && socket.value.socket && logMessageHandler) {\n      socket.value.socket.off('message', logMessageHandler)\n      console.log('')\n    }\n    logMessageHandler = null\n  }\n\n  // \n  const sendRequest = (type, data) => {\n    return new Promise((resolve, reject) => {\n      console.log(':', type, data)\n      console.log(':', isConnected.value)\n      console.log(' socket:', socket.value)\n      \n      // \n      if (!socket.value || !isConnected.value) {\n        console.warn('')\n        \n        // \n        setTimeout(() => {\n          if (type === 'subscribe') {\n            resolve({\n              success: true,\n              data: { message: '' }\n            })\n          } else if (type === 'unsubscribe') {\n            resolve({\n              success: true,\n              data: { message: '' }\n            })\n          } else {\n            resolve({\n              success: true,\n              data: { message: ` ${type} ` }\n            })\n          }\n        }, 500) // \n        return\n      }\n\n      const requestId = randomString(16)\n      pendingRequests.set(requestId, resolve)\n\n      // \n      setTimeout(() => {\n        if (pendingRequests.has(requestId)) {\n          pendingRequests.delete(requestId)\n          const error = new Error('')\n          console.error(':', requestId, type)\n          reject(error)\n        }\n      }, 30000)\n\n      const message = {\n        request_id: requestId,\n        protocol: 'logs',\n        type,\n        data\n      }\n\n      console.log(':', message)\n      socket.value.sendMessage(message)\n    })\n  }\n\n  // \n  const addLog = (log) => {\n    logs.value.push(log)\n    \n    // \n    if (logs.value.length > 2000) {\n      logs.value.splice(0, logs.value.length - 2000)\n    }\n  }\n\n  // \n  const subscribe = async (options = {}) => {\n    const defaultOptions = {\n      level: 'INFO',\n      modules: [],\n      realtime: true,\n      bufferSize: 1000,\n      sendHistory: true\n    }\n\n    try {\n      const response = await sendRequest('subscribe', { ...defaultOptions, ...options })\n      \n      // \n      if (response.success && (!socket.value || !isConnected.value)) {\n        isSubscribed.value = true\n        startMockLogStream()\n      }\n      //  handleLogMessage \n      \n      return response\n    } catch (error) {\n      console.error(':', error)\n      throw error\n    }\n  }\n\n  // \n  let mockLogInterval = null\n  \n  const startMockLogStream = () => {\n    console.log('')\n    let counter = 1\n    \n    mockLogInterval = setInterval(() => {\n      const mockLog = {\n        id: `mock_stream_${counter}`,\n        timestamp: new Date().toISOString(),\n        level: ['INFO', 'WARN', 'ERROR', 'DEBUG'][Math.floor(Math.random() * 4)],\n        module: ['llm', 'onebot', 'system'][Math.floor(Math.random() * 3)],\n        message: ` #${counter}`,\n        caller: `mock.js:${Math.floor(Math.random() * 100)}`,\n        ip: '127.0.0.1'\n      }\n      \n      addLog(mockLog)\n      counter++\n    }, 2000) // 2\n  }\n  \n  const stopMockLogStream = () => {\n    if (mockLogInterval) {\n      clearInterval(mockLogInterval)\n      mockLogInterval = null\n      console.log('')\n    }\n  }\n\n  // \n  const unsubscribe = async () => {\n    try {\n      const response = await sendRequest('unsubscribe', {})\n      \n      // \n      if (response.success && (!socket.value || !isConnected.value)) {\n        isSubscribed.value = false\n        stopMockLogStream()\n      }\n      //  handleLogMessage \n      \n      return response\n    } catch (error) {\n      console.error(':', error)\n      throw error\n    }\n  }\n\n  // \n  const search = async (query) => {\n    const response = await sendRequest('search', query)\n    return response\n  }\n\n  // \n  const exportLogs = async (options) => {\n    const response = await sendRequest('export', options)\n    return response\n  }\n\n\n\n  // \n  const updateConfig = async (type, value) => {\n    const response = await sendRequest('config', { type, value })\n    return response\n  }\n\n  // \n  const getStats = async () => {\n    try {\n      const response = await sendRequest('stats', {})\n      if (response.success) {\n        stats.value = response.data\n      }\n      return response\n    } catch (error) {\n      console.error(':', error)\n      return { success: false, error }\n    }\n  }\n\n  // \n  const clearLogs = () => {\n    logs.value = []\n  }\n\n\n\n  //  client socket \n  const setupSocketListeners = () => {\n    if (!client.socket) {\n      console.log('Client socket ')\n      return null\n    }\n    \n    // \n    const onConnect = (info) => {\n      console.log('Socket :', info)\n      isConnected.value = true\n      socket.value = client.socket\n      setTimeout(() => {\n        initLogListener()\n        // \n        if (isSubscribed.value) {\n          console.log('')\n          autoSubscribe()\n        }\n      }, 100)\n    }\n    \n    // \n    const onDisconnect = (reason) => {\n      console.warn('Socket :', reason)\n      isConnected.value = false\n      cleanupLogListener()\n      //  isSubscribed \n    }\n    \n    // \n    const onConnectError = (error) => {\n      console.log('Socket :', error)\n      isConnected.value = false\n      cleanupLogListener()\n    }\n    \n    //  client.socket\n    client.socket.on('connect', onConnect)\n    client.socket.on('disconnect', onDisconnect)\n    client.socket.on('connect_error', onConnectError)\n    \n    // \n    return () => {\n      if (client.socket) {\n        client.socket.off('connect', onConnect)\n        client.socket.off('disconnect', onDisconnect)\n        client.socket.off('connect_error', onConnectError)\n      }\n    }\n  }\n\n  // \n  const setupStatusPolling = () => {\n    let lastSocketId = socket.value ? socket.value.id : null\n    \n    const checkStatus = () => {\n      const currentConnected = client.isConnected\n      const currentSocket = client.socket\n      const currentSocketId = currentSocket ? currentSocket.id : null\n      \n      // \n      if (currentConnected !== isConnected.value) {\n        console.log(':', isConnected.value, '->', currentConnected)\n        isConnected.value = currentConnected\n        \n        if (currentConnected && currentSocket) {\n          socket.value = currentSocket\n          lastSocketId = currentSocketId\n          initLogListener()\n        } else {\n          socket.value = null\n          lastSocketId = null\n          cleanupLogListener()\n        }\n      }\n      \n      //  socket  ID \n      if (currentSocketId !== lastSocketId) {\n        console.log(' socket :', lastSocketId, '->', currentSocketId)\n        socket.value = currentSocket\n        lastSocketId = currentSocketId\n        \n        if (currentConnected && currentSocket) {\n          initLogListener()\n        } else {\n          cleanupLogListener()\n        }\n      }\n    }\n    \n    // 2\n    const interval = setInterval(checkStatus, 2000)\n    \n    return () => {\n      clearInterval(interval)\n    }\n  }\n\n\n\n  // \n  let cleanupSocketListeners = null\n  let cleanupStatusPolling = null\n\n  // \n  const autoSubscribe = async () => {\n    try {\n      console.log('...')\n      await subscribe({\n        level: 'INFO',\n        modules: [],\n        realtime: true,\n        bufferSize: 1000,\n        sendHistory: true\n      })\n      console.log('')\n    } catch (error) {\n      console.error(':', error)\n      // \n      if (!socket.value || !isConnected.value) {\n        console.log('')\n        isSubscribed.value = true\n        startMockLogStream()\n      }\n    }\n  }\n\n  // \n  const manualInit = () => {\n    console.log('LogViewer ')\n    console.log('Client :', client.isConnected)\n    console.log('Client  socket:', client.socket)\n    console.log('Client socket :', !!client.socket)\n    \n    // \n    isConnected.value = client.isConnected\n    socket.value = client.socket\n    \n    console.log('LogViewer :', isConnected.value)\n    \n    //  socket \n    cleanupSocketListeners = setupSocketListeners()\n    \n    // \n    cleanupStatusPolling = setupStatusPolling()\n    \n    // \n    if (isConnected.value && socket.value) {\n      console.log('')\n      initLogListener()\n    } else {\n      console.log('')\n    }\n    \n    // \n    setTimeout(() => {\n      console.log(':', isConnected.value)\n      autoSubscribe()\n    }, 2000)\n  }\n\n  // \n  onMounted(() => {\n    console.log('LogViewer ')\n    console.log('Client :', client.isConnected)\n    console.log('Client  socket:', client.socket)\n    \n    // \n    isConnected.value = client.isConnected\n    socket.value = client.socket\n    \n    //  socket \n    cleanupSocketListeners = setupSocketListeners()\n    \n    // \n    cleanupStatusPolling = setupStatusPolling()\n    \n    // \n    if (isConnected.value && socket.value) {\n      initLogListener()\n    }\n    \n\n    \n    // \n    setTimeout(() => {\n      autoSubscribe()\n    }, 2000)\n  })\n\n  // \n  onUnmounted(async () => {\n    // \n    if (isSubscribed.value && (socket.value && isConnected.value)) {\n      try {\n        console.log('')\n        await unsubscribe()\n      } catch (error) {\n        console.error(':', error)\n      }\n    }\n    \n    // \n    cleanupLogListener()\n    \n    // \n    stopMockLogStream()\n    \n    //  socket \n    if (cleanupSocketListeners) {\n      cleanupSocketListeners()\n    }\n    \n    // \n    if (cleanupStatusPolling) {\n      cleanupStatusPolling()\n    }\n    \n    // \n    pendingRequests.clear()\n  })\n\n  return {\n    // \n    logs,\n    isConnected,\n    stats,\n    \n    // \n    search,\n    exportLogs,\n    updateConfig,\n    getStats,\n    clearLogs,\n    subscribe,\n    unsubscribe,\n    manualInit\n  }\n}","import { useLogViewer } from '@/composables/useLogViewer'\nimport { defineStore } from 'pinia'\nimport { computed, ref } from 'vue'\n\n// logViewer\nlet globalLogViewer = null\n\nexport const useLogStore = defineStore('log', () => {\n  // \n  const isInitialized = ref(false)\n  // logViewer\n  const logs = ref([])\n  const isConnected = ref(false)\n  const stats = ref(null)\n  \n  console.log('logStore:', isInitialized.value)\n  \n  // \n  const totalLogsCount = computed(() => {\n    return logs.value.length\n  })\n  \n  // logViewerstore\n  const syncLogViewerState = () => {\n    if (globalLogViewer) {\n      // \n      logs.value = globalLogViewer.logs.value\n      isConnected.value = globalLogViewer.isConnected.value\n      stats.value = globalLogViewer.stats.value\n      console.log('logViewer - :', isConnected.value, ':', logs.value.length)\n    }\n  }\n\n  // \n  const initialize = async () => {\n    if (isInitialized.value && globalLogViewer) {\n      console.log('store:', logs.value.length)\n      syncLogViewerState() // \n      return\n    }\n    \n    try {\n      console.log('store...')\n      // useLogViewerstore\n      if (!globalLogViewer) {\n        globalLogViewer = useLogViewer()\n        console.log('storelogViewer')\n        \n        // logViewercomposableonMounted\n        globalLogViewer.manualInit()\n        \n        // \n        setInterval(syncLogViewerState, 1000) // \n      }\n      isInitialized.value = true\n      syncLogViewerState() // \n      console.log('store:', logs.value.length)\n    } catch (error) {\n      console.error('store:', error)\n      throw error\n    }\n  }\n  \n  const clearLogs = () => {\n    if (globalLogViewer) {\n      globalLogViewer.clearLogs()\n    }\n  }\n  \n  const getStats = async () => {\n    if (globalLogViewer) {\n      return await globalLogViewer.getStats()\n    }\n    return { success: false, error: 'LogViewer not initialized' }\n  }\n  \n  const search = async (query) => {\n    if (globalLogViewer) {\n      return await globalLogViewer.search(query)\n    }\n    return { success: false, error: 'LogViewer not initialized' }\n  }\n  \n  const exportLogs = async (options) => {\n    if (globalLogViewer) {\n      return await globalLogViewer.exportLogs(options)\n    }\n    return { success: false, error: 'LogViewer not initialized' }\n  }\n  \n  const subscribe = async (options) => {\n    if (globalLogViewer) {\n      return await globalLogViewer.subscribe(options)\n    }\n    return { success: false, error: 'LogViewer not initialized' }\n  }\n  \n  const unsubscribe = async () => {\n    if (globalLogViewer) {\n      return await globalLogViewer.unsubscribe()\n    }\n    return { success: false, error: 'LogViewer not initialized' }\n  }\n  \n  return {\n    // \n    isInitialized,\n    logs,\n    isConnected,\n    stats,\n    \n    // \n    totalLogsCount,\n    \n    // \n    initialize,\n    clearLogs,\n    getStats,\n    search,\n    exportLogs,\n    subscribe,\n    unsubscribe,\n    syncLogViewerState\n  }\n})","<template>\n  <div id=\"settings-view\" :class=\"{ 'mobile-layout': isMobile }\">\n    <!--  -->\n    <div v-if=\"isMobile\" class=\"mobile-header\" :class=\"{ 'sub-page': isInSubPage(), 'main-page': !isInSubPage() }\">\n      <div class=\"mobile-header-content\" :class=\"{ 'sub-page': isInSubPage() }\">\n        <button class=\"back-button\" @click=\"handleBackToHome\" :title=\"getBackButtonTitle()\">\n          <!--  -->\n          <svg v-if=\"isInSubPage()\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\">\n            <path d=\"M19 12H5M12 19l-7-7 7-7\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          </svg>\n          <!--  -->\n          <svg v-else width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\">\n            <path d=\"M18 6L6 18M6 6l12 12\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n          </svg>\n        </button>\n        <h1 class=\"mobile-title\">{{ getMobileTitle() }}</h1>\n        <button v-if=\"showMobileMenu\" class=\"menu-button\" @click=\"toggleMobileMenu\">\n          <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\">\n            <path d=\"M3 12h18M3 6h18M3 18h18\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n          </svg>\n        </button>\n      </div>\n    </div>\n\n    <!--  -->\n    <el-alert\n      v-if=\"configStore.needRestart\"\n      type=\"warning\"\n      :closable=\"false\"\n      show-icon\n      class=\"restart-banner\"\n      :class=\"{ 'mobile': isMobile }\"\n    >\n      <template #title>\n        <div class=\"restart-banner-content\">\n          <span>{{ isMobile ? '' : '' }}</span>\n          <el-button\n            type=\"warning\"\n            :size=\"isMobile ? 'small' : 'small'\"\n            @click=\"handleRestartService\"\n          >\n            \n          </el-button>\n        </div>\n      </template>\n    </el-alert>\n\n    <!--  -->\n    <div v-if=\"isMobile\" class=\"mobile-menu-overlay\" :class=\"{ 'show': mobileMenuVisible }\" @click=\"closeMobileMenu\">\n      <div class=\"mobile-menu-drawer\" :class=\"{ 'show': mobileMenuVisible }\" @click.stop>\n        <div class=\"mobile-menu-header\">\n          <h2></h2>\n          <button class=\"close-button\" @click=\"closeMobileMenu\">\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\">\n              <path d=\"M18 6L6 18M6 6l12 12\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n            </svg>\n          </button>\n        </div>\n        <div class=\"mobile-menu-content\">\n          <div\n            v-for=\"item in menuItems\"\n            :key=\"item.index\"\n            class=\"mobile-menu-item\"\n            :class=\"{ 'active': activeMenu === item.index }\"\n            @click=\"handleMobileMenuSelect(item.index)\"\n          >\n            <component :is=\"item.icon\" class=\"menu-icon\" />\n            <span>{{ item.label }}</span>\n          </div>\n          \n          <!--  -->\n          <div class=\"mobile-quick-actions\">\n            <div class=\"quick-action-item\" @click=\"handleReset\">\n              <span></span>\n            </div>\n            <div class=\"quick-action-item\" @click=\"handleResetCache\">\n              <span></span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!--  -->\n    <div class=\"settings-container\" :class=\"{ 'mobile': isMobile }\">\n      <!--  -  -->\n      <aside v-if=\"!isMobile\" class=\"settings-sidebar\">\n        <el-menu\n          :default-active=\"activeMenu\"\n          class=\"settings-menu\"\n          @select=\"handleMenuSelect\"\n        >\n          <el-menu-item\n            v-for=\"item in menuItems\"\n            :key=\"item.index\"\n            :index=\"item.index\"\n          >\n            <el-icon><component :is=\"item.icon\" /></el-icon>\n            <span>{{ item.label }}</span>\n          </el-menu-item>\n        </el-menu>\n\n        <!--  -->\n        <div class=\"quick-actions\">\n          <el-button type=\"info\" plain @click=\"handleReset\" style=\"width: 100%\">\n            \n          </el-button>\n          <el-button type=\"info\" plain @click=\"handleResetCache\" style=\"width: 100%\">\n            \n          </el-button>\n        </div>\n      </aside>\n\n      <!--  -->\n      <main class=\"settings-content\" :class=\"{ 'mobile': isMobile }\">\n        <!--  -->\n        <div class=\"content-header-spacer\"></div>\n        \n        <template v-if=\"forbidden\">\n          <div class=\"forbidden-container\" :class=\"{ 'mobile': isMobile }\">\n            <el-result\n              icon=\"error\"\n              title=\"\"\n              sub-title=\"\"\n            >\n              <template #extra>\n                <el-button type=\"primary\" @click=\"handleSwitchAccount\"></el-button>\n                <el-button @click=\"handleReturnHome\"></el-button>\n              </template>\n            </el-result>\n          </div>\n        </template>\n        <template v-else>\n          <ErrorBoundary\n            fallback-title=\"\"\n            fallback-message=\"\"\n          >\n            <router-view v-slot=\"{ Component }\">\n              <transition name=\"page-fade\" mode=\"out-in\">\n                <component :is=\"Component\" />\n              </transition>\n            </router-view>\n          </ErrorBoundary>\n        </template>\n      </main>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport ErrorBoundary from '@/components/settings/ErrorBoundary.vue';\nimport { client } from '@/lib/runtime.js';\nimport { useConfigStore } from '@/stores/configStore.js';\nimport { useLogStore } from '@/stores/logStore.js';\nimport {\n  ChatDotRound,\n  ChromeFilled,\n  Connection,\n  Document,\n  Grid,\n  Menu,\n  Monitor\n} from '@element-plus/icons-vue';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nimport { computed, onMounted, onUnmounted, ref } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\n\nconst route = useRoute();\nconst router = useRouter();\nconst configStore = useConfigStore();\nconst logStore = useLogStore();\nconst forbidden = ref(false);\n\n// \nconst isMobile = ref(false);\nconst mobileMenuVisible = ref(false);\n\n// \nconst showMobileMenu = computed(() => {\n  // \n  return route.path === '/settings';\n});\n\n// \nconst menuItems = [\n  { index: 'overview', label: '', icon: Menu },\n  { index: 'llm-adapters', label: 'LLM ', icon: Connection },\n  { index: 'server', label: '', icon: Monitor },\n  { index: 'web', label: 'Web ', icon: ChromeFilled },\n  { index: 'onebot', label: 'OneBot ', icon: ChatDotRound },\n  { index: 'plugins', label: '', icon: Grid },\n  { index: 'presets', label: '', icon: Document },\n  { index: 'logs', label: '', icon: Document }\n];\n\n//  admin_code  /auth\nconst handleSwitchAccount = () => {\n  configStore.clearAdminCode();\n  router.push({ path: '/auth', query: { redirect: route.fullPath || route.path } });\n};\n\n// \nconst handleReturnHome = () => {\n  router.push('/');\n};\n\n// \nconst checkMobile = () => {\n  isMobile.value = window.innerWidth <= 768;\n};\n\n// \nconst activeMenu = computed(() => {\n  const path = route.path;\n  if (path.includes('llm-adapters')) return 'llm-adapters';\n  if (path.includes('server')) return 'server';\n  if (path.includes('web')) return 'web';\n  if (path.includes('onebot')) return 'onebot';\n  if (path.includes('plugins')) return 'plugins';\n  if (path.includes('presets')) return 'presets';\n  if (path.includes('logs')) return 'logs';\n  return 'overview';\n});\n\n// \nconst isInSubPage = () => {\n  const currentPath = route.path;\n  return currentPath !== '/settings' && currentPath.startsWith('/settings/');\n};\n\n// \nconst getBackButtonTitle = () => {\n  return isInSubPage() ? '' : '';\n};\n\n// \nconst getMobileTitle = () => {\n  const currentPath = route.path;\n  \n  // \"\"\n  if (currentPath === '/settings') {\n    return '';\n  }\n  \n  // \n  const currentItem = menuItems.find(item => item.index === activeMenu.value);\n  return currentItem ? currentItem.label : '';\n};\n\n// \nconst toggleMobileMenu = () => {\n  mobileMenuVisible.value = !mobileMenuVisible.value;\n};\n\nconst closeMobileMenu = () => {\n  mobileMenuVisible.value = false;\n};\n\nconst handleMobileMenuSelect = (index) => {\n  handleMenuSelect(index);\n  closeMobileMenu();\n};\n\nconst handleBackToHome = () => {\n  // \n  const currentPath = route.path;\n  \n  // \n  if (currentPath !== '/settings' && currentPath.startsWith('/settings/')) {\n    router.push('/settings');\n  } else {\n    // \n    router.push('/');\n  }\n};\n\n// \nconst handleMenuSelect = (index) => {\n  if (index === 'overview') {\n    router.push('/settings');\n  } else {\n    router.push(`/settings/${index}`);\n  }\n};\n\n// \nconst handleRestartService = async () => {\n  try {\n    await ElMessageBox.confirm(\n      '',\n      '',\n      {\n        confirmButtonText: '',\n        cancelButtonText: '',\n        type: 'warning'\n      }\n    );\n\n    ElMessage.info('');\n    // TODO:  API\n    // await configAPI.restartService();\n  } catch (error) {\n    // \n  }\n};\n\n// \nconst handleReset = async () => {\n  try {\n    await ElMessageBox.confirm(\n      '',\n      '',\n      {\n        confirmButtonText: '',\n        cancelButtonText: '',\n        type: 'warning'\n      }\n    );\n\n    const result = await client.reset();\n    if (result) {\n      ElMessage.success('');\n      setTimeout(() => {\n        window.location.reload();\n      }, 500);\n    }\n  } catch (error) {\n    if (error !== 'cancel') {\n      ElMessage.error('' + error.message);\n    }\n  }\n};\n\n// \nconst handleResetCache = async () => {\n  try {\n    await ElMessageBox.confirm(\n      '',\n      '',\n      {\n        confirmButtonText: '',\n        cancelButtonText: '',\n        type: 'warning'\n      }\n    );\n\n    await client.resetCache();\n    ElMessage.success('');\n    setTimeout(() => {\n      window.location.reload();\n    }, 500);\n  } catch (error) {\n    if (error !== 'cancel') {\n      ElMessage.error('' + error.message);\n    }\n  }\n};\n\n// \nonMounted(async () => {\n  // \n  checkMobile();\n  window.addEventListener('resize', checkMobile);\n  \n  // \n  try {\n    await logStore.initialize();\n    console.log('');\n  } catch (error) {\n    console.error(':', error);\n  }\n  \n  // \n  if (configStore.isAuthenticated) {\n    try {\n      await configStore.fetchConfig();\n      // \n    } catch (error) {\n      // \n      forbidden.value = true;\n      console.warn('', error);\n    }\n  } else {\n    // \n    forbidden.value = true;\n  }\n});\n\nonUnmounted(() => {\n  window.removeEventListener('resize', checkMobile);\n});\n</script>\n\n<style scoped lang=\"scss\">\n// \n.page-fade-enter-active,\n.page-fade-leave-active {\n  transition: all 0.25s ease;\n}\n\n.page-fade-enter-from {\n  opacity: 0;\n  transform: translateX(10px);\n}\n\n.page-fade-leave-to {\n  opacity: 0;\n  transform: translateX(-10px);\n}\n\n#settings-view {\n  width: calc(100% - 3.8rem);\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  background-color: #f2f3f5; // \n\n  &.mobile-layout {\n    width: 100%;\n    height: 100vh;\n    background-color: #f8f9fa;\n  }\n}\n\n// \n.mobile-header {\n  position: sticky;\n  top: 0;\n  z-index: 100;\n  background-color: #fff;\n  border-bottom: 1px solid #e4e7ed;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);\n}\n\n.mobile-header-content {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px 16px;\n  height: 56px;\n  box-sizing: border-box;\n}\n\n.back-button,\n.menu-button {\n  width: 40px;\n  height: 40px;\n  border: none;\n  background: none;\n  color: #606266;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 8px;\n  transition: background-color 0.2s;\n\n  &:hover {\n    background-color: #f5f7fa;\n  }\n}\n\n.mobile-title {\n  font-size: 18px;\n  font-weight: 600;\n  color: #303133;\n  margin: 0;\n  flex: 1;\n  text-align: center;\n  transition: color 0.2s;\n}\n\n// \n.mobile-menu-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.5);\n  z-index: 9999;\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.3s ease;\n\n  &.show {\n    opacity: 1;\n    visibility: visible;\n  }\n}\n\n.mobile-menu-drawer {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 280px;\n  height: 100%;\n  background-color: #fff;\n  transform: translateX(100%);\n  transition: transform 0.3s ease;\n  display: flex;\n  flex-direction: column;\n\n  &.show {\n    transform: translateX(0);\n  }\n}\n\n.mobile-menu-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 16px 20px;\n  border-bottom: 1px solid #e4e7ed;\n\n  h2 {\n    margin: 0;\n    font-size: 18px;\n    font-weight: 600;\n    color: #303133;\n  }\n}\n\n.close-button {\n  width: 32px;\n  height: 32px;\n  border: none;\n  background: none;\n  color: #909399;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 6px;\n  transition: background-color 0.2s;\n\n  &:hover {\n    background-color: #f5f7fa;\n  }\n}\n\n.mobile-menu-content {\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px 0;\n}\n\n.mobile-menu-item {\n  display: flex;\n  align-items: center;\n  padding: 16px 20px;\n  cursor: pointer;\n  transition: background-color 0.2s;\n  color: #606266;\n\n  &:hover {\n    background-color: #f5f7fa;\n  }\n\n  &.active {\n    background-color: #ecf5ff;\n    color: #409eff;\n    font-weight: 500;\n  }\n\n  .menu-icon {\n    width: 20px;\n    height: 20px;\n    margin-right: 12px;\n  }\n\n  span {\n    font-size: 16px;\n  }\n}\n\n.mobile-quick-actions {\n  border-top: 1px solid #e4e7ed;\n  padding: 8px 0;\n  margin-top: 8px;\n}\n\n.quick-action-item {\n  display: flex;\n  align-items: center;\n  padding: 12px 20px;\n  cursor: pointer;\n  transition: background-color 0.2s;\n  color: #909399;\n  font-size: 14px;\n\n  &:hover {\n    background-color: #f5f7fa;\n  }\n}\n\n.restart-banner {\n  margin: 0;\n  border-radius: 0;\n  border: none;\n  border-bottom: 1px solid #e4e7ed;\n\n  &.mobile {\n    margin: 0;\n    border-radius: 0;\n  }\n\n  :deep(.el-alert__content) {\n    width: 100%;\n  }\n}\n\n.restart-banner-content {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n}\n\n.settings-container {\n  display: flex;\n  flex: 1;\n  overflow: hidden;\n  padding: 16px; // \n  gap: 16px;\n\n  &.mobile {\n    padding: 0;\n    gap: 0;\n    flex-direction: column;\n  }\n}\n\n.settings-sidebar {\n  width: 220px;\n  background: transparent; // \n  border-right: none; // \n  display: flex;\n  flex-direction: column;\n  overflow-y: auto;\n  position: relative;\n  z-index: 30;\n  padding-right: 8px;\n}\n\n.settings-menu {\n  flex: 1;\n  border: none;\n  background: transparent;\n  \n  :deep(.el-menu-item) {\n    height: 50px;\n    line-height: 50px;\n    margin-bottom: 4px;\n    border-radius: 8px; // \n    color: #606266;\n    \n    &:hover {\n      background-color: rgba(0, 0, 0, 0.04);\n    }\n    \n    &.is-active {\n      background-color: #fff; // \n      color: #409eff;\n      font-weight: 600;\n      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04); // \n    }\n\n    .el-icon {\n      font-size: 18px;\n    }\n  }\n}\n\n.quick-actions {\n  padding: 12px 0;\n  border-top: 1px solid rgba(0, 0, 0, 0.05);\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n\n  .el-button {\n    margin: 0;\n    border-radius: 8px;\n    height: 40px;\n    justify-content: flex-start;\n    padding-left: 20px;\n    border: none;\n    background: rgba(255, 255, 255, 0.6);\n    \n    &:hover {\n      background: #fff;\n    }\n  }\n}\n\n.settings-content {\n  flex: 1;\n  overflow-y: auto;\n  background-color: #fff; // \n  border-radius: 16px; // \n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.04); // \n  position: relative;\n  padding: 0; // padding\n\n  &.mobile {\n    border-radius: 0;\n    box-shadow: none;\n    background-color: #f8f9fa;\n  }\n}\n\n.forbidden-container {\n  padding: 40px;\n  max-width: 980px;\n  margin: 0 auto;\n  position: relative;\n  z-index: 10;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &.mobile {\n    padding: 20px;\n    max-width: 100%;\n  }\n}\n\n.content-header-spacer {\n  display: none; // \n}\n</style>\n\n// \n@media (max-width: 768px) {\n  #settings-view {\n    width: 100% !important;\n  }\n\n  .settings-sidebar {\n    display: none !important;\n  }\n\n  .restart-banner-content {\n    flex-direction: column;\n    gap: 8px;\n    align-items: flex-start;\n\n    span {\n      font-size: 14px;\n    }\n  }\n\n  .mobile-header {\n    display: block !important;\n  }\n\n  .settings-container {\n    padding: 0 !important;\n  }\n\n  .settings-content {\n    border-radius: 0 !important;\n    box-shadow: none !important;\n  }\n}\n\n// \n@media (min-width: 769px) {\n  .mobile-header,\n  .mobile-menu-overlay {\n    display: none !important;\n  }\n}\n\n// \n@media (min-width: 769px) and (max-width: 1024px) {\n  .settings-sidebar {\n    width: 180px;\n  }\n\n  .settings-menu {\n    :deep(.el-menu-item) {\n      span {\n        font-size: 14px;\n      }\n    }\n  }\n}\n// \n@media (max-width: 768px) {\n  .mobile-header {\n    // \n    &.sub-page {\n      .mobile-title {\n        color: #409eff;\n      }\n      \n      .back-button {\n        color: #409eff;\n        \n        &:hover {\n          background-color: #ecf5ff;\n        }\n      }\n    }\n    \n    // \n    &.main-page {\n      .back-button {\n        color: #909399;\n        \n        &:hover {\n          background-color: #f5f7fa;\n        }\n      }\n    }\n  }\n  \n  // \n  .mobile-header-content {\n    position: relative;\n    \n    &::after {\n      content: '';\n      position: absolute;\n      bottom: -1px;\n      left: 0;\n      right: 0;\n      height: 2px;\n      background: linear-gradient(90deg, transparent 0%, #409eff 50%, transparent 100%);\n      opacity: 0;\n      transition: opacity 0.3s;\n    }\n    \n    &.sub-page::after {\n      opacity: 1;\n    }\n  }\n}","<template>\n  <div class=\"auth-view\">\n    <div class=\"container\">\n      <div ref=\"iconContainer\" class=\"icon-container\">\n        <i class=\"iconfont ChatGPT\"></i>\n      </div>\n      <h1 class=\"title\"></h1>\n      <p class=\"hint\"></p>\n      <input\n        v-model=\"accessCode\"\n        type=\"password\"\n        placeholder=\"\"\n      />\n      <div class=\"controls\">\n        <button class=\"later\" @click=\"login()\"></button>\n        <button class=\"login\" @click=\"login(accessCode)\"></button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { nextTick, onUnmounted, onMounted, ref } from \"vue\";\nimport router from \"@/router\";\nimport { client } from \"@/lib/runtime.js\";\nimport { ElMessage } from \"element-plus\";\nimport { useConfigStore } from '@/stores/configStore.js';\n\nconst configStore = useConfigStore();\n\nconst accessCode = ref();\nconst requesting = ref(false);\nconst iconContainer = ref();\n\nconst login = async (code) => {\n  console.log(\"login\");\n\n  // \n  await nextTick(() => iconContainer.value.classList.add(\"active\"));\n\n  if (requesting.value) {\n    return;\n  } else {\n    requesting.value = true;\n    try {\n      const result = await client.login(code);\n      if (result) {\n        ElMessage.success(\n          `${result.is_admin ? \"\" : \"\"}!`,\n        );\n\n        //  store localStorage\n        if (code && result.is_admin) {\n          configStore.setAdminCode(code);\n        }\n\n        // urlquery\n        if (router.currentRoute.value.query.redirect) {\n          router.push(router.currentRoute.value.query.redirect);\n        } else {\n          router.push(\"/\");\n        }\n      }\n    } catch (error) {\n      ElMessage.error(error);\n    } finally {\n      // \n      await nextTick(() => iconContainer.value.classList.remove(\"active\"));\n      requesting.value = false;\n    }\n  }\n};\n\n// \nfunction handleEnter(e) {\n  if (e.key === \"Enter\") {\n    login(accessCode.value);\n  }\n}\n\n// unmounted\nonUnmounted(() => {\n  console.log(\"unmounted\");\n  removeEventListener(\"keydown\", handleEnter); // \n});\n\nonMounted(() => {\n  addEventListener(\"keydown\", handleEnter);\n  // querykey\n  if (router.currentRoute.value.query.key) {\n    login(router.currentRoute.value.query.key);\n  }\n});\n</script>\n\n<style lang=\"sass\" scoped>\n$baseColor: #1d93ab\n\n.auth-view\n    background-color: white\n    flex-grow: 1\n    display: grid\n    place-items: center\n\n    .container\n        display: flex\n        flex-direction: column\n        align-items: center\n        width: 50%\n        margin: 0 auto\n        text-align: center\n        animation: fly-into 1s\n\n        @keyframes fly-into\n            from\n                transform: translateX(-150px)\n                opacity: 0\n            to\n                transform: translateX(0)\n                opacity: 1\n\n        .icon-container\n            transition: 1s linear\n\n            .iconfont.ChatGPT\n                font-size: 46px\n                border-radius: 10px\n\n            &.active\n                transform: rotate(180deg)\n                color: $baseColor\n\n        .title\n            white-space: nowrap\n            font-size: 50px\n            letter-spacing: 5px\n            color: black\n            margin: 25px\n\n        .hint\n            font-size: 15px\n            font-weight: 300\n\n        input\n            margin-top: 30px\n            border: 2px solid $baseColor\n            border-radius: 12px\n            width: 250px\n            height: 40px\n            padding: 0 10px\n            text-align: center\n            letter-spacing: 1px\n\n            &:focus\n                outline: 1px solid $baseColor\n\n                &::placeholder\n                    color: transparent\n\n            &::placeholder\n                text-align: center\n\n        .controls\n            display: flex\n            flex-direction: column\n            align-items: center\n\n            button\n                width: 10rem\n                margin-top: 20px\n                padding: 10px 15px\n                border-radius: 8px\n\n                &:hover\n                    box-shadow: 0 0 2px black\n\n            .later\n                background: transparent\n\n            .login\n                color: white\n                background: $baseColor\n</style>\n","/**\n *  API \n * \n */\n\nimport { configAPI } from './configApi.js';\n\nclass PresetsAPI {\n  constructor() {\n    this.configAPI = configAPI;\n  }\n\n  /**\n   * \n   * @param {object} params - \n   * @param {number} params.nums - \n   * @param {number} params.start - \n   * @param {string} params.keyword - \n   * @returns {Promise<object>} \n   */\n  async getPresets(params = {}) {\n    const queryString = new URLSearchParams(params).toString();\n    const endpoint = `/api/config/presets${queryString ? '?' + queryString : ''}`;\n    return this.configAPI.request(endpoint);\n  }\n\n  /**\n   * \n   * @param {string} presetId - ID\n   * @returns {Promise<object>} \n   */\n  async getPreset(presetId) {\n    return this.configAPI.request(`/api/config/presets/${encodeURIComponent(presetId)}`);\n  }\n\n  /**\n   * \n   * @param {object} data - \n   * @param {string} data.name - \n   * @param {Array} data.history - \n   * @param {string} data.opening - \n   * @param {Array} data.tools - \n   * @returns {Promise<object>} \n   */\n  async createPreset(data) {\n    return this.configAPI.request('/api/config/presets', {\n      method: 'POST',\n      body: JSON.stringify(data)\n    });\n  }\n\n  /**\n   * \n   * @param {string} presetId - ID\n   * @param {object} data - \n   * @returns {Promise<object>} \n   */\n  async updatePreset(presetId, data) {\n    return this.configAPI.request(`/api/config/presets/${encodeURIComponent(presetId)}`, {\n      method: 'PUT',\n      body: JSON.stringify(data)\n    });\n  }\n\n  /**\n   * \n   * @param {string} presetId - ID\n   * @returns {Promise<object>} \n   */\n  async deletePreset(presetId) {\n    return this.configAPI.request(`/api/config/presets/${encodeURIComponent(presetId)}`, {\n      method: 'DELETE'\n    });\n  }\n\n  /**\n   * \n   * @returns {Promise<object>} \n   */\n  async reloadPresets() {\n    return this.configAPI.request('/api/config/presets/reload', {\n      method: 'POST'\n    });\n  }\n\n  /**\n   * \n   * @param {File} file - JSON\n   * @returns {Promise<object>} \n   */\n  async importPreset(file) {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    //  Content-Type \n    const headers = {\n      'X-Admin-Code': this.configAPI.adminCode\n    };\n\n    try {\n      const response = await fetch('/api/config/presets/import', {\n        method: 'POST',\n        headers,\n        body: formData\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        // \n        if (response.status === 401 || response.status === 403) {\n          if (data.error === 'UNAUTHORIZED' || data.error === 'FORBIDDEN' || \n              data.message?.includes('') || data.message?.includes('') ||\n              data.message?.includes('')) {\n            this.configAPI.adminCode = '';\n            localStorage.removeItem('admin_code');\n          }\n        }\n        throw new Error(data.message || data.error || '');\n      }\n\n      if (data.code !== 0 && data.code !== undefined) {\n        throw new Error(data.message || '');\n      }\n\n      return data;\n    } catch (error) {\n      console.error(':', error);\n      throw error;\n    }\n  }\n\n  /**\n   * \n   * @param {string} presetId - ID\n   */\n  async exportPreset(presetId) {\n    try {\n      const headers = {\n        'X-Admin-Code': this.configAPI.adminCode\n      };\n\n      const response = await fetch(`/api/config/presets/${encodeURIComponent(presetId)}/export`, {\n        method: 'GET',\n        headers\n      });\n\n      if (!response.ok) {\n        const data = await response.json();\n        throw new Error(data.message || data.error || '');\n      }\n\n      // \n      const contentDisposition = response.headers.get('Content-Disposition');\n      let filename = `${presetId}.json`;\n      if (contentDisposition) {\n        const matches = contentDisposition.match(/filename[*]?=['\"]?([^'\";\\n]+)['\"]?/);\n        if (matches) {\n          filename = matches[1];\n        }\n      }\n\n      // \n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = filename;\n      document.body.appendChild(a); //  DOM \n      a.click();\n      document.body.removeChild(a); //  DOM\n      window.URL.revokeObjectURL(url);\n    } catch (error) {\n      console.error(':', error);\n      // \n      try {\n        console.warn('...');\n        const presetData = await this.getPreset(presetId);\n        const exportData = {\n          name: presetData.data.name,\n          category: presetData.data.category,\n          history: presetData.data.history,\n          opening: presetData.data.opening,\n          tools: presetData.data.tools\n        };\n        \n        const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = `${presetId}.json`;\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n        window.URL.revokeObjectURL(url);\n      } catch (fallbackError) {\n        console.error(':', fallbackError);\n        throw error; // \n      }\n    }\n  }\n\n  /**\n   * \n   * @param {Array<string>} presetIds - ID\n   * @returns {Promise<Array>} \n   */\n  async batchDeletePresets(presetIds) {\n    const results = [];\n\n    for (const presetId of presetIds) {\n      try {\n        const result = await this.deletePreset(presetId);\n        results.push({ success: true, presetId, result });\n      } catch (error) {\n        results.push({ success: false, presetId, error: error.message });\n      }\n    }\n\n    return results;\n  }\n\n  /**\n   * \n   * @param {object} data - \n   * @returns {Promise<object>} \n   */\n  async validatePreset(data) {\n    return this.configAPI.request('/api/config/presets/validate', {\n      method: 'POST',\n      body: JSON.stringify(data)\n    });\n  }\n}\n\n// \nexport const presetsAPI = new PresetsAPI();","/**\n *  Store\n * \n *  Composition API \n */\n\nimport { presetsAPI } from '@/lib/presetsApi.js';\nimport { defineStore } from 'pinia';\nimport { computed, ref } from 'vue';\n\nexport const usePresetsStore = defineStore('presets', () => {\n  // ========== State ==========\n  \n  // \n  const presets = ref([]);\n  \n  //  API\n  const summary = ref({\n    totalCount: 0,\n    categoryCount: {\n      common: 0,\n      recommended: 0,\n      hidden: 0\n    },\n    sourceCount: {\n      'built-in': 0,\n      custom: 0\n    }\n  });\n  \n  // \n  const pagination = ref({\n    total: 0,\n    start: 0,\n    nums: 50,\n    hasMore: false\n  });\n  \n  // \n  const loading = ref(false);\n\n  // ========== Getters ==========\n  \n  /**\n   * \n   */\n  const allPresets = computed(() => {\n    const presetsArray = presets.value || [];\n    return presetsArray.map(preset => ({\n      ...preset,\n      id: preset.name //  name \n    }));\n  });\n\n  /**\n   *  API summary\n   */\n  const totalCount = computed(() => {\n    return summary.value?.totalCount || 0;\n  });\n\n  /**\n   *  API summary\n   */\n  const countByCategory = computed(() => {\n    return summary.value?.categoryCount || {\n      common: 0,\n      recommended: 0,\n      hidden: 0\n    };\n  });\n\n  /**\n   *  API summary\n   */\n  const countBySource = computed(() => {\n    return summary.value?.sourceCount || {\n      'built-in': 0,\n      custom: 0\n    };\n  });\n\n  /**\n   * \n   */\n  const presetsByCategory = computed(() => {\n    const grouped = { common: [], recommended: [], hidden: [] };\n    const presetsArray = presets.value || [];\n    presetsArray.forEach(preset => {\n      if (preset.category && grouped.hasOwnProperty(preset.category)) {\n        grouped[preset.category].push(preset);\n      }\n    });\n    return grouped;\n  });\n\n  // ========== Actions ==========\n  \n  /**\n   * \n   */\n  async function fetchPresets(params = {}, append = false) {\n    loading.value = true;\n    try {\n      const response = await presetsAPI.getPresets(params);\n      const data = response.data || {};\n      \n      // \n      if (append && params.start > 0) {\n        // \n        const newPresets = data.presets || [];\n        presets.value = [...presets.value, ...newPresets];\n      } else {\n        // \n        presets.value = data.presets || [];\n      }\n      \n      // \n      if (data.summary) {\n        summary.value = {\n          totalCount: data.summary.totalCount || 0,\n          categoryCount: data.summary.categoryCount || {\n            common: 0,\n            recommended: 0,\n            hidden: 0\n          },\n          sourceCount: data.summary.sourceCount || {\n            'built-in': 0,\n            custom: 0\n          }\n        };\n      }\n      \n      // \n      if (data.pagination) {\n        pagination.value = {\n          total: data.pagination.total || 0,\n          start: data.pagination.start || 0,\n          nums: data.pagination.nums || 50,\n          hasMore: data.pagination.hasMore || false\n        };\n      }\n      \n      return data;\n    } catch (error) {\n      console.error(':', error);\n      throw error;\n    } finally {\n      loading.value = false;\n    }\n  }\n\n  /**\n   * \n   */\n  async function getPreset(presetId) {\n    try {\n      const response = await presetsAPI.getPreset(presetId);\n      return response.data;\n    } catch (error) {\n      console.error(`: ${presetId}`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * \n   */\n  async function createPreset(data) {\n    try {\n      const response = await presetsAPI.createPreset(data);\n      \n      // \n      await fetchPresets();\n      \n      return response.data;\n    } catch (error) {\n      console.error(':', error);\n      throw error;\n    }\n  }\n\n  /**\n   * \n   */\n  async function updatePreset(presetId, data) {\n    try {\n      const response = await presetsAPI.updatePreset(presetId, data);\n      \n      // \n      await fetchPresets();\n      \n      return response.data;\n    } catch (error) {\n      console.error(':', error);\n      throw error;\n    }\n  }\n\n  /**\n   * \n   */\n  async function deletePreset(presetId) {\n    try {\n      const response = await presetsAPI.deletePreset(presetId);\n      \n      // \n      const index = presets.value.findIndex(p => p.name === presetId);\n      if (index > -1) {\n        presets.value.splice(index, 1);\n      }\n      \n      return response.data;\n    } catch (error) {\n      console.error(':', error);\n      throw error;\n    }\n  }\n\n  /**\n   * \n   */\n  async function batchDeletePresets(presetIds) {\n    const results = [];\n    \n    for (const presetId of presetIds) {\n      try {\n        await deletePreset(presetId);\n        results.push({ success: true, presetId });\n      } catch (error) {\n        results.push({ success: false, presetId, error: error.message });\n      }\n    }\n    \n    return results;\n  }\n\n  /**\n   * \n   */\n  async function importPreset(file) {\n    try {\n      const response = await presetsAPI.importPreset(file);\n      \n      // \n      await fetchPresets();\n      \n      return response.data;\n    } catch (error) {\n      console.error(':', error);\n      throw error;\n    }\n  }\n\n  /**\n   * \n   */\n  async function exportPreset(presetId) {\n    try {\n      await presetsAPI.exportPreset(presetId);\n    } catch (error) {\n      console.error(':', error);\n      throw error;\n    }\n  }\n\n  /**\n   * \n   */\n  async function reloadPresets() {\n    try {\n      const response = await presetsAPI.reloadPresets();\n      \n      // \n      await fetchPresets();\n      \n      return response.data;\n    } catch (error) {\n      console.error(':', error);\n      throw error;\n    }\n  }\n\n  /**\n   * \n   */\n  function searchPresets(keyword) {\n    const presetsArray = presets.value || [];\n    if (!keyword) return presetsArray;\n\n    const lowerKeyword = keyword.toLowerCase();\n    return presetsArray.filter(preset => \n      preset.name?.toLowerCase().includes(lowerKeyword) ||\n      preset.opening?.toLowerCase().includes(lowerKeyword) ||\n      preset.history?.some(h => h.content?.toLowerCase().includes(lowerKeyword))\n    );\n  }\n\n  /**\n   * ID\n   */\n  function findPresetById(presetId) {\n    const presetsArray = allPresets.value || [];\n    return presetsArray.find(preset => preset.id === presetId);\n  }\n\n  /**\n   * \n   */\n  function findPresetByName(name) {\n    const presetsArray = allPresets.value || [];\n    return presetsArray.find(preset => preset.name === name);\n  }\n\n  // ==========  API ==========\n  \n  return {\n    // State\n    presets,\n    summary,\n    pagination,\n    loading,\n    \n    // Getters\n    allPresets,\n    totalCount,\n    countByCategory,\n    countBySource,\n    presetsByCategory,\n    \n    // Actions\n    fetchPresets,\n    getPreset,\n    createPreset,\n    updatePreset,\n    deletePreset,\n    batchDeletePresets,\n    importPreset,\n    exportPreset,\n    reloadPresets,\n    searchPresets,\n    findPresetById,\n    findPresetByName\n  };\n});","<template>\n  <div class=\"overview-view\">\n    <!--  -->\n    <div v-if=\"loading\" class=\"loading-container\">\n      <div class=\"stats-grid\">\n        <LoadingSkeleton v-for=\"i in 4\" :key=\"i\" type=\"stat-card\" is-card />\n      </div>\n      <el-card class=\"section-card\">\n        <LoadingSkeleton type=\"list\" :count=\"4\" />\n      </el-card>\n    </div>\n\n    <transition name=\"fade\" mode=\"out-in\">\n      <div v-if=\"!loading\" class=\"content-container\">\n        <!--  -->\n        <div class=\"overview-header\">\n          <div class=\"header-title\">\n            <h2></h2>\n            <span class=\"subtitle\"></span>\n          </div>\n          <div class=\"header-actions\">\n            <el-tooltip content=\"\" placement=\"bottom\">\n              <el-button circle :icon=\"Refresh\" @click=\"handleRefreshModels\" :loading=\"refreshing\" />\n            </el-tooltip>\n            <el-upload\n              :before-upload=\"handleImportConfig\"\n              :show-file-list=\"false\"\n              accept=\".json\"\n              style=\"display: inline-block; margin: 0 8px;\"\n            >\n              <el-tooltip content=\"\" placement=\"bottom\">\n                <el-button circle :icon=\"Upload\" />\n              </el-tooltip>\n            </el-upload>\n            <el-tooltip content=\"\" placement=\"bottom\">\n              <el-button circle :icon=\"Download\" @click=\"handleExportConfig\" />\n            </el-tooltip>\n            <el-tooltip content=\"\" placement=\"bottom\">\n              <el-button circle :icon=\"DocumentCopy\" @click=\"showCompare = true\" />\n            </el-tooltip>\n          </div>\n        </div>\n\n        <!--  -->\n        <div class=\"stats-grid\">\n          <el-card class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background-color: #409eff20;\">\n              <el-icon :size=\"32\" color=\"#409eff\"><Connection /></el-icon>\n            </div>\n            <div class=\"stat-content\">\n              <div class=\"stat-value\">{{ configStore.totalAdapters }}</div>\n              <div class=\"stat-label\"></div>\n            </div>\n          </el-card>\n\n          <el-card class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background-color: #67c23a20;\">\n              <el-icon :size=\"32\" color=\"#67c23a\"><CircleCheck /></el-icon>\n            </div>\n            <div class=\"stat-content\">\n              <div class=\"stat-value\">{{ configStore.enabledAdaptersCount }}</div>\n              <div class=\"stat-label\"></div>\n            </div>\n          </el-card>\n\n          <el-card class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background-color: #e6a23c20;\">\n              <el-icon :size=\"32\" color=\"#e6a23c\"><Grid /></el-icon>\n            </div>\n            <div class=\"stat-content\">\n              <div class=\"stat-value\">{{ configStore.totalModelsCount }}</div>\n              <div class=\"stat-label\"></div>\n            </div>\n          </el-card>\n\n          <el-card class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background-color: #f56c6c20;\">\n              <el-icon :size=\"32\" color=\"#f56c6c\"><Document /></el-icon>\n            </div>\n            <div class=\"stat-content\">\n              <div class=\"stat-value\">{{ presetsStore.totalCount }}</div>\n              <div class=\"stat-label\"></div>\n            </div>\n          </el-card>\n\n          <el-card class=\"stat-card\">\n            <div class=\"stat-icon\" :style=\"{\n              backgroundColor: systemStatus === 'normal' ? '#67c23a20' : '#f5672020'\n            }\">\n              <el-icon\n                :size=\"32\"\n                :color=\"systemStatus === 'normal' ? '#67c23a' : '#f56720'\"\n              >\n                <component :is=\"systemStatus === 'normal' ? SuccessFilled : WarningFilled\" />\n              </el-icon>\n            </div>\n            <div class=\"stat-content\">\n              <div class=\"stat-value\">{{ systemStatusText }}</div>\n              <div class=\"stat-label\"></div>\n            </div>\n          </el-card>\n\n          <el-card class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background-color: #67c23a20;\">\n              <el-icon :size=\"32\" color=\"#67c23a\"><Document /></el-icon>\n            </div>\n            <div class=\"stat-content\">\n              <div class=\"stat-value\">{{ logStore.totalLogsCount }}</div>\n              <div class=\"stat-label\"></div>\n            </div>\n          </el-card>\n\n          <el-card class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background-color: #e6a23c20;\">\n              <el-icon :size=\"32\" color=\"#e6a23c\"><Grid /></el-icon>\n            </div>\n            <div class=\"stat-content\">\n              <div class=\"stat-value\">{{ configStore.totalPluginsCount }}</div>\n              <div class=\"stat-label\"></div>\n            </div>\n          </el-card>\n\n          <el-card class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background-color: #409eff20;\">\n              <el-icon :size=\"32\" color=\"#409eff\"><Grid /></el-icon>\n            </div>\n            <div class=\"stat-content\">\n              <div class=\"stat-value\">{{ configStore.totalToolsCount }}</div>\n              <div class=\"stat-label\"></div>\n            </div>\n          </el-card>\n        </div>\n\n        <!--  -->\n        <div class=\"section-container\">\n          <div class=\"section-header\">\n            <h3></h3>\n          </div>\n          <div class=\"quick-actions-grid\">\n            <div class=\"action-item\" @click=\"navigateTo('llm-adapters')\">\n              <div class=\"action-icon\" style=\"background: #ecf5ff; color: #409eff;\">\n                <el-icon><Connection /></el-icon>\n              </div>\n              <div class=\"action-info\">\n                <div class=\"action-title\">LLM </div>\n                <div class=\"action-desc\"></div>\n              </div>\n              <el-icon class=\"action-arrow\"><ArrowRight /></el-icon>\n            </div>\n            \n            <div class=\"action-item\" @click=\"navigateTo('server')\">\n              <div class=\"action-icon\" style=\"background: #f0f9eb; color: #67c23a;\">\n                <el-icon><Monitor /></el-icon>\n              </div>\n              <div class=\"action-info\">\n                <div class=\"action-title\"></div>\n                <div class=\"action-desc\"></div>\n              </div>\n              <el-icon class=\"action-arrow\"><ArrowRight /></el-icon>\n            </div>\n\n            <div class=\"action-item\" @click=\"navigateTo('web')\">\n              <div class=\"action-icon\" style=\"background: #fdf6ec; color: #e6a23c;\">\n                <el-icon><ChromeFilled /></el-icon>\n              </div>\n              <div class=\"action-info\">\n                <div class=\"action-title\">Web </div>\n                <div class=\"action-desc\"></div>\n              </div>\n              <el-icon class=\"action-arrow\"><ArrowRight /></el-icon>\n            </div>\n\n            <div class=\"action-item\" @click=\"navigateTo('onebot')\">\n              <div class=\"action-icon\" style=\"background: #f4f4f5; color: #909399;\">\n                <el-icon><ChatDotRound /></el-icon>\n              </div>\n              <div class=\"action-info\">\n                <div class=\"action-title\">OneBot </div>\n                <div class=\"action-desc\">QQ </div>\n              </div>\n              <el-icon class=\"action-arrow\"><ArrowRight /></el-icon>\n            </div>\n\n            <div class=\"action-item\" @click=\"navigateTo('presets')\">\n              <div class=\"action-icon\" style=\"background: #fef0f0; color: #f56c6c;\">\n                <el-icon><Document /></el-icon>\n              </div>\n              <div class=\"action-info\">\n                <div class=\"action-title\"></div>\n                <div class=\"action-desc\"></div>\n              </div>\n              <el-icon class=\"action-arrow\"><ArrowRight /></el-icon>\n            </div>\n\n            <div class=\"action-item\" @click=\"navigateTo('logs')\">\n              <div class=\"action-icon\" style=\"background: #f4f4f5; color: #909399;\">\n                <el-icon><Document /></el-icon>\n              </div>\n              <div class=\"action-info\">\n                <div class=\"action-title\"></div>\n                <div class=\"action-desc\"></div>\n              </div>\n              <el-icon class=\"action-arrow\"><ArrowRight /></el-icon>\n            </div>\n\n            <div class=\"action-item\" @click=\"navigateTo('plugins')\">\n              <div class=\"action-icon\" style=\"background: #f0f9ff; color: #409eff;\">\n                <el-icon><Grid /></el-icon>\n              </div>\n              <div class=\"action-info\">\n                <div class=\"action-title\"></div>\n                <div class=\"action-desc\"></div>\n              </div>\n              <el-icon class=\"action-arrow\"><ArrowRight /></el-icon>\n            </div>\n\n            <div class=\"action-item\" @click=\"navigateToChat\">\n              <div class=\"action-icon\" style=\"background: #f0f9eb; color: #67c23a;\">\n                <el-icon><ChatDotRound /></el-icon>\n              </div>\n              <div class=\"action-info\">\n                <div class=\"action-title\"></div>\n                <div class=\"action-desc\"></div>\n              </div>\n              <el-icon class=\"action-arrow\"><ArrowRight /></el-icon>\n            </div>\n          </div>\n        </div>\n\n    <!--  -->\n    <el-card class=\"section-card\" v-if=\"pendingItems.length > 0\">\n      <template #header>\n        <div class=\"card-header\">\n          <el-icon><Warning /></el-icon>\n          <span> ({{ pendingItems.length }})</span>\n        </div>\n      </template>\n      <div class=\"pending-items-list\">\n        <div\n          v-for=\"(item, index) in pendingItems\"\n          :key=\"index\"\n          class=\"pending-item\"\n        >\n          <el-alert\n            :type=\"item.type\"\n            :title=\"item.title\"\n            :closable=\"false\"\n          />\n          <el-button\n            v-if=\"item.action\"\n            type=\"primary\"\n            link\n            @click=\"item.action.handler\"\n          >\n            {{ item.action.text }}\n          </el-button>\n        </div>\n      </div>\n    </el-card>\n\n    <!--  -->\n    <el-card class=\"section-card\">\n      <template #header>\n        <div class=\"card-header\">\n          <el-icon><Connection /></el-icon>\n          <span></span>\n        </div>\n      </template>\n      <div class=\"adapters-overview\">\n        <div\n          v-for=\"type in allAdapterTypes\"\n          :key=\"type\"\n          class=\"adapter-type-section\"\n        >\n          <div class=\"adapter-type-header\">\n            <h3>{{ adapterTypeName(type) }}</h3>\n            <el-tag>{{ getAdapterInstanceCount(type) }} </el-tag>\n          </div>\n          <div v-if=\"getAdapterInstanceCount(type) === 0\" class=\"empty-state\">\n            \n          </div>\n          <div v-else class=\"adapter-list\">\n            <div\n              v-for=\"(adapter, index) in getAdapterInstances(type)\"\n              :key=\"index\"\n              class=\"adapter-item\"\n            >\n              <el-tag :type=\"adapter.enable ? 'success' : 'info'\" size=\"small\">\n                {{ adapter.enable ? '' : '' }}\n              </el-tag>\n              <span class=\"adapter-name\">{{ adapter.name || `${type}-${index + 1}` }}</span>\n              <span class=\"adapter-model\">{{ adapter.default_model }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </el-card>\n      </div>\n    </transition>\n\n    <!--  -->\n    <ConfigCompare v-model=\"showCompare\" />\n  </div>\n</template>\n\n<script setup>\nimport ConfigCompare from '@/components/settings/ConfigCompare.vue';\nimport LoadingSkeleton from '@/components/settings/LoadingSkeleton.vue';\nimport { useConfigStore } from '@/stores/configStore.js';\nimport { useLogStore } from '@/stores/logStore.js';\nimport { usePresetsStore } from '@/stores/presetsStore.js';\nimport {\n    ArrowRight,\n    ChatDotRound,\n    ChromeFilled,\n    CircleCheck,\n    Connection,\n    Document,\n    DocumentCopy,\n    Download,\n    Grid,\n    Monitor,\n    Refresh,\n    SuccessFilled,\n    Upload,\n    Warning,\n    WarningFilled\n} from '@element-plus/icons-vue';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nimport { computed, onMounted, ref } from 'vue';\nimport { useRouter } from 'vue-router';\n\nconst router = useRouter();\nconst configStore = useConfigStore();\nconst presetsStore = usePresetsStore();\nconst logStore = useLogStore();\n\nconst loading = ref(true);\nconst refreshing = ref(false);\nconst showCompare = ref(false);\n\n// \nconst systemStatus = computed(() => {\n  if (configStore.needRestart) return 'warning';\n  \n  // \n  const hasDisabled = Object.values(configStore.adapters).some(instances =>\n    instances.some(adapter => !adapter.enable)\n  );\n  \n  return hasDisabled ? 'warning' : 'normal';\n});\n\nconst systemStatusText = computed(() => {\n  if (configStore.needRestart) return '';\n  return systemStatus.value === 'normal' ? '' : '';\n});\n\n// \nconst allAdapterTypes = computed(() => {\n  const typesFromApi = configStore?.adapterTypes?.types || [];\n  const typesFromConfig = Object.keys(configStore.adapters || {});\n  \n  //  API  API \n  const apiTypes = [...typesFromApi];\n  const configOnlyTypes = typesFromConfig.filter(type => !typesFromApi.includes(type));\n  \n  return [...apiTypes, ...configOnlyTypes];\n});\n\n// \nconst getAdapterInstanceCount = (type) => {\n  const instances = configStore.adapters?.[type] || [];\n  return instances.length;\n};\n\n// \nconst getAdapterInstances = (type) => {\n  return configStore.adapters?.[type] || [];\n};\n\n// \nconst pendingItems = computed(() => {\n  const items = [];\n  \n  // 1. \n  if (configStore.needRestart) {\n    items.push({\n      type: 'warning',\n      title: '',\n      action: {\n        text: '',\n        handler: () => router.push('/settings')\n      }\n    });\n  }\n  \n  // 2. \n  Object.entries(configStore.adapters).forEach(([type, instances]) => {\n    instances.forEach((adapter, index) => {\n      if (adapter.enable) {\n        const providerName = adapter.name || `${type}-${index + 1}`;\n        const models = configStore.models[providerName];\n        \n        if (!models || models.length === 0) {\n          items.push({\n            type: 'error',\n            title: `${providerName}  API Key `,\n            action: {\n              text: '',\n              handler: () => router.push('/settings/llm-adapters')\n            }\n          });\n        }\n      }\n    });\n  });\n  \n  // 3. \n  const disabledCount = Object.values(configStore.adapters)\n    .flat()\n    .filter(adapter => !adapter.enable).length;\n  \n  if (disabledCount > 0) {\n    items.push({\n      type: 'info',\n      title: ` ${disabledCount} `,\n      action: {\n        text: '',\n        handler: () => router.push('/settings/llm-adapters')\n      }\n    });\n  }\n  \n  // 4.  AuthView \n  \n  // 5.  OneBot \n  if (configStore.config?.onebot?.enable) {\n    const onebotConfig = configStore.config.onebot;\n    if (!onebotConfig.reverse_ws_url || !onebotConfig.bot_qq) {\n      items.push({\n        type: 'warning',\n        title: 'OneBot ',\n        action: {\n          text: '',\n          handler: () => router.push('/settings/onebot')\n        }\n      });\n    }\n  }\n  \n  return items;\n});\n\n// \nconst adapterTypeName = (type) => {\n  //  configStore  adapterTypes \n  if (!configStore || !configStore.adapterTypes) {\n    // \n    const names = {\n      openai: 'OpenAI',\n      gemini: 'Gemini',\n      vertex: 'Vertex AI',\n      deepseek: 'DeepSeek',\n      anthropic: 'Anthropic'\n    };\n    if (names[type]) return names[type];\n    if (!type) return '';\n    return type.charAt(0).toUpperCase() + type.slice(1);\n  }\n  \n  // \n  const adapterInfo = configStore.adapterTypes.adapters?.find(a => a.type === type);\n  if (adapterInfo?.name) {\n    return adapterInfo.name;\n  }\n  \n  // \n  const names = {\n    openai: 'OpenAI',\n    gemini: 'Gemini',\n    vertex: 'Vertex AI',\n    deepseek: 'DeepSeek',\n    anthropic: 'Anthropic'\n  };\n  if (names[type]) return names[type];\n  if (!type) return '';\n  return type.charAt(0).toUpperCase() + type.slice(1);\n};\n\n// \nconst handleRefreshModels = async () => {\n  refreshing.value = true;\n  try {\n    await configStore.refreshAllModels();\n    ElMessage.success('');\n  } catch (error) {\n    ElMessage.error('' + error.message);\n  } finally {\n    refreshing.value = false;\n  }\n};\n\n// \nconst handleExportConfig = async () => {\n  try {\n    const filename = `mio-chat-config-${new Date().toISOString().split('T')[0]}.json`;\n    await configStore.exportConfig(filename);\n    ElMessage.success('');\n  } catch (error) {\n    ElMessage.error('' + error.message);\n  }\n};\n\n// \nconst handleImportConfig = async (file) => {\n  try {\n    await ElMessageBox.confirm(\n      '',\n      '',\n      {\n        confirmButtonText: '',\n        cancelButtonText: '',\n        type: 'warning'\n      }\n    );\n\n    const configData = await configStore.importConfig(file);\n    \n    // \n    const validateResult = await configStore.validateConfig(configData);\n    if (!validateResult.valid) {\n      ElMessageBox.alert(\n        `\\n${validateResult.errors.join('\\n')}`,\n        '',\n        { type: 'error' }\n      );\n      return false;\n    }\n\n    // \n    await configStore.updateConfig(configData);\n    ElMessage.success('');\n    \n    // \n    await configStore.fetchConfig();\n  } catch (error) {\n    if (error !== 'cancel') {\n      ElMessage.error('' + error.message);\n    }\n  }\n  \n  return false; // \n};\n\n// \nconst navigateTo = (path) => {\n  router.push(`/settings/${path}`);\n};\n\n// \nconst navigateToChat = () => {\n  router.push('/');\n};\n\n// \nonMounted(async () => {\n  loading.value = true;\n  try {\n    // \n    const promises = [];\n    \n    if (!configStore.config) {\n      promises.push(configStore.fetchConfig());\n    }\n    \n    if (!configStore.adapterTypes.types.length) {\n      promises.push(configStore.fetchAdapterTypes());\n    }\n    \n    // \n    promises.push(\n      presetsStore.fetchPresets().catch(error => {\n        console.warn(':', error);\n        // API\n      })\n    );\n    \n    // store\n    promises.push(\n      logStore.initialize().catch(error => {\n        console.warn('store:', error);\n        // \n      })\n    );\n    \n    // \n    promises.push(\n      configStore.fetchPlugins().catch(error => {\n        console.warn(':', error);\n        // \n      })\n    );\n    \n    await Promise.all(promises);\n    \n    // \n    await new Promise(resolve => setTimeout(resolve, 300));\n  } catch (error) {\n    ElMessage.error('' + error.message);\n  } finally {\n    loading.value = false;\n  }\n});\n</script>\n\n<style scoped lang=\"scss\">\n// \n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n\n.overview-view {\n  padding: 24px;\n  max-width: 1400px;\n  margin: 0 auto;\n}\n\n.loading-container {\n  .stats-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));\n    gap: 16px;\n    margin-bottom: 24px;\n  }\n\n  .section-card {\n    margin-bottom: 24px;\n  }\n}\n\n.content-container {\n  width: 100%;\n}\n\n.overview-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n\n  .header-title {\n    h2 {\n      margin: 0;\n      font-size: 24px;\n      font-weight: 600;\n      color: #303133;\n    }\n    \n    .subtitle {\n      font-size: 14px;\n      color: #909399;\n      margin-top: 4px;\n      display: block;\n    }\n  }\n\n  .header-actions {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    \n    .el-button {\n      border: none;\n      background: transparent;\n      font-size: 18px;\n      color: #606266;\n      width: 40px;\n      height: 40px;\n      \n      &:hover {\n        background: rgba(0, 0, 0, 0.05);\n        color: #409eff;\n      }\n    }\n  }\n}\n\n.stats-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));\n  gap: 20px;\n  margin-bottom: 32px;\n}\n\n.stat-card {\n  border: none;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    transform: translateY(-4px);\n  }\n\n  :deep(.el-card__body) {\n    display: flex;\n    align-items: center;\n    gap: 16px;\n    padding: 20px;\n  }\n\n  .stat-icon {\n    width: 56px;\n    height: 56px;\n    border-radius: 12px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-shrink: 0;\n  }\n\n  .stat-content {\n    flex: 1;\n  }\n\n  .stat-value {\n    font-size: 28px;\n    font-weight: 600;\n    color: #303133;\n    line-height: 1.2;\n    margin-bottom: 4px;\n  }\n\n  .stat-label {\n    font-size: 14px;\n    color: #909399;\n  }\n}\n\n.section-container {\n  margin-bottom: 32px;\n\n  .section-header {\n    margin-bottom: 16px;\n    \n    h3 {\n      margin: 0;\n      font-size: 18px;\n      font-weight: 600;\n      color: #303133;\n    }\n  }\n}\n\n.quick-actions-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));\n  gap: 16px;\n\n  .action-item {\n    display: flex;\n    align-items: center;\n    gap: 16px;\n    padding: 20px;\n    background: #f8f9fa;\n    border-radius: 12px;\n    cursor: pointer;\n    transition: all 0.3s ease;\n    border: 1px solid transparent;\n\n    &:hover {\n      background: #fff;\n      transform: translateY(-2px);\n      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.05);\n      border-color: var(--el-color-primary-light-8);\n\n      .action-arrow {\n        opacity: 1;\n        transform: translateX(0);\n      }\n    }\n\n    .action-icon {\n      width: 48px;\n      height: 48px;\n      border-radius: 12px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-size: 24px;\n    }\n\n    .action-info {\n      flex: 1;\n      \n      .action-title {\n        font-size: 16px;\n        font-weight: 600;\n        color: #303133;\n        margin-bottom: 4px;\n      }\n\n      .action-desc {\n        font-size: 12px;\n        color: #909399;\n      }\n    }\n\n    .action-arrow {\n      font-size: 16px;\n      color: #c0c4cc;\n      opacity: 0;\n      transform: translateX(-10px);\n      transition: all 0.3s ease;\n    }\n  }\n}\n\n.pending-items-list {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n\n  .pending-item {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n\n    .el-alert {\n      flex: 1;\n    }\n\n    .el-button {\n      flex-shrink: 0;\n    }\n  }\n}\n\n.adapters-overview {\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n}\n\n.adapter-type-section {\n  display: flex;\n  flex-direction: column;\n  \n  &:last-child {\n    padding-bottom: 24px;\n  }\n  \n  .adapter-type-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 12px;\n    padding-bottom: 8px;\n    border-bottom: 1px solid #e4e7ed;\n    flex-shrink: 0;\n    min-height: 32px; // \n\n    h3 {\n      margin: 0;\n      font-size: 16px;\n      font-weight: 600;\n      color: #303133;\n      line-height: 1.5;\n    }\n  }\n\n  .empty-state {\n    text-align: center;\n    padding: 32px;\n    color: #909399;\n    font-size: 14px;\n  }\n\n  .adapter-list {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n  }\n\n  .adapter-item {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    padding: 12px;\n    background-color: #f5f7fa;\n    border-radius: 6px;\n    transition: background-color 0.2s;\n\n    &:hover {\n      background-color: #ecf5ff;\n    }\n\n    //  - \n    .el-tag {\n      flex-shrink: 0;\n      min-width: 60px;\n      text-align: center;\n    }\n\n    //  - \n    .adapter-name {\n      font-weight: 500;\n      color: #303133;\n      flex: 1;\n      min-width: 0; // \n      max-width: 150px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    //  - \n    .adapter-model {\n      flex-grow: 1;\n      color: #909399;\n      font-size: 13px;\n      flex-shrink: 0;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      text-align: right;\n    }\n  }\n}\n\n// \n@media (max-width: 768px) {\n  .overview-view {\n    padding: 16px;\n  }\n  \n  // \n  .section-container {\n    display: none !important;\n  }\n  \n  // \n  .stats-grid {\n    grid-template-columns: repeat(2, 1fr);\n    gap: 12px;\n    \n    .stat-card {\n      .stat-icon {\n        width: 40px;\n        height: 40px;\n        \n        .el-icon {\n          font-size: 20px !important;\n        }\n      }\n      \n      .stat-content {\n        .stat-value {\n          font-size: 20px;\n        }\n        \n        .stat-label {\n          font-size: 12px;\n        }\n      }\n    }\n  }\n  \n  // \n  .overview-header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 16px;\n    \n    .header-title {\n      .subtitle {\n        font-size: 13px;\n      }\n    }\n    \n    .header-actions {\n      align-self: flex-end;\n      \n      .el-button {\n        width: 36px;\n        height: 36px;\n      }\n    }\n  }\n  \n  // \n  .section-card {\n    margin-bottom: 16px;\n    \n    .el-card__header {\n      padding: 16px;\n    }\n    \n    .el-card__body {\n      padding: 16px;\n    }\n  }\n  \n  // \n  .adapters-overview {\n    .adapter-item {\n      padding: 10px;\n      gap: 8px;\n      \n      // \n      .el-tag {\n        min-width: 50px;\n        font-size: 11px;\n      }\n      \n      .adapter-name {\n        font-size: 14px;\n        max-width: 100px; // \n      }\n      \n      .adapter-model {\n        font-size: 12px;\n      }\n    }\n  }\n}\n</style>\n// \n@media (min-width: 769px) and (max-width: 1024px) {\n  .adapters-overview {\n    .adapter-item {\n      .adapter-name {\n        max-width: 120px;\n      }\n      \n      .adapter-model {\n        max-width: 100px;\n      }\n    }\n  }\n}\n\n// \n@media (max-width: 480px) {\n  .adapters-overview {\n    .adapter-item {\n      padding: 8px;\n      gap: 6px;\n      \n      .el-tag {\n        min-width: 45px;\n        font-size: 10px;\n        padding: 2px 6px;\n      }\n      \n      .adapter-name {\n        max-width: 80px;\n        font-size: 13px;\n      }\n      \n      .adapter-model {\n        max-width: 60px;\n        font-size: 11px;\n      }\n    }\n  }\n}","<template>\n  <div class=\"llm-adapters-view\">\n    <!--  -->\n    <div v-if=\"loading\" class=\"loading-container\">\n      <div class=\"skeleton-header\">\n        <div class=\"skeleton-title\"></div>\n        <div class=\"skeleton-actions\">\n          <div class=\"skeleton-button\" v-for=\"i in 3\" :key=\"i\"></div>\n        </div>\n      </div>\n      <div class=\"skeleton-table\">\n        <div class=\"skeleton-row\" v-for=\"i in 6\" :key=\"i\">\n          <div class=\"skeleton-cell\" v-for=\"j in 6\" :key=\"j\"></div>\n        </div>\n      </div>\n    </div>\n\n    <transition name=\"fade\" mode=\"out-in\">\n      <div v-if=\"!loading\" class=\"content-container\">\n        <!--  -->\n        <div class=\"page-header\" :class=\"{ 'mobile': isMobile }\">\n          <h1 v-if=\"!isMobile\">LLM </h1>\n          \n          <!--  -->\n          <div v-if=\"!isMobile\" class=\"header-actions\">\n            <el-button\n              v-if=\"configStore.selectedAdapters && configStore.selectedAdapters.length > 0\"\n              type=\"success\"\n              :icon=\"Check\"\n              @click=\"handleBatchEnable\"\n            >\n               ({{ configStore.selectedAdapters.length }})\n            </el-button>\n            <el-button\n              v-if=\"configStore.selectedAdapters && configStore.selectedAdapters.length > 0\"\n              type=\"warning\"\n              :icon=\"Close\"\n              @click=\"handleBatchDisable\"\n            >\n              \n            </el-button>\n            <el-button\n              v-if=\"configStore.selectedAdapters && configStore.selectedAdapters.length > 0\"\n              type=\"danger\"\n              :icon=\"Delete\"\n              @click=\"handleBatchDelete\"\n            >\n              \n            </el-button>\n            <el-button\n              type=\"primary\"\n              :icon=\"Refresh\"\n              :loading=\"refreshing\"\n              @click=\"handleRefreshAll\"\n            >\n              \n            </el-button>\n            <el-dropdown @command=\"handleAddAdapter\" trigger=\"click\">\n              <el-button type=\"primary\" :icon=\"Plus\">\n                 <el-icon class=\"el-icon--right\"><ArrowDown /></el-icon>\n              </el-button>\n              <template #dropdown>\n                <el-dropdown-menu>\n                  <el-dropdown-item\n                    v-for=\"type in adapterTypes\"\n                    :key=\"type\"\n                    :command=\"type\"\n                  >\n                    <el-icon><Connection /></el-icon>\n                    {{ formatTypeLabel(type) }}\n                  </el-dropdown-item>\n                </el-dropdown-menu>\n              </template>\n            </el-dropdown>\n          </div>\n\n          <!--  -->\n          <div v-if=\"isMobile\" class=\"mobile-actions\">\n            <el-button\n              type=\"primary\"\n              :icon=\"Refresh\"\n              :loading=\"refreshing\"\n              @click=\"handleRefreshAll\"\n              size=\"small\"\n            >\n              \n            </el-button>\n            <el-dropdown @command=\"handleAddAdapter\" trigger=\"click\">\n              <el-button type=\"primary\" :icon=\"Plus\" size=\"small\">\n                \n              </el-button>\n              <template #dropdown>\n                <el-dropdown-menu>\n                  <el-dropdown-item\n                    v-for=\"type in adapterTypes\"\n                    :key=\"type\"\n                    :command=\"type\"\n                  >\n                    <el-icon><Connection /></el-icon>\n                    {{ formatTypeLabel(type) }}\n                  </el-dropdown-item>\n                </el-dropdown-menu>\n              </template>\n            </el-dropdown>\n          </div>\n        </div>\n\n        <!--  -->\n        <div v-if=\"isMobile && configStore.selectedAdapters && configStore.selectedAdapters.length > 0\" class=\"mobile-batch-actions\">\n          <div class=\"batch-info\">\n             {{ configStore.selectedAdapters.length }} \n          </div>\n          <div class=\"batch-buttons\">\n            <el-button type=\"success\" size=\"small\" @click=\"handleBatchEnable\"></el-button>\n            <el-button type=\"warning\" size=\"small\" @click=\"handleBatchDisable\"></el-button>\n            <el-button type=\"danger\" size=\"small\" @click=\"handleBatchDelete\"></el-button>\n          </div>\n        </div>\n\n        <!--  -->\n        <div class=\"stats-bar\">\n          <div class=\"stat-item\">\n            <span class=\"stat-label\"></span>\n            <span class=\"stat-value\">{{ allAdapters.length }} </span>\n          </div>\n          <div class=\"stat-item\">\n            <span class=\"stat-label\"></span>\n            <span class=\"stat-value\">{{ enabledCount }} </span>\n          </div>\n          <div class=\"stat-item\">\n            <span class=\"stat-label\"></span>\n            <span class=\"stat-value\">{{ configStore.totalModelsCount }} </span>\n          </div>\n        </div>\n\n        <!--  -->\n        <div class=\"adapters-list\">\n          <div v-if=\"allAdapters.length === 0\" class=\"empty-state\">\n            <el-empty description=\"\">\n              <el-dropdown @command=\"handleAddAdapter\" trigger=\"click\">\n                <el-button type=\"primary\" :icon=\"Plus\">\n                  \n                </el-button>\n                <template #dropdown>\n                  <el-dropdown-menu>\n                    <el-dropdown-item\n                      v-for=\"type in adapterTypes\"\n                      :key=\"type\"\n                      :command=\"type\"\n                    >\n                      <el-icon><Connection /></el-icon>\n                      {{ formatTypeLabel(type) }}\n                    </el-dropdown-item>\n                  </el-dropdown-menu>\n                </template>\n              </el-dropdown>\n            </el-empty>\n          </div>\n\n          <el-table\n            v-else\n            :data=\"allAdapters\"\n            style=\"width: 100%\"\n            @selection-change=\"handleSelectionChange\"\n          >\n            <el-table-column type=\"selection\" width=\"55\" />\n            \n            <el-table-column label=\"\" width=\"120\">\n              <template #default=\"{ row }\">\n                <el-tag :type=\"getTypeTagType(row.type)\" effect=\"light\">\n                  {{ formatTypeLabel(row.type) }}\n                </el-tag>\n              </template>\n            </el-table-column>\n\n            <el-table-column label=\"\" min-width=\"150\">\n              <template #default=\"{ row }\">\n                <div class=\"adapter-name\">\n                  <span class=\"name\">{{ row.adapter.name || `${row.type}-${row.index + 1}` }}</span>\n                  <el-tag v-if=\"!row.adapter.enable\" type=\"info\" size=\"small\" effect=\"plain\">\n                    \n                  </el-tag>\n                </div>\n              </template>\n            </el-table-column>\n\n            <el-table-column label=\"\" min-width=\"200\">\n              <template #default=\"{ row }\">\n                <span class=\"model-name\">{{ row.adapter.default_model || '-' }}</span>\n              </template>\n            </el-table-column>\n\n            <el-table-column label=\"\" width=\"120\" align=\"center\">\n              <template #default=\"{ row }\">\n                <el-tag size=\"small\" :type=\"getModelCountType(row.modelCount)\" effect=\"plain\" round>\n                  {{ row.modelCount }} \n                </el-tag>\n              </template>\n            </el-table-column>\n\n            <el-table-column label=\"\" width=\"100\" align=\"center\">\n              <template #default=\"{ row }\">\n                <el-switch\n                  v-model=\"row.adapter.enable\"\n                  @change=\"handleToggle(row)\"\n                />\n              </template>\n            </el-table-column>\n\n            <el-table-column label=\"\" width=\"200\" align=\"center\">\n              <template #default=\"{ row }\">\n                <div class=\"action-buttons\">\n                  <el-button\n                    size=\"small\"\n                    type=\"primary\"\n                    text\n                    @click=\"handleEdit(row)\"\n                  >\n                    \n                  </el-button>\n                  <el-button\n                    size=\"small\"\n                    type=\"success\"\n                    text\n                    @click=\"handleRefresh(row)\"\n                  >\n                    \n                  </el-button>\n                  <el-button\n                    size=\"small\"\n                    type=\"danger\"\n                    text\n                    @click=\"handleDelete(row)\"\n                  >\n                    \n                  </el-button>\n                </div>\n              </template>\n            </el-table-column>\n          </el-table>\n        </div>\n      </div>\n    </transition>\n\n    <!--  -->\n    <adapter-editor\n      :visible=\"editorVisible\"\n      :mode=\"editorMode\"\n      :type=\"editorType\"\n      :adapter=\"editorAdapter\"\n      :index=\"editorIndex\"\n      @close=\"handleEditorClose\"\n      @submit=\"handleEditorSubmit\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport AdapterEditor from '@/components/settings/AdapterEditor.vue';\nimport { useConfigStore } from '@/stores/configStore.js';\nimport {\n  ArrowDown,\n  Check,\n  Close,\n  Connection,\n  Delete,\n  Plus,\n  Refresh\n} from '@element-plus/icons-vue';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nimport { computed, onMounted, onUnmounted, ref } from 'vue';\n\nconst configStore = useConfigStore();\n\nconst loading = ref(true);\nconst refreshing = ref(false);\nconst editorVisible = ref(false);\nconst editorMode = ref('add');\nconst editorType = ref('openai');\nconst editorAdapter = ref(null);\n\n// \nconst isMobile = ref(false);\n\nconst checkMobile = () => {\n  isMobile.value = window.innerWidth <= 768;\n};\nconst editorIndex = ref(-1);\n\n// \nconst adapterTypes = computed(() => {\n  return configStore?.adapterTypes?.types || [];\n});\n\n// \nconst allAdapters = computed(() => {\n  const adapters = [];\n  Object.entries(configStore.adapters).forEach(([type, instances]) => {\n    instances.forEach((adapter, index) => {\n      const providerName = adapter.name || `${type}-${index + 1}`;\n      const models = configStore.models[providerName] || [];\n      const modelCount = models.reduce((count, group) => {\n        return count + (group.models ? group.models.length : 0);\n      }, 0);\n      \n      adapters.push({\n        type,\n        index,\n        adapter,\n        providerName,\n        models,\n        modelCount\n      });\n    });\n  });\n  return adapters;\n});\n\n// \nconst enabledCount = computed(() => {\n  return allAdapters.value.filter(item => item.adapter.enable).length;\n});\n\n// \nconst getAdapterModels = (adapter, type, index) => {\n  const providerName = adapter.name || `${type}-${index + 1}`;\n  return configStore.models[providerName] || [];\n};\n\n// \nconst formatTypeLabel = (type) => {\n  //  configStore  adapterTypes \n  if (configStore?.adapterTypes?.adapters) {\n    // \n    const adapterInfo = configStore.adapterTypes.adapters.find(a => a.type === type);\n    if (adapterInfo?.name) {\n      return adapterInfo.name;\n    }\n  }\n  \n  // \n  const map = {\n    openai: 'OpenAI',\n    gemini: 'Gemini',\n    vertex: 'Vertex AI',\n    deepseek: 'DeepSeek',\n    anthropic: 'Anthropic'\n  };\n  if (map[type]) return map[type];\n  return type.charAt(0).toUpperCase() + type.slice(1);\n};\n\n// \nconst getTypeTagType = (type) => {\n  const map = {\n    openai: 'success',\n    gemini: 'warning',\n    vertex: 'info'\n  };\n  return map[type] || 'primary';\n};\n\n// \nconst getModelCountType = (count) => {\n  if (count === 0) return 'danger';\n  if (count < 5) return 'warning';\n  return 'success';\n};\n\n// \nconst handleAddAdapter = (type) => {\n  editorMode.value = 'add';\n  editorType.value = type;\n  editorAdapter.value = null;\n  editorIndex.value = -1;\n  editorVisible.value = true;\n};\n\n// \nconst handleEdit = (row) => {\n  const { type, index, adapter } = row;\n  editorMode.value = 'edit';\n  editorType.value = type;\n  editorAdapter.value = adapter;\n  editorIndex.value = index;\n  editorVisible.value = true;\n};\n\n// \nconst handleDelete = async (row) => {\n  const { type, index, adapter } = row;\n  const adapterName = adapter.name || `${type}-${index + 1}`;\n  \n  try {\n    await ElMessageBox.confirm(\n      ` \"${adapterName}\" `,\n      '',\n      {\n        confirmButtonText: '',\n        cancelButtonText: '',\n        type: 'warning'\n      }\n    );\n\n    await configStore.deleteAdapter(type, index);\n    ElMessage.success('');\n  } catch (error) {\n    if (error !== 'cancel') {\n      ElMessage.error('' + error.message);\n    }\n  }\n};\n\n// \nconst handleRefresh = async (row) => {\n  const { type, index } = row;\n  try {\n    await configStore.refreshAdapterModels(type, index);\n    ElMessage.success('');\n  } catch (error) {\n    ElMessage.error('' + error.message);\n  }\n};\n\n// /\nconst handleToggle = async (row) => {\n  const { type, index, adapter } = row;\n  const enable = adapter.enable;\n  \n  try {\n    //  enable \n    const updatedData = { ...adapter, enable };\n    await configStore.updateAdapter(type, index, updatedData);\n    ElMessage.success(enable ? '' : '');\n  } catch (error) {\n    // \n    adapter.enable = !enable;\n    ElMessage.error('' + error.message);\n  }\n};\n\n// \nconst handleSelectionChange = (selection) => {\n  // \n  configStore.clearAdapterSelection();\n  \n  // \n  selection.forEach(item => {\n    configStore.toggleAdapterSelection(item.type, item.index);\n  });\n};\n\n// \nconst handleRefreshAll = async () => {\n  refreshing.value = true;\n  try {\n    await configStore.refreshAllModels();\n    ElMessage.success('');\n  } catch (error) {\n    ElMessage.error('' + error.message);\n  } finally {\n    refreshing.value = false;\n  }\n};\n\n// \nconst handleBatchEnable = async () => {\n  if (!configStore.selectedAdapters || configStore.selectedAdapters.length === 0) {\n    ElMessage.warning('');\n    return;\n  }\n  \n  try {\n    const results = await configStore.batchToggleAdapters(\n      configStore.selectedAdapters,\n      true\n    );\n    \n    const successCount = results.filter(r => r.success).length;\n    ElMessage.success(` ${successCount} `);\n    configStore.clearAdapterSelection();\n  } catch (error) {\n    ElMessage.error('' + error.message);\n  }\n};\n\n// \nconst handleBatchDisable = async () => {\n  if (!configStore.selectedAdapters || configStore.selectedAdapters.length === 0) {\n    ElMessage.warning('');\n    return;\n  }\n  \n  try {\n    const results = await configStore.batchToggleAdapters(\n      configStore.selectedAdapters,\n      false\n    );\n    \n    const successCount = results.filter(r => r.success).length;\n    ElMessage.success(` ${successCount} `);\n    configStore.clearAdapterSelection();\n  } catch (error) {\n    ElMessage.error('' + error.message);\n  }\n};\n\n// \nconst handleBatchDelete = async () => {\n  if (!configStore.selectedAdapters || configStore.selectedAdapters.length === 0) {\n    ElMessage.warning('');\n    return;\n  }\n  \n  try {\n    await ElMessageBox.confirm(\n      ` ${configStore.selectedAdapters.length} `,\n      '',\n      {\n        confirmButtonText: '',\n        cancelButtonText: '',\n        type: 'warning'\n      }\n    );\n\n    const results = await configStore.batchDeleteAdapters(\n      configStore.selectedAdapters\n    );\n    \n    const successCount = results.filter(r => r.success).length;\n    ElMessage.success(` ${successCount} `);\n    configStore.clearAdapterSelection();\n  } catch (error) {\n    if (error !== 'cancel') {\n      ElMessage.error('' + error.message);\n    }\n  }\n};\n\n// \nconst handleEditorClose = () => {\n  editorVisible.value = false;\n};\n\n// \nconst handleEditorSubmit = async ({ type, index, data, mode }) => {\n  try {\n    if (mode === 'add') {\n      await configStore.addAdapter(type, data);\n      ElMessage.success('');\n    } else {\n      await configStore.updateAdapter(type, index, data);\n      ElMessage.success('');\n    }\n  } catch (error) {\n    ElMessage.error(mode === 'add' ? '' : '' + error.message);\n    throw error; // \n  }\n};\n\n// \nonMounted(async () => {\n  // \n  checkMobile();\n  window.addEventListener('resize', checkMobile);\n  \n  loading.value = true;\n  try {\n    // \n    const promises = [];\n    \n    if (!configStore.adapterTypes.types.length) {\n      promises.push(configStore.fetchAdapterTypes());\n    }\n    \n    if (!configStore.config) {\n      promises.push(configStore.fetchConfig());\n    }\n    \n    await Promise.all(promises);\n    await new Promise(resolve => setTimeout(resolve, 300));\n  } catch (error) {\n    ElMessage.error('' + error.message);\n  } finally {\n    loading.value = false;\n  }\n});\n\nonUnmounted(() => {\n  window.removeEventListener('resize', checkMobile);\n});\n</script>\n\n<style scoped lang=\"scss\">\n// \n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n\n.llm-adapters-view {\n  padding: 24px;\n  max-width: 1400px;\n  margin: 0 auto;\n\n  @media (max-width: 768px) {\n    padding: 16px;\n    max-width: 100%;\n  }\n}\n\n.loading-container {\n  .skeleton-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 24px;\n\n    .skeleton-title {\n      width: 200px;\n      height: 32px;\n      border-radius: 4px;\n      background: linear-gradient(90deg, #f2f2f2 25%, #e6e6e6 50%, #f2f2f2 75%);\n      background-size: 200% 100%;\n      animation: skeleton-loading 1.5s ease-in-out infinite;\n    }\n\n    .skeleton-actions {\n      display: flex;\n      gap: 12px;\n\n      .skeleton-button {\n        width: 120px;\n        height: 32px;\n        border-radius: 4px;\n        background: linear-gradient(90deg, #f2f2f2 25%, #e6e6e6 50%, #f2f2f2 75%);\n        background-size: 200% 100%;\n        animation: skeleton-loading 1.5s ease-in-out infinite;\n      }\n    }\n  }\n\n  .skeleton-table {\n    border-radius: 8px;\n    overflow: hidden;\n    border: 1px solid #ebeef5;\n\n    .skeleton-row {\n      display: flex;\n      height: 60px;\n      border-bottom: 1px solid #ebeef5;\n\n      &:last-child {\n        border-bottom: none;\n      }\n\n      .skeleton-cell {\n        flex: 1;\n        margin: 12px;\n        border-radius: 4px;\n        background: linear-gradient(90deg, #f2f2f2 25%, #e6e6e6 50%, #f2f2f2 75%);\n        background-size: 200% 100%;\n        animation: skeleton-loading 1.5s ease-in-out infinite;\n\n        &:first-child {\n          flex: 0 0 60px;\n        }\n\n        &:nth-child(2) {\n          flex: 0 0 100px;\n        }\n\n        &:nth-child(3) {\n          flex: 2;\n        }\n\n        &:nth-child(4) {\n          flex: 2;\n        }\n\n        &:nth-child(5) {\n          flex: 0 0 100px;\n        }\n\n        &:last-child {\n          flex: 0 0 180px;\n        }\n      }\n    }\n  }\n}\n\n@keyframes skeleton-loading {\n  0% {\n    background-position: -200% 0;\n  }\n  100% {\n    background-position: 200% 0;\n  }\n}\n\n.content-container {\n  width: 100%;\n}\n\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n\n  &.mobile {\n    margin-bottom: 16px;\n    justify-content: flex-end;\n  }\n\n  h1 {\n    margin: 0;\n    font-size: 24px;\n    font-weight: 600;\n    color: #303133;\n  }\n\n  .header-actions {\n    display: flex;\n    gap: 12px;\n  }\n\n  .mobile-actions {\n    display: flex;\n    gap: 8px;\n  }\n}\n\n// \n.mobile-batch-actions {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 16px;\n  background: #ecf5ff;\n  border-radius: 8px;\n  margin-bottom: 16px;\n  border: 1px solid #b3d8ff;\n\n  .batch-info {\n    font-size: 14px;\n    color: #409eff;\n    font-weight: 500;\n  }\n\n  .batch-buttons {\n    display: flex;\n    gap: 8px;\n  }\n}\n\n.stats-bar {\n  display: flex;\n  gap: 24px;\n  padding: 16px 20px;\n  background: #f8f9fa;\n  border-radius: 8px;\n  margin-bottom: 20px;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n    gap: 12px;\n    padding: 12px 16px;\n    margin-bottom: 16px;\n  }\n\n  .stat-item {\n    display: flex;\n    align-items: center;\n    gap: 4px;\n\n    .stat-label {\n      font-size: 14px;\n      color: #606266;\n    }\n\n    .stat-value {\n      font-size: 14px;\n      font-weight: 600;\n      color: #303133;\n    }\n  }\n}\n\n.adapters-list {\n  background: white;\n  border-radius: 8px;\n  overflow: hidden;\n\n  .empty-state {\n    padding: 48px 0;\n    background: #f9fafc;\n  }\n\n  .adapter-name {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n\n    .name {\n      font-weight: 500;\n      color: #303133;\n    }\n  }\n\n  .model-name {\n    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n    font-size: 13px;\n    color: #606266;\n  }\n\n  .action-buttons {\n    display: flex;\n    gap: 8px;\n    justify-content: center;\n  }\n}\n\n// Element Plus \n:deep(.el-table) {\n  .el-table__header {\n    th {\n      background-color: #fafafa;\n      color: #606266;\n      font-weight: 600;\n    }\n  }\n\n  .el-table__row {\n    &:hover {\n      background-color: #f5f7fa;\n    }\n  }\n\n  .el-table__cell {\n    padding: 12px 0;\n  }\n}\n// \n@media (max-width: 768px) {\n  .page-header {\n    .header-actions {\n      display: none !important;\n    }\n  }\n\n  .stats-bar {\n    .stat-item {\n      .stat-label {\n        font-size: 13px;\n      }\n      .stat-value {\n        font-size: 14px;\n      }\n    }\n  }\n\n  .adapters-list {\n    .adapter-card {\n      margin-bottom: 12px;\n      \n      .card-header {\n        padding: 12px 16px;\n        \n        .adapter-title {\n          font-size: 16px;\n        }\n        \n        .adapter-actions {\n          gap: 8px;\n          \n          .el-button {\n            padding: 6px 12px;\n            font-size: 13px;\n          }\n        }\n      }\n      \n      .card-content {\n        padding: 12px 16px;\n        \n        .adapter-info {\n          .info-item {\n            margin-bottom: 8px;\n            \n            .info-label {\n              font-size: 13px;\n            }\n            \n            .info-value {\n              font-size: 14px;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  .empty-state {\n    padding: 40px 20px;\n    \n    .el-empty {\n      :deep(.el-empty__description) {\n        font-size: 14px;\n      }\n    }\n  }\n}\n\n// \n@media (min-width: 769px) and (max-width: 1024px) {\n  .llm-adapters-view {\n    padding: 20px;\n  }\n  \n  .page-header {\n    .header-actions {\n      gap: 8px;\n      \n      .el-button {\n        padding: 8px 12px;\n        font-size: 13px;\n      }\n    }\n  }\n}\n</style>","<template>\n  <div class=\"server-config-view\">\n    <div class=\"page-header\">\n      <h1></h1>\n      <div class=\"header-actions\">\n        <el-button @click=\"handleReset\"></el-button>\n        <el-button\n          type=\"primary\"\n          :loading=\"saving\"\n          @click=\"handleSave\"\n        >\n          \n        </el-button>\n      </div>\n    </div>\n\n    <el-alert\n      type=\"warning\"\n      :closable=\"false\"\n      show-icon\n      style=\"margin-bottom: 24px;\"\n    >\n      <template #title>\n        \n      </template>\n    </el-alert>\n\n    <el-card>\n      <el-form\n        ref=\"formRef\"\n        :model=\"formData\"\n        :rules=\"rules\"\n        label-width=\"140px\"\n        label-position=\"left\"\n      >\n        <el-form-item label=\"\" prop=\"port\">\n          <el-input-number\n            v-model=\"formData.port\"\n            :min=\"1\"\n            :max=\"65535\"\n            :step=\"1\"\n            controls-position=\"right\"\n            style=\"width: 200px\"\n          />\n          <template #extra>\n            <span class=\"form-item-tip\">\n              1-65535 3080\n            </span>\n          </template>\n        </el-form-item>\n\n        <el-form-item label=\"\" prop=\"host\">\n          <el-input\n            v-model=\"formData.host\"\n            placeholder=\"0.0.0.0\"\n            style=\"width: 300px\"\n          />\n          <template #extra>\n            <span class=\"form-item-tip\">\n              0.0.0.0 \n            </span>\n          </template>\n        </el-form-item>\n\n        <el-form-item label=\"\" prop=\"max_rate_pre_min\">\n          <el-input-number\n            v-model=\"formData.max_rate_pre_min\"\n            :min=\"1\"\n            :max=\"10000\"\n            :step=\"10\"\n            controls-position=\"right\"\n            style=\"width: 200px\"\n          />\n          <span style=\"margin-left: 12px; color: #909399;\">/</span>\n          <template #extra>\n            <span class=\"form-item-tip\">\n              \n            </span>\n          </template>\n        </el-form-item>\n\n        <el-divider />\n\n        <el-form-item label=\"\" prop=\"debug\">\n          <el-switch\n            v-model=\"formData.debug\"\n            active-text=\"\"\n            inactive-text=\"\"\n          />\n          <template #extra>\n            <span class=\"form-item-tip\">\n              \n            </span>\n          </template>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted } from 'vue';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nimport { useConfigStore } from '@/stores/configStore.js';\n\nconst configStore = useConfigStore();\nconst formRef = ref(null);\nconst saving = ref(false);\n\n// \nconst formData = reactive({\n  port: 3080,\n  host: '0.0.0.0',\n  max_rate_pre_min: 100,\n  debug: false\n});\n\n// \nconst originalData = reactive({});\n\n// \nconst rules = {\n  port: [\n    { required: true, message: '', trigger: 'blur' },\n    {\n      type: 'number',\n      min: 1,\n      max: 65535,\n      message: ' 1-65535 ',\n      trigger: 'blur'\n    }\n  ],\n  host: [\n    { required: true, message: '', trigger: 'blur' }\n  ],\n  max_rate_pre_min: [\n    { required: true, message: '', trigger: 'blur' },\n    {\n      type: 'number',\n      min: 1,\n      message: ' 0',\n      trigger: 'blur'\n    }\n  ]\n};\n\n// \nconst loadConfig = async () => {\n  try {\n    const serverConfig = configStore.config?.server || await configStore.fetchConfigSection('server');\n    const debugConfig = configStore.config?.debug ?? false;\n    \n    Object.assign(formData, {\n      port: serverConfig.port || 3080,\n      host: serverConfig.host || '0.0.0.0',\n      max_rate_pre_min: serverConfig.max_rate_pre_min || 100,\n      debug: debugConfig\n    });\n    \n    // \n    Object.assign(originalData, formData);\n  } catch (error) {\n    ElMessage.error('' + error.message);\n  }\n};\n\n// \nconst handleSave = async () => {\n  try {\n    await formRef.value.validate();\n    \n    await ElMessageBox.confirm(\n      '',\n      '',\n      {\n        confirmButtonText: '',\n        cancelButtonText: '',\n        type: 'warning'\n      }\n    );\n\n    saving.value = true;\n\n    //  server \n    await configStore.updateConfigSection('server', {\n      port: formData.port,\n      host: formData.host,\n      max_rate_pre_min: formData.max_rate_pre_min\n    });\n\n    //  debug \n    if (configStore.config) {\n      configStore.config.debug = formData.debug;\n    }\n\n    ElMessage.success('');\n    \n    // \n    Object.assign(originalData, formData);\n  } catch (error) {\n    if (error !== 'cancel') {\n      ElMessage.error('' + error.message);\n    }\n  } finally {\n    saving.value = false;\n  }\n};\n\n// \nconst handleReset = () => {\n  Object.assign(formData, originalData);\n  formRef.value?.clearValidate();\n  ElMessage.info('');\n};\n\n// \nonMounted(async () => {\n  if (!configStore.config) {\n    await configStore.fetchConfig();\n  }\n  await loadConfig();\n});\n</script>\n\n<style scoped lang=\"scss\">\n.server-config-view {\n  padding: 24px;\n  max-width: 900px;\n  margin: 0 auto;\n}\n\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n\n  h1 {\n    margin: 0;\n    font-size: 24px;\n    font-weight: 600;\n    color: #303133;\n  }\n\n  .header-actions {\n    display: flex;\n    gap: 12px;\n  }\n}\n\n.form-item-tip {\n  color: #909399;\n  font-size: 12px;\n  line-height: 1.5;\n}\n\n:deep(.el-form-item) {\n  margin-bottom: 28px;\n}\n\n:deep(.el-form-item__extra) {\n  margin-top: 4px;\n}\n</style>\n","<template>\n  <div class=\"web-config-view\">\n    <div class=\"page-header\">\n      <h1>Web </h1>\n      <div class=\"header-actions\">\n        <el-button @click=\"handleReset\"></el-button>\n        <el-button\n          type=\"primary\"\n          :loading=\"saving\"\n          @click=\"handleSave\"\n        >\n          \n        </el-button>\n      </div>\n    </div>\n\n    <el-alert\n      type=\"warning\"\n      :closable=\"false\"\n      show-icon\n      style=\"margin-bottom: 24px;\"\n    >\n      <template #title>\n         Web \n      </template>\n    </el-alert>\n\n    <el-card>\n      <el-form\n        ref=\"formRef\"\n        :model=\"formData\"\n        :rules=\"rules\"\n        label-width=\"140px\"\n        label-position=\"left\"\n      >\n        <el-form-item label=\"\" prop=\"title\">\n          <el-input\n            v-model=\"formData.title\"\n            placeholder=\"MioChat\"\n            maxlength=\"50\"\n            show-word-limit\n            style=\"width: 400px\"\n          />\n          <template #extra>\n            <span class=\"form-item-tip\">\n              \n            </span>\n          </template>\n        </el-form-item>\n\n        <el-form-item label=\"\" prop=\"beian\">\n          <el-input\n            v-model=\"formData.beian\"\n            placeholder=\"\"\n            maxlength=\"100\"\n            show-word-limit\n            style=\"width: 400px\"\n          />\n          <template #extra>\n            <span class=\"form-item-tip\">\n              ICP12345678\n            </span>\n          </template>\n        </el-form-item>\n\n        <el-divider />\n\n        <el-form-item label=\"\" prop=\"admin_code\">\n          <el-input\n            v-model=\"formData.admin_code\"\n            :type=\"showAdminCode ? 'text' : 'password'\"\n            placeholder=\"\"\n            maxlength=\"50\"\n            show-word-limit\n            style=\"width: 400px\"\n          >\n            <template #append>\n              <el-button\n                :icon=\"showAdminCode ? View : Hide\"\n                @click=\"showAdminCode = !showAdminCode\"\n              />\n            </template>\n          </el-input>\n          <template #extra>\n            <span class=\"form-item-tip\">\n              \n            </span>\n          </template>\n        </el-form-item>\n\n        <el-form-item label=\"\" prop=\"user_code\">\n          <el-input\n            v-model=\"formData.user_code\"\n            :type=\"showUserCode ? 'text' : 'password'\"\n            placeholder=\"\"\n            maxlength=\"50\"\n            show-word-limit\n            style=\"width: 400px\"\n          >\n            <template #append>\n              <el-button\n                :icon=\"showUserCode ? View : Hide\"\n                @click=\"showUserCode = !showUserCode\"\n              />\n            </template>\n          </el-input>\n          <template #extra>\n            <span class=\"form-item-tip\">\n              \n            </span>\n          </template>\n        </el-form-item>\n\n        <el-divider />\n\n        <el-form-item label=\"\" prop=\"full_screen\">\n          <el-switch\n            v-model=\"formData.full_screen\"\n            active-text=\"\"\n            inactive-text=\"\"\n          />\n          <template #extra>\n            <span class=\"form-item-tip\">\n              \n            </span>\n          </template>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted } from 'vue';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nimport { View, Hide } from '@element-plus/icons-vue';\nimport { useConfigStore } from '@/stores/configStore.js';\n\nconst configStore = useConfigStore();\nconst formRef = ref(null);\nconst saving = ref(false);\nconst showAdminCode = ref(false);\nconst showUserCode = ref(false);\n\n// \nconst formData = reactive({\n  title: 'MioChat',\n  beian: '',\n  admin_code: '',\n  user_code: '',\n  full_screen: true\n});\n\n// \nconst originalData = reactive({});\n\n// \nconst rules = {\n  title: [\n    { required: true, message: '', trigger: 'blur' }\n  ],\n  admin_code: [\n    { required: true, message: '', trigger: 'blur' },\n    { min: 6, message: ' 6 ', trigger: 'blur' }\n  ]\n};\n\n// \nconst loadConfig = async () => {\n  try {\n    const webConfig = configStore.config?.web || await configStore.fetchConfigSection('web');\n    \n    Object.assign(formData, {\n      title: webConfig.title || 'MioChat',\n      beian: webConfig.beian || '',\n      admin_code: webConfig.admin_code || '',\n      user_code: webConfig.user_code || '',\n      full_screen: webConfig.full_screen ?? true\n    });\n    \n    // \n    Object.assign(originalData, formData);\n  } catch (error) {\n    ElMessage.error('' + error.message);\n  }\n};\n\n// \nconst handleSave = async () => {\n  try {\n    await formRef.value.validate();\n    \n    await ElMessageBox.confirm(\n      ' Web ',\n      '',\n      {\n        confirmButtonText: '',\n        cancelButtonText: '',\n        type: 'warning'\n      }\n    );\n\n    saving.value = true;\n\n    await configStore.updateConfigSection('web', {\n      title: formData.title,\n      beian: formData.beian,\n      admin_code: formData.admin_code,\n      user_code: formData.user_code,\n      full_screen: formData.full_screen\n    });\n\n    ElMessage.success('');\n    \n    // \n    Object.assign(originalData, formData);\n  } catch (error) {\n    if (error !== 'cancel') {\n      ElMessage.error('' + error.message);\n    }\n  } finally {\n    saving.value = false;\n  }\n};\n\n// \nconst handleReset = () => {\n  Object.assign(formData, originalData);\n  formRef.value?.clearValidate();\n  ElMessage.info('');\n};\n\n// \nonMounted(async () => {\n  if (!configStore.config) {\n    await configStore.fetchConfig();\n  }\n  await loadConfig();\n});\n</script>\n\n<style scoped lang=\"scss\">\n.web-config-view {\n  padding: 24px;\n  max-width: 900px;\n  margin: 0 auto;\n}\n\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n\n  h1 {\n    margin: 0;\n    font-size: 24px;\n    font-weight: 600;\n    color: #303133;\n  }\n\n  .header-actions {\n    display: flex;\n    gap: 12px;\n  }\n}\n\n.form-item-tip {\n  color: #909399;\n  font-size: 12px;\n  line-height: 1.5;\n}\n\n:deep(.el-form-item) {\n  margin-bottom: 28px;\n}\n\n:deep(.el-form-item__extra) {\n  margin-top: 4px;\n}\n</style>\n","<template>\n  <div class=\"onebot-config-view\">\n    <div class=\"page-header\">\n      <h1>OneBot </h1>\n      <div class=\"header-actions\">\n        <el-button @click=\"handleReset\"></el-button>\n        <el-button\n          type=\"primary\"\n          :loading=\"saving\"\n          @click=\"handleSave\"\n        >\n          \n        </el-button>\n      </div>\n    </div>\n\n\n\n    <el-card>\n      <el-form\n        ref=\"formRef\"\n        :model=\"formData\"\n        :rules=\"rules\"\n        label-width=\"160px\"\n        label-position=\"left\"\n      >\n        <el-form-item label=\" OneBot\" prop=\"enable\">\n          <el-switch\n            v-model=\"formData.enable\"\n            active-text=\"\"\n            inactive-text=\"\"\n          />\n          <template #extra>\n            <span class=\"form-item-tip\">\n               OneBot QQ \n            </span>\n          </template>\n        </el-form-item>\n\n        <el-divider content-position=\"left\"></el-divider>\n\n        <el-form-item label=\" WebSocket URL\" prop=\"reverse_ws_url\">\n          <el-input\n            v-model=\"formData.reverse_ws_url\"\n            placeholder=\"ws://localhost:8080/onebot/v11/ws\"\n            style=\"width: 500px\"\n            :disabled=\"!formData.enable\"\n          />\n          <template #extra>\n            <span class=\"form-item-tip\">\n              OneBot  WebSocket  go-cqhttp\n            </span>\n          </template>\n        </el-form-item>\n\n        <el-form-item label=\"Access Token\" prop=\"token\">\n          <el-input\n            v-model=\"formData.token\"\n            :type=\"showToken ? 'text' : 'password'\"\n            placeholder=\" token \"\n            maxlength=\"100\"\n            show-word-limit\n            style=\"width: 500px\"\n            :disabled=\"!formData.enable\"\n          >\n            <template #append>\n              <el-button\n                :icon=\"showToken ? View : Hide\"\n                @click=\"showToken = !showToken\"\n              />\n            </template>\n          </el-input>\n          <template #extra>\n            <span class=\"form-item-tip\">\n               OneBot  access_token \n            </span>\n          </template>\n        </el-form-item>\n\n        <el-divider content-position=\"left\"></el-divider>\n\n        <el-form-item label=\" QQ \" prop=\"bot_qq\">\n          <el-input\n            v-model=\"formData.bot_qq\"\n            placeholder=\"2698788044\"\n            maxlength=\"20\"\n            style=\"width: 300px\"\n            :disabled=\"!formData.enable\"\n          />\n          <template #extra>\n            <span class=\"form-item-tip\">\n               QQ \n            </span>\n          </template>\n        </el-form-item>\n\n        <el-form-item label=\" QQ \" prop=\"admin_qq\">\n          <el-input\n            v-model=\"formData.admin_qq\"\n            placeholder=\"1099834705\"\n            maxlength=\"20\"\n            style=\"width: 300px\"\n            :disabled=\"!formData.enable\"\n          />\n          <template #extra>\n            <span class=\"form-item-tip\">\n               QQ \n            </span>\n          </template>\n        </el-form-item>\n      </el-form>\n    </el-card>\n\n    <!--  -->\n    <el-card style=\"margin-top: 16px;\">\n      <template #header>\n        <div class=\"card-header\">\n          <span></span>\n        </div>\n      </template>\n      <el-alert\n        :type=\"formData.enable ? 'info' : 'warning'\"\n        :closable=\"false\"\n        show-icon\n      >\n        <template #title>\n          {{ formData.enable ? '' : 'OneBot ' }}\n        </template>\n      </el-alert>\n    </el-card>\n  </div>\n</template>\n\n<script setup>\nimport { useConfigStore } from '@/stores/configStore.js';\nimport { Hide, View } from '@element-plus/icons-vue';\nimport { ElMessage } from 'element-plus';\nimport { onMounted, reactive, ref } from 'vue';\n\nconst configStore = useConfigStore();\nconst formRef = ref(null);\nconst saving = ref(false);\nconst showToken = ref(false);\n\n// \nconst formData = reactive({\n  enable: false,\n  reverse_ws_url: '',\n  token: '',\n  bot_qq: '',\n  admin_qq: ''\n});\n\n// \nconst originalData = reactive({});\n\n// \nconst rules = {\n  reverse_ws_url: [\n    {\n      validator: (rule, value, callback) => {\n        if (formData.enable && !value) {\n          callback(new Error(' OneBot  WebSocket URL'));\n        } else if (value && !value.startsWith('ws://') && !value.startsWith('wss://')) {\n          callback(new Error('URL  ws://  wss:// '));\n        } else {\n          callback();\n        }\n      },\n      trigger: 'blur'\n    }\n  ],\n  bot_qq: [\n    {\n      validator: (rule, value, callback) => {\n        if (formData.enable && !value) {\n          callback(new Error(' OneBot  QQ '));\n        } else if (value && !/^\\d+$/.test(value)) {\n          callback(new Error('QQ '));\n        } else {\n          callback();\n        }\n      },\n      trigger: 'blur'\n    }\n  ],\n  admin_qq: [\n    {\n      validator: (rule, value, callback) => {\n        if (value && !/^\\d+$/.test(value)) {\n          callback(new Error('QQ '));\n        } else {\n          callback();\n        }\n      },\n      trigger: 'blur'\n    }\n  ]\n};\n\n// \nconst loadConfig = async () => {\n  try {\n    //  OneBot API \n    const onebotConfig = configStore.config?.onebot || await configStore.fetchConfigSection('onebot');\n    \n    Object.assign(formData, {\n      enable: onebotConfig.enable ?? false,\n      reverse_ws_url: onebotConfig.reverse_ws_url || '',\n      token: onebotConfig.token || '',\n      bot_qq: onebotConfig.bot_qq || '',\n      admin_qq: onebotConfig.admin_qq || ''\n    });\n    \n    // \n    Object.assign(originalData, formData);\n  } catch (error) {\n    ElMessage.error(' OneBot ' + error.message);\n  }\n};\n\n// \nconst handleSave = async () => {\n  try {\n    await formRef.value.validate();\n    \n\n\n    saving.value = true;\n\n    await configStore.updateConfigSection('onebot', {\n      enable: formData.enable,\n      reverse_ws_url: formData.reverse_ws_url,\n      token: formData.token,\n      bot_qq: formData.bot_qq,\n      admin_qq: formData.admin_qq\n    });\n\n    ElMessage.success('OneBot ');\n    \n    // \n    Object.assign(originalData, formData);\n  } catch (error) {\n    if (error !== 'cancel') {\n      ElMessage.error('' + error.message);\n    }\n  } finally {\n    saving.value = false;\n  }\n};\n\n// \nconst handleReset = () => {\n  Object.assign(formData, originalData);\n  formRef.value?.clearValidate();\n  ElMessage.info('');\n};\n\n// \nonMounted(async () => {\n  if (!configStore.config) {\n    await configStore.fetchConfig();\n  }\n  await loadConfig();\n});\n</script>\n\n<style scoped lang=\"scss\">\n.onebot-config-view {\n  padding: 24px;\n  max-width: 900px;\n  margin: 0 auto;\n}\n\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n\n  h1 {\n    margin: 0;\n    font-size: 24px;\n    font-weight: 600;\n    color: #303133;\n  }\n\n  .header-actions {\n    display: flex;\n    gap: 12px;\n  }\n}\n\n.card-header {\n  font-weight: 600;\n  color: #303133;\n}\n\n.form-item-tip {\n  color: #909399;\n  font-size: 12px;\n  line-height: 1.5;\n}\n\n:deep(.el-form-item) {\n  margin-bottom: 28px;\n}\n\n:deep(.el-form-item__extra) {\n  margin-top: 4px;\n}\n\n:deep(.el-divider) {\n  margin: 24px 0 16px 0;\n}\n\n:deep(.el-divider__text) {\n  font-weight: 600;\n  color: #606266;\n}\n\n// \n:deep(.el-input.is-disabled .el-input__wrapper) {\n  background-color: #f5f7fa;\n  border-color: #e4e7ed;\n  color: #c0c4cc;\n}\n\n:deep(.el-input.is-disabled .el-input__inner) {\n  color: #c0c4cc;\n  cursor: not-allowed;\n}\n</style>\n","<template>\n  <div class=\"plugins-view\">\n    <!--  -->\n    <div v-if=\"loading\" class=\"loading-container\">\n      <div class=\"skeleton-header\">\n        <div class=\"skeleton-title\"></div>\n        <div class=\"skeleton-actions\">\n          <div class=\"skeleton-button\" v-for=\"i in 2\" :key=\"i\"></div>\n        </div>\n      </div>\n      <div class=\"plugins-grid\">\n        <LoadingSkeleton v-for=\"i in 6\" :key=\"i\" type=\"adapter-card\" is-card />\n      </div>\n    </div>\n\n    <transition name=\"fade\" mode=\"out-in\">\n      <div v-if=\"!loading\" class=\"content-container\">\n        <!--  -->\n        <div class=\"page-header\">\n          <h1></h1>\n          <div class=\"header-actions\">\n            <el-button\n              type=\"primary\"\n              :icon=\"Refresh\"\n              :loading=\"refreshing\"\n              @click=\"handleRefreshPlugins\"\n            >\n              \n            </el-button>\n            <el-button\n              type=\"success\"\n              :icon=\"RefreshRight\"\n              @click=\"handleReloadAll\"\n            >\n              \n            </el-button>\n          </div>\n        </div>\n\n        <!--  -->\n        <div class=\"stats-row\">\n          <el-card class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background-color: #409eff20;\">\n              <el-icon :size=\"24\" color=\"#409eff\"><Grid /></el-icon>\n            </div>\n            <div class=\"stat-content\">\n              <div class=\"stat-value\">{{ plugins.length }}</div>\n              <div class=\"stat-label\"></div>\n            </div>\n          </el-card>\n\n          <el-card class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background-color: #67c23a20;\">\n              <el-icon :size=\"24\" color=\"#67c23a\"><CircleCheck /></el-icon>\n            </div>\n            <div class=\"stat-content\">\n              <div class=\"stat-value\">{{ enabledCount }}</div>\n              <div class=\"stat-label\"></div>\n            </div>\n          </el-card>\n\n          <el-card class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background-color: #e6a23c20;\">\n              <el-icon :size=\"24\" color=\"#e6a23c\"><Tools /></el-icon>\n            </div>\n            <div class=\"stat-content\">\n              <div class=\"stat-value\">{{ totalToolsCount }}</div>\n              <div class=\"stat-label\"></div>\n            </div>\n          </el-card>\n\n          <el-card class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background-color: #90939920;\">\n              <el-icon :size=\"24\" color=\"#909399\"><Box /></el-icon>\n            </div>\n            <div class=\"stat-content\">\n              <div class=\"stat-value\">{{ customPluginsCount }}</div>\n              <div class=\"stat-label\"></div>\n            </div>\n          </el-card>\n        </div>\n\n        <!--  -->\n        <div class=\"plugins-list\">\n          <el-card\n            v-for=\"plugin in plugins\"\n            :key=\"plugin.name\"\n            class=\"plugin-card\"\n            :class=\"{ disabled: !plugin.enabled }\"\n          >\n            <div class=\"plugin-header\">\n              <div class=\"plugin-info\">\n                <div class=\"plugin-title-row\">\n                  <h3 class=\"plugin-name\">\n                    <el-tag\n                      v-if=\"plugin.type === 'custom'\"\n                      type=\"warning\"\n                      size=\"small\"\n                      style=\"margin-right: 8px;\"\n                    >\n                      \n                    </el-tag>\n                    {{ plugin.displayName }}\n                  </h3>\n                  <el-switch\n                    v-model=\"plugin.enabled\"\n                    @change=\"handleTogglePlugin(plugin)\"\n                    :loading=\"plugin.toggling\"\n                  />\n                </div>\n                <p class=\"plugin-description\">{{ plugin.description || '' }}</p>\n                <div class=\"plugin-meta\">\n                  <el-tag size=\"small\" type=\"info\">v{{ plugin.version }}</el-tag>\n                  <span class=\"meta-item\">\n                    <el-icon><User /></el-icon>\n                    {{ plugin.author }}\n                  </span>\n                  <span class=\"meta-item\">\n                    <el-icon><Tools /></el-icon>\n                    {{ plugin.toolCount }} \n                  </span>\n                  <el-tag\n                    v-if=\"plugin.hasConfig\"\n                    size=\"small\"\n                    type=\"success\"\n                  >\n                    <el-icon><Setting /></el-icon>\n                    \n                  </el-tag>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"plugin-actions\">\n              <el-button\n                size=\"small\"\n                :icon=\"View\"\n                @click=\"handleViewPlugin(plugin)\"\n              >\n                \n              </el-button>\n              <el-button\n                v-if=\"plugin.hasConfig\"\n                size=\"small\"\n                :icon=\"Setting\"\n                @click=\"handleConfigPlugin(plugin)\"\n              >\n                \n              </el-button>\n              <el-button\n                size=\"small\"\n                type=\"primary\"\n                :icon=\"Refresh\"\n                :loading=\"plugin.reloading\"\n                @click=\"handleReloadPlugin(plugin)\"\n              >\n                \n              </el-button>\n            </div>\n          </el-card>\n        </div>\n      </div>\n    </transition>\n\n    <!--  -->\n    <el-dialog\n      v-model=\"detailDialogVisible\"\n      :title=\"`${currentPlugin?.displayName} - `\"\n      width=\"800px\"\n      destroy-on-close\n      class=\"config-dialog plugin-detail-dialog\"\n    >\n      <div class=\"dialog-content\">\n        <div v-if=\"currentPlugin\" class=\"plugin-detail\">\n        <el-descriptions :column=\"2\" border>\n          <el-descriptions-item label=\"\">\n            {{ currentPlugin.displayName }}\n          </el-descriptions-item>\n          <el-descriptions-item label=\"\">\n            {{ currentPlugin.version }}\n          </el-descriptions-item>\n          <el-descriptions-item label=\"\">\n            {{ currentPlugin.author }}\n          </el-descriptions-item>\n          <el-descriptions-item label=\"\">\n            <el-tag :type=\"currentPlugin.type === 'standard' ? 'success' : 'warning'\">\n              {{ currentPlugin.type === 'standard' ? '' : '' }}\n            </el-tag>\n          </el-descriptions-item>\n          <el-descriptions-item label=\"\">\n            <el-tag :type=\"currentPlugin.enabled ? 'success' : 'info'\">\n              {{ currentPlugin.enabled ? '' : '' }}\n            </el-tag>\n          </el-descriptions-item>\n          <el-descriptions-item label=\"\">\n            {{ currentPlugin.toolCount }}\n          </el-descriptions-item>\n          <el-descriptions-item label=\"\" :span=\"2\">\n            {{ currentPlugin.description || '' }}\n          </el-descriptions-item>\n        </el-descriptions>\n\n        <!--  -->\n        <div v-if=\"pluginTools.length > 0\" class=\"tools-section\">\n          <h4></h4>\n          <el-collapse v-model=\"activeCollapseNames\">\n            <el-collapse-item\n              v-for=\"group in pluginTools\"\n              :key=\"group.group\"\n              :name=\"group.group\"\n              :title=\"`${group.group} (${group.tools.length})`\"\n            >\n              <div\n                v-for=\"tool in group.tools\"\n                :key=\"tool.name\"\n                class=\"tool-item\"\n              >\n                <div class=\"tool-header\">\n                  <h5>{{ tool.name }}</h5>\n                  <el-button\n                    size=\"small\"\n                    type=\"primary\"\n                    :icon=\"Cpu\"\n                    @click=\"handleDebugTool(tool)\"\n                  >\n                    \n                  </el-button>\n                </div>\n                <p class=\"tool-description\">{{ tool.description }}</p>\n                <el-tag size=\"small\" type=\"info\">\n                  : {{ Object.keys(tool.parameters?.properties || {}).length }}\n                </el-tag>\n              </div>\n            </el-collapse-item>\n          </el-collapse>\n        </div>\n        </div>\n      </div>\n    </el-dialog>\n\n    <!--  -->\n    <el-dialog\n      v-model=\"configDialogVisible\"\n      :title=\"`${currentPlugin?.displayName} - `\"\n      width=\"700px\"\n      destroy-on-close\n      class=\"config-dialog plugin-config-dialog\"\n    >\n      <div class=\"dialog-content\">\n        <div class=\"config-editor\">\n          <el-alert\n            type=\"info\"\n            :closable=\"false\"\n            show-icon\n            style=\"margin-bottom: 16px;\"\n          >\n            <template #title>\n              \n            </template>\n          </el-alert>\n          \n          <el-input\n            v-model=\"configJsonStr\"\n            type=\"textarea\"\n            :rows=\"15\"\n            placeholder=\"JSON \"\n            class=\"config-textarea\"\n          />\n        </div>\n      </div>\n      \n      <template #footer>\n        <el-button @click=\"configDialogVisible = false\"></el-button>\n        <el-button\n          type=\"primary\"\n          :loading=\"savingConfig\"\n          @click=\"handleSaveConfig\"\n        >\n          \n        </el-button>\n      </template>\n    </el-dialog>\n\n    <!--  -->\n    <el-dialog\n      v-model=\"debugDialogVisible\"\n      :title=\"`: ${currentTool?.name}`\"\n      width=\"800px\"\n      destroy-on-close\n      class=\"debug-dialog\"\n    >\n      <div class=\"debug-container\" style=\"height: 60vh; overflow-y: auto;\">\n        <!--  -->\n        <el-card class=\"tool-info-card\" shadow=\"never\">\n          <div class=\"tool-info\">\n            <div class=\"info-row\">\n              <label></label>\n              <el-tag type=\"primary\">{{ currentTool?.name }}</el-tag>\n            </div>\n            <div class=\"info-row\">\n              <label></label>\n              <span>{{ currentTool?.description || '' }}</span>\n            </div>\n          </div>\n        </el-card>\n\n        <!--  -->\n        <el-card class=\"params-schema-card\" shadow=\"never\" v-if=\"currentTool?.parameters\">\n          <template #header>\n            <div class=\"card-header\">\n              <span></span>\n              <el-button\n                size=\"small\"\n                type=\"primary\"\n                text\n                @click=\"fillExampleParams\"\n              >\n                \n              </el-button>\n            </div>\n          </template>\n          \n          <div class=\"params-schema\">\n            <div\n              v-for=\"(prop, key) in currentTool?.parameters?.properties\"\n              :key=\"key\"\n              class=\"param-item\"\n            >\n              <div class=\"param-header\">\n                <span class=\"param-name\">\n                  {{ key }}\n                  <el-tag\n                    v-if=\"currentTool?.parameters?.required?.includes(key)\"\n                    type=\"danger\"\n                    size=\"small\"\n                    effect=\"plain\"\n                  >\n                    \n                  </el-tag>\n                  <el-tag\n                    v-else\n                    type=\"info\"\n                    size=\"small\"\n                    effect=\"plain\"\n                  >\n                    \n                  </el-tag>\n                </span>\n                <el-tag size=\"small\" type=\"info\">{{ prop.type }}</el-tag>\n              </div>\n              <div class=\"param-description\">{{ prop.description || '' }}</div>\n              <div v-if=\"prop.enum\" class=\"param-enum\">\n                : {{ prop.enum.join(', ') }}\n              </div>\n              <div v-if=\"prop.items\" class=\"param-items\">\n                : {{ prop.items.type }}\n              </div>\n            </div>\n          </div>\n        </el-card>\n\n        <!--  -->\n        <el-card class=\"params-input-card\" shadow=\"never\">\n          <template #header>\n            <div class=\"card-header\">\n              <span> (JSON )</span>\n              <el-button\n                size=\"small\"\n                type=\"warning\"\n                text\n                @click=\"debugParams = '{}'\"\n              >\n                \n              </el-button>\n            </div>\n          </template>\n          \n          <el-input\n            v-model=\"debugParams\"\n            type=\"textarea\"\n            :rows=\"6\"\n            placeholder=' JSON : {\"query\": \"test\", \"limit\": 10}'\n            class=\"params-textarea\"\n          />\n          \n          <div class=\"params-hint\">\n            <el-icon><InfoFilled /></el-icon>\n            :  JSON \n          </div>\n        </el-card>\n\n        <!--  -->\n        <div v-if=\"debugResult\" class=\"result-container\">\n          <el-card class=\"result-card\" shadow=\"never\">\n            <template #header>\n              <div class=\"card-header\">\n                <span></span>\n              </div>\n            </template>\n            \n            <div class=\"debug-result-wrapper\" :class=\"debugResult.success ? 'status-success' : 'status-error'\">\n              <div class=\"result-header\">\n                <div class=\"status-indicator\">\n                  <el-icon :size=\"18\" class=\"icon\">\n                    <CircleCheckFilled v-if=\"debugResult.success\" />\n                    <CircleCloseFilled v-else />\n                  </el-icon>\n                  <span class=\"status-text\">{{ debugResult.success ? '' : '' }}</span>\n                </div>\n                <div v-if=\"debugResult.success\" class=\"execution-meta\">\n                  <span class=\"meta-item\">: {{ debugResult.executionTime }}</span>\n                </div>\n              </div>\n\n              <div class=\"result-body\">\n                <template v-if=\"debugResult.success\">\n                  <div class=\"plugin-info-bar\">\n                    <span class=\"info-item\">\n                      <span class=\"label\">:</span>\n                      <span class=\"value\">{{ debugResult.pluginName }}</span>\n                    </span>\n                    <span class=\"divider\">|</span>\n                    <span class=\"info-item\">\n                      <span class=\"label\">:</span>\n                      <span class=\"value\">{{ debugResult.toolName }}</span>\n                    </span>\n                  </div>\n                  \n                  <div class=\"json-viewer-container\">\n                    <div class=\"viewer-label\"></div>\n                    <div class=\"json-content\">\n                      <pre>{{ JSON.stringify(debugResult.result, null, 2) }}</pre>\n                    </div>\n                  </div>\n                </template>\n\n                <template v-else>\n                  <div class=\"error-content\">\n                    <div class=\"error-message-box\">\n                      <el-icon class=\"error-icon\"><InfoFilled /></el-icon>\n                      <span class=\"message-text\">{{ debugResult.error?.message || '' }}</span>\n                    </div>\n                    <div v-if=\"debugResult.error?.stack\" class=\"error-stack\">\n                      <div class=\"stack-label\"></div>\n                      <pre class=\"stack-content\">{{ debugResult.error.stack }}</pre>\n                    </div>\n                  </div>\n                </template>\n              </div>\n            </div>\n          </el-card>\n        </div>\n      </div>\n\n      <template #footer>\n        <el-button @click=\"debugDialogVisible = false\"></el-button>\n        <el-button\n          type=\"primary\"\n          :icon=\"Cpu\"\n          :loading=\"debugging\"\n          @click=\"handleExecuteDebug\"\n        >\n          \n        </el-button>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup>\nimport LoadingSkeleton from '@/components/settings/LoadingSkeleton.vue';\nimport { pluginAPI } from '@/lib/configApi.js';\nimport {\n  Box,\n  CircleCheck,\n  CircleCheckFilled,\n  CircleCloseFilled,\n  Cpu,\n  Grid,\n  InfoFilled,\n  Refresh,\n  RefreshRight,\n  Setting,\n  Tools,\n  User,\n  View\n} from '@element-plus/icons-vue';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nimport { computed, onMounted, ref } from 'vue';\n\nconst loading = ref(false);\nconst refreshing = ref(false);\nconst plugins = ref([]);\nconst detailDialogVisible = ref(false);\nconst configDialogVisible = ref(false);\nconst debugDialogVisible = ref(false);\nconst currentPlugin = ref(null);\nconst currentTool = ref(null);\nconst pluginTools = ref([]);\nconst configJsonStr = ref('');\nconst savingConfig = ref(false);\nconst debugParams = ref('{}');\nconst debugResult = ref(null);\nconst debugging = ref(false);\nconst activeCollapseNames = ref([]);\n\n// \nconst enabledCount = computed(() => plugins.value.filter(p => p.enabled).length);\nconst totalToolsCount = computed(() => plugins.value.reduce((sum, p) => sum + p.toolCount, 0));\nconst customPluginsCount = computed(() => plugins.value.filter(p => p.type === 'custom').length);\n\n// \nconst loadPlugins = async () => {\n  loading.value = true;\n  try {\n    const result = await pluginAPI.listPlugins();\n    if (result.code === 0) {\n      plugins.value = result.data.plugins.map(p => ({\n        ...p,\n        reloading: false,\n        toggling: false\n      }));\n    } else {\n      ElMessage.error('' + result.message);\n    }\n  } catch (error) {\n    ElMessage.error('' + error.message);\n  } finally {\n    loading.value = false;\n  }\n};\n\n// \nconst handleRefreshPlugins = async () => {\n  refreshing.value = true;\n  try {\n    await loadPlugins();\n    ElMessage.success('');\n  } finally {\n    refreshing.value = false;\n  }\n};\n\n// \nconst handleReloadAll = async () => {\n  try {\n    await ElMessageBox.confirm(\n      '',\n      '',\n      {\n        confirmButtonText: '',\n        cancelButtonText: '',\n        type: 'warning'\n      }\n    );\n\n    const result = await pluginAPI.reloadAllPlugins();\n    if (result.code === 0) {\n      ElMessage.success(` ${result.data.successCount}/${result.data.totalCount}`);\n      await loadPlugins();\n    } else {\n      ElMessage.error('' + result.message);\n    }\n  } catch (error) {\n    if (error !== 'cancel') {\n      ElMessage.error('' + error.message);\n    }\n  }\n};\n\n// \nconst handleReloadPlugin = async (plugin) => {\n  plugin.reloading = true;\n  try {\n    const result = await pluginAPI.reloadPlugin(plugin.name);\n    if (result.code === 0) {\n      ElMessage.success(`${plugin.displayName} `);\n      await loadPlugins();\n    } else {\n      ElMessage.error('' + result.message);\n    }\n  } catch (error) {\n    ElMessage.error('' + error.message);\n  } finally {\n    plugin.reloading = false;\n  }\n};\n\n// \nconst handleTogglePlugin = async (plugin) => {\n  plugin.toggling = true;\n  try {\n    const result = await pluginAPI.togglePlugin(plugin.name, plugin.enabled);\n    if (result.code === 0) {\n      ElMessage.success(`${plugin.displayName} ${plugin.enabled ? '' : ''}`);\n    } else {\n      ElMessage.error('' + result.message);\n      plugin.enabled = !plugin.enabled; // \n    }\n  } catch (error) {\n    ElMessage.error('' + error.message);\n    plugin.enabled = !plugin.enabled; // \n  } finally {\n    plugin.toggling = false;\n  }\n};\n// \nconst handleViewPlugin = async (plugin) => {\n  currentPlugin.value = plugin;\n  detailDialogVisible.value = true;\n  \n  try {\n    const result = await pluginAPI.getPluginTools(plugin.name);\n    if (result.code === 0) {\n      pluginTools.value = result.data.tools;\n      // \n      activeCollapseNames.value = result.data.tools.map(g => g.group);\n    }\n  } catch (error) {\n    ElMessage.error('' + error.message);\n  }\n};\n\n// \nconst handleConfigPlugin = async (plugin) => {\n  currentPlugin.value = plugin;\n  \n  try {\n    const result = await pluginAPI.getPluginConfig(plugin.name);\n    if (result.code === 0) {\n      configJsonStr.value = JSON.stringify(result.data, null, 2);\n      configDialogVisible.value = true;\n    } else {\n      ElMessage.error('' + result.message);\n    }\n  } catch (error) {\n    ElMessage.error('' + error.message);\n  }\n};\n\n// \nconst handleSaveConfig = async () => {\n  try {\n    const config = JSON.parse(configJsonStr.value);\n    savingConfig.value = true;\n    \n    const result = await pluginAPI.updatePluginConfig(currentPlugin.value.name, config);\n    if (result.code === 0) {\n      ElMessage.success('');\n      configDialogVisible.value = false;\n      \n      // \n      ElMessageBox.confirm(\n        '',\n        '',\n        {\n          confirmButtonText: '',\n          cancelButtonText: '',\n          type: 'info'\n        }\n      ).then(async () => {\n        await handleReloadPlugin(currentPlugin.value);\n      }).catch(() => {});\n    } else {\n      ElMessage.error('' + result.message);\n    }\n  } catch (error) {\n    if (error instanceof SyntaxError) {\n      ElMessage.error('JSON ');\n    } else {\n      ElMessage.error('' + error.message);\n    }\n  } finally {\n    savingConfig.value = false;\n  }\n};\n\n// \nconst handleDebugTool = (tool) => {\n  currentTool.value = tool;\n  debugParams.value = '{}';\n  debugResult.value = null;\n  debugDialogVisible.value = true;\n};\n\n// \nconst fillExampleParams = () => {\n  if (!currentTool.value?.parameters?.properties) {\n    debugParams.value = '{}';\n    return;\n  }\n\n  const example = {};\n  const props = currentTool.value.parameters.properties;\n  \n  for (const [key, prop] of Object.entries(props)) {\n    // \n    switch (prop.type) {\n      case 'string':\n        if (prop.enum && prop.enum.length > 0) {\n          example[key] = prop.enum[0];\n        } else if (key.toLowerCase().includes('url')) {\n          example[key] = 'https://example.com';\n        } else if (key.toLowerCase().includes('path')) {\n          example[key] = '/path/to/file';\n        } else if (key.toLowerCase().includes('query') || key.toLowerCase().includes('search')) {\n          example[key] = '';\n        } else {\n          example[key] = '';\n        }\n        break;\n      case 'number':\n      case 'integer':\n        example[key] = prop.minimum || 0;\n        break;\n      case 'boolean':\n        example[key] = true;\n        break;\n      case 'array':\n        example[key] = [];\n        break;\n      case 'object':\n        example[key] = {};\n        break;\n      default:\n        example[key] = null;\n    }\n  }\n  \n  debugParams.value = JSON.stringify(example, null, 2);\n};\n\n// \nconst handleExecuteDebug = async () => {\n  try {\n    const params = JSON.parse(debugParams.value);\n    debugging.value = true;\n    debugResult.value = null;\n    \n    const result = await pluginAPI.debugTool(\n      currentPlugin.value.name,\n      currentTool.value.name,\n      params\n    );\n    \n    if (result.code === 0) {\n      debugResult.value = result.data;\n    } else {\n      ElMessage.error('' + result.message);\n    }\n  } catch (error) {\n    if (error instanceof SyntaxError) {\n      ElMessage.error(' JSON ');\n    } else {\n      ElMessage.error('' + error.message);\n    }\n  } finally {\n    debugging.value = false;\n  }\n};\n\n// \nonMounted(() => {\n  loadPlugins();\n});\n</script>\n\n<style scoped lang=\"scss\">\n.plugins-view {\n  width: 100%;\n  height: 100%;\n}\n\n.loading-container {\n  padding: 24px;\n}\n\n.skeleton-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n\n  .skeleton-title {\n    width: 200px;\n    height: 32px;\n    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\n    background-size: 200% 100%;\n    animation: loading 1.5s ease-in-out infinite;\n    border-radius: 4px;\n  }\n\n  .skeleton-actions {\n    display: flex;\n    gap: 12px;\n\n    .skeleton-button {\n      width: 100px;\n      height: 32px;\n      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\n      background-size: 200% 100%;\n      animation: loading 1.5s ease-in-out infinite;\n      border-radius: 4px;\n    }\n  }\n}\n\n.plugins-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));\n  gap: 16px;\n}\n\n.content-container {\n  padding: 24px;\n  animation: fadeIn 0.3s ease;\n}\n\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n\n  h1 {\n    margin: 0;\n    font-size: 24px;\n    font-weight: 600;\n    color: #303133;\n  }\n\n  .header-actions {\n    display: flex;\n    gap: 12px;\n  }\n}\n\n.stats-row {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 16px;\n  margin-bottom: 24px;\n\n  .stat-card {\n    cursor: default;\n\n    :deep(.el-card__body) {\n      display: flex;\n      align-items: center;\n      gap: 16px;\n      padding: 20px;\n    }\n\n    .stat-icon {\n      width: 56px;\n      height: 56px;\n      border-radius: 12px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n\n    .stat-content {\n      flex: 1;\n\n      .stat-value {\n        font-size: 28px;\n        font-weight: 600;\n        color: #303133;\n        line-height: 1;\n        margin-bottom: 8px;\n      }\n\n      .stat-label {\n        font-size: 14px;\n        color: #909399;\n      }\n    }\n  }\n}\n\n.plugins-list {\n  display: grid;\n  gap: 16px;\n\n  .plugin-card {\n    transition: all 0.3s ease;\n\n    &:hover {\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n    }\n\n    &.disabled {\n      opacity: 0.6;\n    }\n\n    :deep(.el-card__body) {\n      padding: 20px;\n    }\n\n    .plugin-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: flex-start;\n      margin-bottom: 16px;\n\n      .plugin-info {\n        flex: 1;\n\n        .plugin-title-row {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 8px;\n\n          .plugin-name {\n            margin: 0;\n            font-size: 18px;\n            font-weight: 600;\n            color: #303133;\n            display: flex;\n            align-items: center;\n          }\n        }\n\n        .plugin-description {\n          margin: 0 0 12px 0;\n          font-size: 14px;\n          color: #606266;\n          line-height: 1.6;\n        }\n\n        .plugin-meta {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          flex-wrap: wrap;\n\n          .meta-item {\n            display: flex;\n            align-items: center;\n            gap: 4px;\n            font-size: 13px;\n            color: #909399;\n          }\n        }\n      }\n    }\n\n    .plugin-actions {\n      display: flex;\n      gap: 8px;\n      padding-top: 16px;\n      border-top: 1px solid #ebeef5;\n    }\n  }\n}\n\n.plugin-detail {\n  max-height: 70vh;\n  overflow-y: auto;\n  overflow-x: hidden;\n\n  // \n  &::-webkit-scrollbar {\n    width: 6px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f1f1f1;\n    border-radius: 3px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #c1c1c1;\n    border-radius: 3px;\n\n    &:hover {\n      background: #a8a8a8;\n    }\n  }\n\n  .tools-section {\n    margin-top: 24px;\n\n    h4 {\n      margin: 0 0 16px 0;\n      font-size: 16px;\n      font-weight: 600;\n      color: #303133;\n    }\n\n    .tool-item {\n      padding: 12px;\n      border-bottom: 1px solid #ebeef5;\n\n      &:last-child {\n        border-bottom: none;\n      }\n\n      .tool-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 8px;\n\n        h5 {\n          margin: 0;\n          font-size: 14px;\n          font-weight: 600;\n          color: #303133;\n        }\n      }\n\n      .tool-description {\n        margin: 0 0 8px 0;\n        font-size: 13px;\n        color: #606266;\n      }\n    }\n  }\n}\n\n.config-editor {\n  .config-textarea {\n    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n    font-size: 13px;\n  }\n}\n\n.dialog-content {\n  max-height: 60vh;\n  overflow-y: auto;\n  padding: 0;\n}\n\n.debug-dialog {\n  :deep(.el-dialog__body) {\n    padding: 0 !important;\n  }\n\n  :deep(.el-alert__content) {\n    flex-grow: 1;\n  }\n}\n\n.debug-container {\n  padding: 20px;\n}\n\n.result-container {\n  margin-top: 16px;\n}\n\n  .tool-info-card,\n  .params-schema-card,\n  .params-input-card {\n    margin-bottom: 16px;\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n\n  .result-card {\n    margin-top: 16px;\n    margin-bottom: 0;\n  }\n\n  .card-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-weight: 600;\n    color: #303133;\n  }\n\n  .tool-info {\n    .info-row {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      margin-bottom: 12px;\n\n      &:last-child {\n        margin-bottom: 0;\n      }\n\n      label {\n        min-width: 80px;\n        font-weight: 600;\n        color: #606266;\n      }\n\n      span {\n        color: #303133;\n      }\n    }\n  }\n\n  .params-schema {\n    .param-item {\n      padding: 12px;\n      background: #f5f7fa;\n      border-radius: 4px;\n      margin-bottom: 12px;\n\n      &:last-child {\n        margin-bottom: 0;\n      }\n\n      .param-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 8px;\n\n        .param-name {\n          font-weight: 600;\n          color: #303133;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n      }\n\n      .param-description {\n        font-size: 13px;\n        color: #606266;\n        margin-bottom: 4px;\n      }\n\n      .param-enum,\n      .param-items {\n        font-size: 12px;\n        color: #909399;\n        margin-top: 4px;\n      }\n    }\n  }\n\n  .params-textarea {\n    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n    font-size: 13px;\n  }\n  .debug-result-wrapper {\n    border-radius: 8px;\n    overflow: hidden;\n    border: 1px solid;\n    transition: all 0.3s ease;\n\n    &.status-success {\n      border-color: #e1f3d8;\n      background-color: #f0f9eb;\n\n      .result-header {\n        background-color: #e1f3d8;\n        color: #67c23a;\n      }\n    }\n\n    &.status-error {\n      border-color: #fde2e2;\n      background-color: #fef0f0;\n\n      .result-header {\n        background-color: #fde2e2;\n        color: #f56c6c;\n      }\n    }\n\n    .result-header {\n      padding: 10px 16px;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      font-size: 14px;\n      font-weight: 600;\n\n      .status-indicator {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        \n        .icon {\n          display: flex;\n          align-items: center;\n        }\n      }\n\n      .execution-meta {\n        font-size: 12px;\n        opacity: 0.9;\n      }\n    }\n\n    .result-body {\n      padding: 16px;\n    }\n\n    .plugin-info-bar {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      margin-bottom: 12px;\n      font-size: 13px;\n      color: #606266;\n      padding-bottom: 12px;\n      border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n\n      .info-item {\n        display: flex;\n        gap: 6px;\n\n        .label {\n          color: #909399;\n        }\n        \n        .value {\n          font-weight: 500;\n          color: #303133;\n        }\n      }\n\n      .divider {\n        color: #dcdfe6;\n      }\n    }\n\n    .json-viewer-container {\n      .viewer-label {\n        font-size: 12px;\n        color: #909399;\n        margin-bottom: 8px;\n      }\n\n      .json-content {\n        background-color: #ffffff;\n        border-radius: 4px;\n        border: 1px solid #dcdfe6;\n        padding: 12px;\n        \n        pre {\n          margin: 0;\n          font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n          font-size: 12px;\n          color: #303133;\n          white-space: pre-wrap;\n          word-break: break-all;\n          max-height: 300px;\n          overflow-y: auto;\n\n          &::-webkit-scrollbar {\n            width: 6px;\n            height: 6px;\n          }\n\n          &::-webkit-scrollbar-thumb {\n            background: #c0c4cc;\n            border-radius: 3px;\n          }\n        }\n      }\n    }\n\n    .error-content {\n      .error-message-box {\n        display: flex;\n        align-items: flex-start;\n        gap: 8px;\n        color: #f56c6c;\n        font-weight: 600;\n        margin-bottom: 16px;\n        font-size: 14px;\n        \n        .error-icon {\n          margin-top: 2px;\n        }\n      }\n\n      .error-stack {\n        .stack-label {\n          font-size: 12px;\n          color: #909399;\n          margin-bottom: 8px;\n        }\n\n        .stack-content {\n          margin: 0;\n          padding: 12px;\n          background-color: #fff;\n          border: 1px solid #fde2e2;\n          border-radius: 4px;\n          font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n          font-size: 11px;\n          color: #f56c6c;\n          overflow-x: auto;\n          white-space: pre;\n        }\n      }\n    }\n  }\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes loading {\n  0% {\n    background-position: 200% 0;\n  }\n  100% {\n    background-position: -200% 0;\n  }\n}\n</style>\n","<template>\n  <div class=\"presets-view\">\n    <!--  -->\n    <div v-if=\"loading\" class=\"loading-container\">\n      <div class=\"skeleton-header\">\n        <div class=\"skeleton-title\"></div>\n        <div class=\"skeleton-actions\">\n          <div class=\"skeleton-button\" v-for=\"i in 3\" :key=\"i\"></div>\n        </div>\n      </div>\n      <div class=\"skeleton-table\">\n        <div class=\"skeleton-row\" v-for=\"i in 6\" :key=\"i\">\n          <div class=\"skeleton-cell\" v-for=\"j in 5\" :key=\"j\"></div>\n        </div>\n      </div>\n    </div>\n\n    <transition name=\"fade\" mode=\"out-in\">\n      <div v-if=\"!loading\" class=\"content-container\">\n        <!--  -->\n        <div class=\"page-header\">\n          <h1></h1>\n          <div class=\"header-actions\">\n            <el-button\n              v-if=\"selectedPresets && selectedPresets.length > 0\"\n              type=\"danger\"\n              :icon=\"Delete\"\n              @click=\"handleBatchDelete\"\n            >\n               ({{ selectedPresets?.length || 0 }})\n            </el-button>\n            <el-button\n              type=\"primary\"\n              :icon=\"Refresh\"\n              :loading=\"refreshing\"\n              @click=\"handleRefresh\"\n            >\n              \n            </el-button>\n            <el-button\n              type=\"primary\"\n              :icon=\"Plus\"\n              @click=\"handleCreate\"\n            >\n              \n            </el-button>\n            <el-button\n              type=\"success\"\n              :icon=\"Upload\"\n              @click=\"handleImport\"\n            >\n              \n            </el-button>\n          </div>\n        </div>\n\n        <!--  -->\n        <div class=\"stats-bar\">\n          <div class=\"stat-item\">\n            <span class=\"stat-label\"></span>\n            <span class=\"stat-value\">{{ totalCount }} </span>\n          </div>\n          <div class=\"stat-item\">\n            <span class=\"stat-label\"></span>\n            <span class=\"stat-value\">{{ presetsStore.countByCategory.common }} </span>\n          </div>\n          <div class=\"stat-item\">\n            <span class=\"stat-label\"></span>\n            <span class=\"stat-value\">{{ presetsStore.countByCategory.recommended }} </span>\n          </div>\n          <div class=\"stat-item\">\n            <span class=\"stat-label\"></span>\n            <span class=\"stat-value\">{{ presetsStore.countByCategory.hidden }} </span>\n          </div>\n          <div class=\"stat-item\">\n            <span class=\"stat-label\"></span>\n            <span class=\"stat-value\">{{ presetsStore.countBySource['built-in'] }} </span>\n          </div>\n          <div class=\"stat-item\">\n            <span class=\"stat-label\"></span>\n            <span class=\"stat-value\">{{ presetsStore.countBySource.custom }} </span>\n          </div>\n        </div>\n\n        <!--  -->\n        <div class=\"search-filter-bar\">\n          <div class=\"search-section\">\n            <el-input\n              v-model=\"searchKeyword\"\n              placeholder=\"...\"\n              :prefix-icon=\"Search\"\n              clearable\n              @input=\"handleSearch\"\n              style=\"width: 300px\"\n            />\n          </div>\n          <div class=\"filter-section\">\n            <el-select\n              v-model=\"categoryFilter\"\n              placeholder=\"\"\n              clearable\n              style=\"width: 120px\"\n              @change=\"handleFilterChange\"\n            >\n              <el-option label=\"\" value=\"common\" />\n              <el-option label=\"\" value=\"recommended\" />\n              <el-option label=\"\" value=\"hidden\" />\n            </el-select>\n            <el-select\n              v-model=\"sourceFilter\"\n              placeholder=\"\"\n              clearable\n              style=\"width: 120px\"\n              @change=\"handleFilterChange\"\n            >\n              <el-option label=\"\" value=\"built-in\" />\n              <el-option label=\"\" value=\"custom\" />\n            </el-select>\n          </div>\n        </div>\n\n        <!--  -->\n        <div class=\"presets-list\">\n          <div v-if=\"(!displayedPresets || displayedPresets.length === 0) && !loading\" class=\"empty-state\">\n            <el-empty description=\"\">\n              <el-button type=\"primary\" :icon=\"Plus\" @click=\"handleCreate\">\n                \n              </el-button>\n            </el-empty>\n          </div>\n\n          <!--  -->\n          <div v-else class=\"presets-waterfall\" ref=\"waterfallRef\">\n            <preset-card\n              v-for=\"preset in displayedPresets\"\n              :key=\"getPresetId(preset)\"\n              :preset=\"preset\"\n              :selected=\"isPresetSelected(preset)\"\n              @select=\"(selected) => handlePresetSelect(getPresetId(preset), selected)\"\n              @edit=\"handleEdit\"\n              @delete=\"handleDelete\"\n              @export=\"handleExport\"\n            />\n          </div>\n\n          <!--  -->\n          <div v-if=\"shouldShowTrigger\" ref=\"loadTrigger\" class=\"load-trigger\">\n            <div v-if=\"loadingMore\" class=\"loading-more\">\n              <el-skeleton :rows=\"2\" animated />\n            </div>\n            <div v-else-if=\"loadError\" class=\"load-error\">\n              <el-result icon=\"warning\" title=\"\" sub-title=\"\">\n                <template #extra>\n                  <el-button type=\"primary\" @click=\"retryLoad\"></el-button>\n                </template>\n              </el-result>\n            </div>\n            <div v-else class=\"load-placeholder\">\n              <!--  Intersection Observer -->\n            </div>\n          </div>\n\n          <!--  -->\n          <div v-if=\"!hasMore && displayedPresets.length > 0\" class=\"no-more\">\n            <el-divider>\n              <span class=\"no-more-text\"></span>\n            </el-divider>\n          </div>\n\n          <!--  -->\n          <div v-if=\"loading\" class=\"loading-more\">\n            <el-skeleton :rows=\"3\" animated />\n          </div>\n        </div>\n      </div>\n    </transition>\n\n    <!--  -->\n    <preset-editor\n      :visible=\"editorVisible\"\n      :mode=\"editorMode\"\n      :preset=\"editorPreset\"\n      @close=\"handleEditorClose\"\n      @submit=\"handleEditorSubmit\"\n    />\n\n    <!--  -->\n    <input\n      ref=\"fileInput\"\n      type=\"file\"\n      accept=\".json\"\n      style=\"display: none\"\n      @change=\"handleFileSelect\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport PresetCard from '@/components/settings/PresetCard.vue';\nimport PresetEditor from '@/components/settings/PresetEditor.vue';\nimport { usePresetsStore } from '@/stores/presetsStore.js';\nimport {\n  Delete,\n  Plus,\n  Refresh,\n  Search,\n  Upload\n} from '@element-plus/icons-vue';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nimport { computed, nextTick, onMounted, onUnmounted, ref, watch } from 'vue';\n\nconst presetsStore = usePresetsStore();\n\nconst loading = ref(true);\nconst refreshing = ref(false);\nconst searchKeyword = ref('');\nconst categoryFilter = ref('');\nconst sourceFilter = ref('');\nconst selectedPresets = ref([]);\nconst editorVisible = ref(false);\nconst editorMode = ref('create');\nconst editorPreset = ref(null);\nconst fileInput = ref(null);\nconst waterfallRef = ref(null);\nconst loadTrigger = ref(null);\n\n// \nconst currentPage = ref(1);\nconst pageSize = ref(50); // \nconst hasMore = computed(() => presetsStore.pagination?.hasMore || false);\n\n// \nconst shouldShowTrigger = computed(() => {\n  return hasMore.value || loadingMore.value;\n});\nconst loadingMore = ref(false);\nconst loadError = ref(false);\n\n// \nconst allPresets = computed(() => presetsStore.allPresets || []);\nconst totalCount = computed(() => presetsStore.totalCount || 0);\n\n//  store \nconst displayedPresets = computed(() => {\n  return allPresets.value || [];\n});\n\n// ID\nconst getPresetId = (preset) => {\n  return preset.name; //  name \n};\n\n// \nconst isPresetSelected = (preset) => {\n  const presetId = getPresetId(preset);\n  return presetId && selectedPresets.value.includes(presetId);\n};\n\n// \nlet searchTimeout = null;\n\n// \nwatch([searchKeyword], () => {\n  // \n  if (searchTimeout) {\n    clearTimeout(searchTimeout);\n  }\n  searchTimeout = setTimeout(() => {\n    handleFilterChange();\n  }, 500); // 500ms \n});\n\n// \nwatch([categoryFilter, sourceFilter], () => {\n  handleFilterChange();\n});\n\n//  hasMore \nwatch(hasMore, (newHasMore, oldHasMore) => {\n  console.log('hasMore changed:', { newHasMore, oldHasMore });\n  if (!newHasMore) {\n    cleanupObserver();\n  } else if (newHasMore && !oldHasMore) {\n    // \n    nextTick(() => {\n      setupInfiniteScroll();\n    });\n  }\n});\n\n// \nconst handleFilterChange = async () => {\n  currentPage.value = 1;\n  cleanupObserver(); // \n  await fetchPresetsWithFilters();\n  //  DOM \n  await nextTick();\n  if (hasMore.value) {\n    setupInfiniteScroll();\n  }\n};\n\n// \nconst fetchPresetsWithFilters = async () => {\n  const params = {\n    start: 0,\n    nums: pageSize.value\n  };\n  \n  if (searchKeyword.value) {\n    params.keyword = searchKeyword.value;\n  }\n  \n  if (categoryFilter.value) {\n    params.category = categoryFilter.value;\n  }\n  \n  if (sourceFilter.value) {\n    params.source = sourceFilter.value;\n  }\n  \n  try {\n    await presetsStore.fetchPresets(params);\n  } catch (error) {\n    ElMessage.error('' + error.message);\n  }\n};\n\n// \nconst loadMore = async () => {\n  console.log('loadMore called', {\n    hasMore: hasMore.value,\n    loadingMore: loadingMore.value,\n    pagination: presetsStore.pagination\n  });\n  \n  if (hasMore.value && !loadingMore.value) {\n    loadingMore.value = true;\n    loadError.value = false;\n    \n    const params = {\n      start: presetsStore.pagination.start + presetsStore.pagination.nums,\n      nums: pageSize.value\n    };\n    \n    if (searchKeyword.value) {\n      params.keyword = searchKeyword.value;\n    }\n    \n    if (categoryFilter.value) {\n      params.category = categoryFilter.value;\n    }\n    \n    if (sourceFilter.value) {\n      params.source = sourceFilter.value;\n    }\n    \n    console.log('Loading more with params:', params);\n    \n    try {\n      await presetsStore.fetchPresets(params, true); //  append \n      console.log('Load more successful');\n    } catch (error) {\n      console.error('Load more failed:', error);\n      loadError.value = true;\n      ElMessage.error('' + error.message);\n    } finally {\n      loadingMore.value = false;\n    }\n  } else {\n    console.log('loadMore conditions not met', {\n      hasMore: hasMore.value,\n      loadingMore: loadingMore.value\n    });\n  }\n};\n\n// \nconst retryLoad = () => {\n  loadError.value = false;\n  loadMore();\n};\n\n// \nconst handlePresetSelect = (presetId, selected) => {\n  if (selected) {\n    if (!selectedPresets.value.includes(presetId)) {\n      selectedPresets.value.push(presetId);\n    }\n  } else {\n    const index = selectedPresets.value.indexOf(presetId);\n    if (index > -1) {\n      selectedPresets.value.splice(index, 1);\n    }\n  }\n};\n\n// \nconst handleSearch = () => {\n  //  watch  handleFilterChange\n};\n\n// \nconst handleRefresh = async () => {\n  refreshing.value = true;\n  try {\n    await presetsStore.fetchPresets();\n    ElMessage.success('');\n  } catch (error) {\n    ElMessage.error('' + error.message);\n  } finally {\n    refreshing.value = false;\n  }\n};\n\n// \nconst handleCreate = () => {\n  editorMode.value = 'create';\n  editorPreset.value = null;\n  editorVisible.value = true;\n};\n\n// \nconst handleEdit = (preset) => {\n  editorMode.value = 'edit';\n  editorPreset.value = preset;\n  editorVisible.value = true;\n};\n\n// \nconst handleDelete = async (preset) => {\n  try {\n    await ElMessageBox.confirm(\n      ` \"${preset.name}\" `,\n      '',\n      {\n        confirmButtonText: '',\n        cancelButtonText: '',\n        type: 'warning'\n      }\n    );\n\n    const presetId = preset.name;\n    if (!presetId) {\n      throw new Error('');\n    }\n    await presetsStore.deletePreset(presetId);\n    ElMessage.success('');\n  } catch (error) {\n    if (error !== 'cancel') {\n      ElMessage.error('' + error.message);\n    }\n  }\n};\n\n// \nconst handleBatchDelete = async () => {\n  try {\n    await ElMessageBox.confirm(\n      ` ${selectedPresets.value.length} `,\n      '',\n      {\n        confirmButtonText: '',\n        cancelButtonText: '',\n        type: 'warning'\n      }\n    );\n\n    const results = await presetsStore.batchDeletePresets(selectedPresets.value);\n    const successCount = results.filter(r => r.success).length;\n    ElMessage.success(` ${successCount} `);\n    selectedPresets.value = [];\n  } catch (error) {\n    if (error !== 'cancel') {\n      ElMessage.error('' + error.message);\n    }\n  }\n};\n\n// \nconst handleExport = async (preset) => {\n  try {\n    const presetId = preset.name;\n    if (!presetId) {\n      throw new Error('');\n    }\n    await presetsStore.exportPreset(presetId);\n    ElMessage.success('');\n  } catch (error) {\n    ElMessage.error('' + error.message);\n  }\n};\n\n// \nconst handleImport = () => {\n  fileInput.value?.click();\n};\n\n// \nconst handleFileSelect = async (event) => {\n  const file = event.target.files[0];\n  if (!file) return;\n\n  try {\n    await presetsStore.importPreset(file);\n    ElMessage.success('');\n    // \n    event.target.value = '';\n  } catch (error) {\n    ElMessage.error('' + error.message);\n  }\n};\n\n// \nconst handleEditorClose = () => {\n  editorVisible.value = false;\n};\n\n// \nconst handleEditorSubmit = async ({ data, mode }) => {\n  try {\n    if (mode === 'create') {\n      await presetsStore.createPreset(data);\n      ElMessage.success('');\n      // \n      editorVisible.value = false;\n    } else {\n      // \n      const presetId = editorPreset.value.name;\n      if (!presetId) {\n        ElMessage.error('');\n        return; // \n      }\n      await presetsStore.updatePreset(presetId, data);\n      ElMessage.success('');\n      // \n      editorVisible.value = false;\n    }\n  } catch (error) {\n    ElMessage.error(mode === 'create' ? '' : '' + error.message);\n    // toast\n  }\n};\n\n// Intersection Observer \nlet observer = null;\n\n// \nconst setupInfiniteScroll = () => {\n  console.log('setupInfiniteScroll called', {\n    loadTrigger: loadTrigger.value,\n    hasMore: hasMore.value,\n    loadingMore: loadingMore.value\n  });\n  \n  if (!loadTrigger.value) {\n    console.log('loadTrigger element not found');\n    return;\n  }\n\n  //  Intersection Observer\n  observer = new IntersectionObserver(\n    (entries) => {\n      const entry = entries[0];\n      console.log('Observer triggered', {\n        isIntersecting: entry.isIntersecting,\n        hasMore: hasMore.value,\n        loadingMore: loadingMore.value\n      });\n      \n      // \n      if (entry.isIntersecting && hasMore.value && !loadingMore.value) {\n        console.log('Loading more data...');\n        loadMore();\n      }\n    },\n    {\n      //  100px \n      rootMargin: '100px',\n      threshold: 0.1\n    }\n  );\n\n  observer.observe(loadTrigger.value);\n  console.log('Observer set up successfully');\n};\n\n// \nconst cleanupObserver = () => {\n  if (observer) {\n    observer.disconnect();\n    observer = null;\n  }\n};\n\n// \nonMounted(async () => {\n  loading.value = true;\n  try {\n    // \n    await fetchPresetsWithFilters();\n    await new Promise(resolve => setTimeout(resolve, 300));\n  } catch (error) {\n    ElMessage.error('' + error.message);\n  } finally {\n    loading.value = false;\n    // \n    await nextTick(); //  DOM \n    setupInfiniteScroll();\n  }\n});\n\n// \nonUnmounted(() => {\n  cleanupObserver();\n});\n</script>\n\n<style scoped lang=\"scss\">\n// \n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n\n\n\n.presets-view {\n  padding: 24px;\n  max-width: 1400px;\n  margin: 0 auto;\n}\n\n.loading-container {\n  .skeleton-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 24px;\n\n    .skeleton-title {\n      width: 200px;\n      height: 32px;\n      border-radius: 4px;\n      background: linear-gradient(90deg, #f2f2f2 25%, #e6e6e6 50%, #f2f2f2 75%);\n      background-size: 200% 100%;\n      animation: skeleton-loading 1.5s ease-in-out infinite;\n    }\n\n    .skeleton-actions {\n      display: flex;\n      gap: 12px;\n\n      .skeleton-button {\n        width: 120px;\n        height: 32px;\n        border-radius: 4px;\n        background: linear-gradient(90deg, #f2f2f2 25%, #e6e6e6 50%, #f2f2f2 75%);\n        background-size: 200% 100%;\n        animation: skeleton-loading 1.5s ease-in-out infinite;\n      }\n    }\n  }\n\n  .skeleton-table {\n    border-radius: 8px;\n    overflow: hidden;\n    border: 1px solid #ebeef5;\n\n    .skeleton-row {\n      display: flex;\n      height: 120px;\n      border-bottom: 1px solid #ebeef5;\n\n      &:last-child {\n        border-bottom: none;\n      }\n\n      .skeleton-cell {\n        flex: 1;\n        margin: 12px;\n        border-radius: 4px;\n        background: linear-gradient(90deg, #f2f2f2 25%, #e6e6e6 50%, #f2f2f2 75%);\n        background-size: 200% 100%;\n        animation: skeleton-loading 1.5s ease-in-out infinite;\n      }\n    }\n  }\n}\n\n@keyframes skeleton-loading {\n  0% {\n    background-position: -200% 0;\n  }\n  100% {\n    background-position: 200% 0;\n  }\n}\n\n.content-container {\n  width: 100%;\n}\n\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n\n  h1 {\n    margin: 0;\n    font-size: 24px;\n    font-weight: 600;\n    color: #303133;\n  }\n\n  .header-actions {\n    display: flex;\n    gap: 12px;\n  }\n}\n\n.stats-bar {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n  padding: 16px 20px;\n  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n  border-radius: 12px;\n  margin-bottom: 24px;\n  border: 1px solid #e9ecef;\n\n  .stat-item {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    padding: 4px 8px;\n    border-radius: 6px;\n    background: rgba(255, 255, 255, 0.7);\n    transition: all 0.2s ease;\n\n    &:hover {\n      background: rgba(255, 255, 255, 0.9);\n      transform: translateY(-1px);\n    }\n\n    .stat-label {\n      font-size: 13px;\n      color: #606266;\n      font-weight: 500;\n    }\n\n    .stat-value {\n      font-size: 13px;\n      font-weight: 700;\n      color: #303133;\n    }\n  }\n\n  @media (max-width: 768px) {\n    gap: 12px;\n    \n    .stat-item {\n      flex: 1;\n      min-width: calc(50% - 6px);\n      justify-content: center;\n    }\n  }\n}\n\n.search-filter-bar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  gap: 16px;\n\n  .search-section {\n    flex: 1;\n  }\n\n  .filter-section {\n    display: flex;\n    gap: 12px;\n  }\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n    align-items: stretch;\n\n    .filter-section {\n      justify-content: flex-start;\n    }\n  }\n}\n\n.presets-list {\n  .empty-state {\n    padding: 48px 0;\n    background: #f9fafc;\n    border-radius: 8px;\n  }\n}\n\n.presets-waterfall {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n  gap: 16px;\n  margin-bottom: 24px;\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n\n  @media (min-width: 1200px) {\n    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));\n  }\n}\n\n.load-trigger {\n  margin: 24px 0;\n  min-height: 50px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  .load-placeholder {\n    width: 100%;\n    height: 20px;\n    background: rgba(64, 158, 255, 0.1); // \n    border: 1px dashed #409eff;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 12px;\n    color: #409eff;\n    \n    &::after {\n      content: '';\n    }\n  }\n}\n\n.loading-more {\n  margin: 24px 0;\n  \n  :deep(.el-skeleton) {\n    .el-skeleton__item {\n      background: linear-gradient(90deg, #f2f2f2 25%, #e6e6e6 50%, #f2f2f2 75%);\n      background-size: 200% 100%;\n      animation: skeleton-loading 1.5s ease-in-out infinite;\n    }\n  }\n}\n\n.load-error {\n  margin: 24px 0;\n  \n  :deep(.el-result) {\n    padding: 20px;\n    \n    .el-result__icon {\n      margin-bottom: 12px;\n    }\n    \n    .el-result__title {\n      margin-bottom: 8px;\n      font-size: 16px;\n    }\n    \n    .el-result__subtitle {\n      margin-bottom: 16px;\n      font-size: 14px;\n    }\n  }\n}\n\n.no-more {\n  margin: 32px 0;\n  \n  .no-more-text {\n    color: #909399;\n    font-size: 14px;\n    padding: 0 16px;\n    background: #f5f7fa;\n  }\n  \n  :deep(.el-divider__text) {\n    background: #f5f7fa;\n  }\n}\n\n@keyframes skeleton-loading {\n  0% {\n    background-position: -200% 0;\n  }\n  100% {\n    background-position: 200% 0;\n  }\n}\n</style>","<template>\n  <div class=\"logs-view\">\n    <div class=\"logs-header\">\n      <h2></h2>\n      <p class=\"logs-description\"></p>\n    </div>\n\n    <!--  -->\n    <el-card class=\"connection-card\" shadow=\"never\">\n      <div class=\"connection-status\">\n        <div class=\"status-indicator\" :class=\"{ 'connected': isConnected, 'disconnected': !isConnected }\">\n          <div class=\"status-dot\"></div>\n          <span>{{ isConnected ? '' : '' }}</span>\n        </div>\n        <div class=\"connection-info\">\n          <span v-if=\"isConnected && stats\">\n            : {{ formatUptime(stats.service?.uptime) }} | \n            : {{ stats.service?.totalLogsSent || 0 }}\n          </span>\n          <span v-else-if=\"isConnected\">\n            ...\n          </span>\n          <span v-else>\n            \n          </span>\n        </div>\n      </div>\n      \n      <!--  -->\n      <div class=\"debug-info\" style=\"margin-top: 12px; font-size: 12px; color: #909399;\">\n        <div>: {{ isConnected ? ' ' : ' ' }}</div>\n        <div>: {{ logs.length }} </div>\n        <div>: {{ filteredLogs.length }} </div>\n        <div>logStore: {{ logStore.isInitialized ? '' : '' }}</div>\n      </div>\n    </el-card>\n\n    <!--  -->\n    <el-card class=\"control-panel\" shadow=\"never\">\n      <div class=\"control-row\">\n        <div class=\"control-group\">\n          <el-button @click=\"clearLogs\" :disabled=\"logs.length === 0\">\n            \n          </el-button>\n          <el-button @click=\"exportLogs\" :disabled=\"logs.length === 0\">\n            \n          </el-button>\n        </div>\n        \n        <div class=\"filter-group\">\n          <el-select v-model=\"filterLevel\" placeholder=\"\" style=\"width: 120px\">\n            <el-option label=\"\" value=\"\"></el-option>\n            <el-option label=\"ERROR\" value=\"ERROR\"></el-option>\n            <el-option label=\"WARN\" value=\"WARN\"></el-option>\n            <el-option label=\"MARK\" value=\"MARK\"></el-option>\n            <el-option label=\"INFO\" value=\"INFO\"></el-option>\n            <el-option label=\"DEBUG\" value=\"DEBUG\"></el-option>\n          </el-select>\n          \n          <el-select v-model=\"filterModule\" placeholder=\"\" style=\"width: 120px\">\n            <el-option label=\"\" value=\"\"></el-option>\n            <el-option label=\"llm\" value=\"llm\"></el-option>\n            <el-option label=\"onebot\" value=\"onebot\"></el-option>\n            <el-option label=\"system\" value=\"system\"></el-option>\n          </el-select>\n          \n          <el-input\n            v-model=\"searchKeyword\"\n            placeholder=\"\"\n            style=\"width: 200px\"\n            clearable\n            @keyup.enter=\"performSearch\"\n          >\n            <template #append>\n              <el-button @click=\"performSearch\" :icon=\"Search\"></el-button>\n            </template>\n          </el-input>\n        </div>\n      </div>\n    </el-card>\n\n    <!--  -->\n    <el-card class=\"logs-container\" shadow=\"never\">\n      <div class=\"logs-header-row\">\n        <span class=\"logs-count\"> {{ filteredLogs.length }} </span>\n        <div class=\"logs-controls\">\n          <el-switch\n            v-model=\"autoScroll\"\n            active-text=\"\"\n            inactive-text=\"\"\n          />\n          <el-button \n            size=\"small\" \n            @click=\"scrollToBottom\"\n            :disabled=\"filteredLogs.length === 0\"\n          >\n            \n          </el-button>\n        </div>\n      </div>\n      \n      <div \n        ref=\"logsContainer\" \n        class=\"logs-list\"\n        @scroll=\"handleScroll\"\n      >\n        <div \n          v-for=\"log in filteredLogs\" \n          :key=\"log.id\"\n          class=\"log-item\"\n          :class=\"[`level-${log.level.toLowerCase()}`, { 'highlighted': log.highlighted }]\"\n        >\n          <div class=\"log-header\">\n            <span class=\"log-timestamp\">{{ formatTimestamp(log.timestamp) }}</span>\n            <span class=\"log-level\" :class=\"`level-${log.level.toLowerCase()}`\">{{ log.level }}</span>\n            <span class=\"log-module\">{{ log.module }}</span>\n            <span v-if=\"log.caller\" class=\"log-caller\">{{ log.caller }}</span>\n          </div>\n          <div class=\"log-message\">\n            <span v-if=\"log.extra?.type === 'json'\" class=\"json-message\" @click=\"openJsonDialog(log)\">\n              {{ getJsonSummary(log) }}\n              <el-icon class=\"json-expand-icon\"><View /></el-icon>\n            </span>\n            <span v-else-if=\"isObjectMessage(log.message)\" class=\"object-message\" @click=\"openObjectDialog(log)\">\n              {{ getObjectSummary(log.message) }}\n              <el-icon class=\"json-expand-icon\"><View /></el-icon>\n            </span>\n            <span v-else v-html=\"log.message\"></span>\n          </div>\n          <div v-if=\"log.extra && Object.keys(getDisplayExtra(log.extra)).length > 0\" class=\"log-extra\">\n            <el-tag \n              v-for=\"(value, key) in getDisplayExtra(log.extra)\" \n              :key=\"key\"\n              size=\"small\"\n              :type=\"isObjectValue(value) ? 'warning' : 'info'\"\n              class=\"log-extra-tag\"\n              :class=\"{ 'clickable': isObjectValue(value) }\"\n              :title=\"getTagTitle(key, value)\"\n              @click=\"isObjectValue(value) ? openExtraObjectDialog(key, value, log) : null\"\n            >\n              {{ key }}: {{ formatTagValue(value) }}\n            </el-tag>\n          </div>\n        </div>\n        \n        <div v-if=\"filteredLogs.length === 0\" class=\"empty-logs\">\n          <el-empty description=\"\" />\n        </div>\n      </div>\n    </el-card>\n\n    <!-- JSON  -->\n    <el-dialog \n      v-model=\"jsonDialogVisible\" \n      :title=\"getDialogTitle()\" \n      width=\"800px\" \n      class=\"json-dialog\"\n    >\n      <div class=\"json-content\">\n        <div class=\"json-header\">\n          <span class=\"json-timestamp\">{{ selectedLog?.timestamp }}</span>\n          <span class=\"json-level\" :class=\"`level-${selectedLog?.level?.toLowerCase()}`\">\n            {{ selectedLog?.level }}\n          </span>\n          <span class=\"json-module\">{{ selectedLog?.module }}</span>\n        </div>\n        <div class=\"json-body\">\n          <pre class=\"json-pre\">{{ formatJsonContent(selectedLog) }}</pre>\n        </div>\n      </div>\n      <template #footer>\n        <el-button @click=\"copyJsonContent\"></el-button>\n        <el-button type=\"primary\" @click=\"jsonDialogVisible = false\"></el-button>\n      </template>\n    </el-dialog>\n\n    <!--  -->\n    <el-dialog v-model=\"exportDialogVisible\" title=\"\" width=\"500px\">\n      <el-form :model=\"exportForm\" label-width=\"100px\">\n        <el-form-item label=\"\">\n          <el-radio-group v-model=\"exportForm.format\">\n            <el-radio label=\"json\">JSON</el-radio>\n            <el-radio label=\"csv\">CSV</el-radio>\n            <el-radio label=\"txt\">TXT</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        \n        <el-form-item label=\"\">\n          <el-input-number \n            v-model=\"exportForm.maxRecords\" \n            :min=\"1\" \n            :max=\"50000\"\n            style=\"width: 100%\"\n          />\n        </el-form-item>\n        \n        <el-form-item label=\"\">\n          <el-switch v-model=\"exportForm.includeMetadata\" />\n        </el-form-item>\n      </el-form>\n      \n      <template #footer>\n        <el-button @click=\"exportDialogVisible = false\"></el-button>\n        <el-button type=\"primary\" @click=\"confirmExport\" :loading=\"exportLoading\">\n          \n        </el-button>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup>\nimport { useLogStore } from '@/stores/logStore.js'\nimport { Search, View } from '@element-plus/icons-vue'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { computed, nextTick, onMounted, onUnmounted, ref, watch } from 'vue'\n\n// store\nconst logStore = useLogStore()\n\n// store\nconst logs = computed(() => {\n  const logsData = logStore.logs || []\n  console.log('LogsView: :', logsData.length)\n  return logsData\n})\nconst isConnected = computed(() => logStore.isConnected)\nconst stats = computed(() => logStore.stats)\nconst search = logStore.search\nconst exportLogsData = logStore.exportLogs\nconst getStats = logStore.getStats\nconst clearLogsData = logStore.clearLogs\n\n// \nconst filterLevel = ref('')\nconst filterModule = ref('')\nconst searchKeyword = ref('')\n\n// UI \nconst autoScroll = ref(true)\nconst logsContainer = ref(null)\nconst exportDialogVisible = ref(false)\nconst exportLoading = ref(false)\nconst jsonDialogVisible = ref(false)\nconst selectedLog = ref(null)\nconst extraObjectKey = ref(null)\n\n// \nconst exportForm = ref({\n  format: 'json',\n  maxRecords: 10000,\n  includeMetadata: true\n})\n\n// \nconst filteredLogs = computed(() => {\n  let filtered = logs.value || []\n  console.log('filteredLogs computed :', filtered.length)\n\n  if (filterLevel.value) {\n    filtered = filtered.filter(log => log.level === filterLevel.value)\n  }\n\n  if (filterModule.value) {\n    filtered = filtered.filter(log => log.module === filterModule.value)\n  }\n\n  if (searchKeyword.value) {\n    const keyword = searchKeyword.value.toLowerCase()\n    filtered = filtered.filter(log => \n      log.message.toLowerCase().includes(keyword) ||\n      log.module.toLowerCase().includes(keyword) ||\n      (log.caller && log.caller.toLowerCase().includes(keyword))\n    )\n  }\n\n  return filtered\n})\n\n\n\n// \nconst clearLogs = async () => {\n  try {\n    await ElMessageBox.confirm('', '', {\n      type: 'warning'\n    })\n    clearLogsData()\n    ElMessage.success('')\n  } catch (error) {\n    // \n  }\n}\n\n// \nconst performSearch = async () => {\n  if (!searchKeyword.value.trim()) {\n    return\n  }\n\n  try {\n    const results = await search({\n      keyword: searchKeyword.value,\n      level: filterLevel.value || undefined,\n      modules: filterModule.value ? [filterModule.value] : [],\n      page: 1,\n      pageSize: 100\n    })\n    \n    if (results.success) {\n      ElMessage.success(` ${results.data.total} `)\n    }\n  } catch (error) {\n    ElMessage.error(': ' + error.message)\n  }\n}\n\n// \nconst exportLogs = () => {\n  exportDialogVisible.value = true\n}\n\n// \nconst confirmExport = async () => {\n  exportLoading.value = true\n  \n  try {\n    const result = await exportLogsData({\n      format: exportForm.value.format,\n      level: filterLevel.value || undefined,\n      modules: filterModule.value ? [filterModule.value] : [],\n      keyword: searchKeyword.value || undefined,\n      maxRecords: exportForm.value.maxRecords,\n      includeMetadata: exportForm.value.includeMetadata\n    })\n    \n    if (result.success) {\n      // \n      const blob = new Blob([result.data.data], {\n        type: getContentType(result.data.format)\n      })\n      \n      const url = URL.createObjectURL(blob)\n      const a = document.createElement('a')\n      a.href = url\n      a.download = `logs_${new Date().toISOString().slice(0, 19).replace(/:/g, '-')}.${result.data.format}`\n      a.click()\n      \n      URL.revokeObjectURL(url)\n      ElMessage.success('')\n      exportDialogVisible.value = false\n    }\n  } catch (error) {\n    ElMessage.error(': ' + error.message)\n  } finally {\n    exportLoading.value = false\n  }\n}\n\n// \nconst getContentType = (format) => {\n  const types = {\n    json: 'application/json',\n    csv: 'text/csv',\n    txt: 'text/plain'\n  }\n  return types[format] || 'text/plain'\n}\n\n// \nconst formatTimestamp = (timestamp) => {\n  return new Date(timestamp).toLocaleString('zh-CN', {\n    year: 'numeric',\n    month: '2-digit',\n    day: '2-digit',\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit',\n    fractionalSecondDigits: 3\n  })\n}\n\n// \nconst formatUptime = (uptime) => {\n  if (!uptime) return ''\n  \n  const seconds = Math.floor(uptime / 1000)\n  const minutes = Math.floor(seconds / 60)\n  const hours = Math.floor(minutes / 60)\n  const days = Math.floor(hours / 24)\n  \n  if (days > 0) {\n    return `${days}${hours % 24}`\n  } else if (hours > 0) {\n    return `${hours}${minutes % 60}`\n  } else if (minutes > 0) {\n    return `${minutes}`\n  } else {\n    return `${seconds}`\n  }\n}\n\n// \nconst truncateText = (text, maxLength) => {\n  if (!text) return ''\n  const str = String(text)\n  if (str.length <= maxLength) return str\n  return str.substring(0, maxLength) + '...'\n}\n\n//  JSON \nconst getJsonSummary = (log) => {\n  try {\n    const jsonObj = log.extra?.originalObject\n    if (!jsonObj || typeof jsonObj !== 'object') {\n      return 'JSON: '\n    }\n    \n    const keys = Object.keys(jsonObj)\n    if (keys.length === 0) {\n      return 'JSON: {}'\n    } else if (keys.length === 1) {\n      return `JSON: { ${keys[0]}: ... }`\n    } else {\n      return `JSON: { ${keys[0]}, ${keys[1]}${keys.length > 2 ? `, +${keys.length - 2} more` : ''} }`\n    }\n  } catch (error) {\n    return 'JSON: '\n  }\n}\n\n//  JSON \nconst formatJsonContent = (log) => {\n  try {\n    const jsonObj = log.extra?.originalObject\n    if (!jsonObj) {\n      return ' JSON '\n    }\n    return JSON.stringify(jsonObj, null, 2)\n  } catch (error) {\n    return ''\n  }\n}\n\n//  JSON \nconst openJsonDialog = (log) => {\n  selectedLog.value = log\n  extraObjectKey.value = null //  extra \n  jsonDialogVisible.value = true\n}\n\n// \nconst getDialogTitle = () => {\n  if (extraObjectKey.value) {\n    return `Extra : ${extraObjectKey.value}`\n  }\n  \n  if (selectedLog.value?.extra?.type === 'json') {\n    return 'JSON '\n  }\n  \n  return ''\n}\n\n//  JSON \nconst copyJsonContent = async () => {\n  if (!selectedLog.value) return\n  \n  try {\n    const formattedJson = formatJsonContent(selectedLog.value)\n    await navigator.clipboard.writeText(formattedJson)\n    ElMessage.success('')\n  } catch (error) {\n    ElMessage.error(': ' + error.message)\n  }\n}\n\n//  message \nconst isObjectMessage = (message) => {\n  return typeof message === 'object' && message !== null\n}\n\n// \nconst getObjectSummary = (message) => {\n  try {\n    if (Array.isArray(message)) {\n      return `Array[${message.length}]: ${message.length > 0 ? JSON.stringify(message[0]).substring(0, 30) + '...' : 'empty'}`\n    }\n    \n    const keys = Object.keys(message)\n    if (keys.length === 0) {\n      return 'Object: {}'\n    } else if (keys.length === 1) {\n      return `Object: { ${keys[0]}: ... }`\n    } else {\n      return `Object: { ${keys[0]}, ${keys[1]}${keys.length > 2 ? `, +${keys.length - 2} more` : ''} }`\n    }\n  } catch (error) {\n    return 'Object: '\n  }\n}\n\n// \nconst openObjectDialog = (log) => {\n  //  log  message  originalObject\n  const tempLog = {\n    ...log,\n    extra: {\n      ...log.extra,\n      originalObject: log.message\n    }\n  }\n  selectedLog.value = tempLog\n  extraObjectKey.value = null //  extra \n  jsonDialogVisible.value = true\n}\n\n// \nconst isObjectValue = (value) => {\n  return typeof value === 'object' && value !== null\n}\n\n// \nconst formatTagValue = (value) => {\n  if (!isObjectValue(value)) {\n    return truncateText(String(value), 20)\n  }\n  \n  if (Array.isArray(value)) {\n    return `[${value.length} items]`\n  }\n  \n  const keys = Object.keys(value)\n  if (keys.length === 0) {\n    return '{}'\n  } else if (keys.length === 1) {\n    return `{${keys[0]}}`\n  } else {\n    return `{${keys.length} keys}`\n  }\n}\n\n//  title \nconst getTagTitle = (key, value) => {\n  if (!isObjectValue(value)) {\n    return `${key}: ${value}`\n  }\n  return `${key}: `\n}\n\n//  extra \nconst openExtraObjectDialog = (key, value, log) => {\n  //  log  extra  originalObject\n  const tempLog = {\n    ...log,\n    extra: {\n      ...log.extra,\n      originalObject: value\n    }\n  }\n  selectedLog.value = tempLog\n  \n  // \n  extraObjectKey.value = key\n  jsonDialogVisible.value = true\n}\n\n//  extra \nconst getDisplayExtra = (extra) => {\n  if (!extra) return {}\n  \n  const { type, originalObject, ...displayExtra } = extra\n  return displayExtra\n}\n\n// \nconst scrollToBottom = () => {\n  if (logsContainer.value) {\n    nextTick(() => {\n      logsContainer.value.scrollTop = logsContainer.value.scrollHeight\n    })\n  }\n}\n\n// \nconst handleScroll = () => {\n  if (!logsContainer.value || !autoScroll.value) return\n  \n  const { scrollTop, scrollHeight, clientHeight } = logsContainer.value\n  const isAtBottom = scrollTop + clientHeight >= scrollHeight - 10\n  \n  if (!isAtBottom) {\n    autoScroll.value = false\n  }\n}\n\n// \nwatch(filteredLogs, () => {\n  if (autoScroll.value) {\n    nextTick(() => {\n      scrollToBottom()\n    })\n  }\n}, { deep: true })\n\n// \nwatch(isConnected, (newValue, oldValue) => {\n  console.log('LogsView: ', oldValue, '->', newValue)\n  if (newValue && !oldValue) {\n    console.log('LogsView: ')\n    getStats()\n  }\n}, { immediate: true })\n\n// \nlet statsInterval = null\n\nonMounted(async () => {\n  // store\n  try {\n    await logStore.initialize()\n    console.log('logStore')\n    console.log(':', isConnected.value)\n    console.log(':', logs.value.length)\n    console.log('filteredLogs:', filteredLogs.value.length)\n  } catch (error) {\n    console.error('logStore:', error)\n    ElMessage.error(': ' + error.message)\n  }\n  \n  // 30\n  statsInterval = setInterval(() => {\n    if (isConnected.value) {\n      getStats()\n    }\n  }, 30000)\n  \n  // \n  setTimeout(() => {\n    if (isConnected.value) {\n      console.log('')\n      getStats()\n    } else {\n      console.log('')\n    }\n  }, 1000)\n})\n\nonUnmounted(() => {\n  if (statsInterval) {\n    clearInterval(statsInterval)\n  }\n})\n</script>\n\n<style scoped lang=\"scss\">\n.logs-view {\n  height: calc(100vh - 120px); // \n  display: flex;\n  flex-direction: column;\n  padding: 24px;\n  max-width: 1200px;\n  margin: 0 auto;\n  box-sizing: border-box;\n}\n\n.logs-header {\n  margin-bottom: 24px;\n  \n  h2 {\n    margin: 0 0 8px 0;\n    font-size: 24px;\n    font-weight: 600;\n    color: #303133;\n  }\n  \n  .logs-description {\n    margin: 0;\n    color: #606266;\n    font-size: 14px;\n  }\n}\n\n.connection-card {\n  margin-bottom: 16px;\n  \n  :deep(.el-card__body) {\n    padding: 16px;\n  }\n}\n\n.connection-status {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.status-indicator {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  \n  .status-dot {\n    width: 8px;\n    height: 8px;\n    border-radius: 50%;\n    background-color: #f56c6c;\n  }\n  \n  span {\n    font-weight: 500;\n    color: #f56c6c;\n  }\n  \n  &.connected {\n    .status-dot {\n      background-color: #67c23a;\n    }\n    \n    span {\n      color: #67c23a;\n    }\n  }\n}\n\n.connection-info {\n  font-size: 14px;\n  color: #909399;\n}\n\n.control-panel {\n  margin-bottom: 16px;\n  \n  :deep(.el-card__body) {\n    padding: 16px;\n  }\n}\n\n.control-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 16px;\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n    align-items: stretch;\n    gap: 12px;\n  }\n}\n\n.control-group {\n  display: flex;\n  gap: 12px;\n  \n  @media (max-width: 768px) {\n    justify-content: center;\n  }\n}\n\n.filter-group {\n  display: flex;\n  gap: 12px;\n  align-items: center;\n  \n  @media (max-width: 768px) {\n    flex-wrap: wrap;\n    justify-content: center;\n  }\n}\n\n.logs-container {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-height: 0; //  flex \n  \n  :deep(.el-card__body) {\n    padding: 0;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n}\n\n.logs-header-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px;\n  border-bottom: 1px solid #e4e7ed;\n  background-color: #fafafa;\n}\n\n.logs-count {\n  font-size: 14px;\n  color: #606266;\n  font-weight: 500;\n}\n\n.logs-controls {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.logs-list {\n  flex: 1;\n  overflow-y: auto;\n  background-color: #fff;\n  min-height: 0; //  flex \n}\n\n.log-item {\n  padding: 12px 16px;\n  border-bottom: 1px solid #f0f0f0;\n  transition: background-color 0.2s;\n  \n  &:hover {\n    background-color: #fafafa;\n  }\n  \n  &.highlighted {\n    background-color: #fff7e6;\n    border-left: 3px solid #e6a23c;\n  }\n  \n  &.level-error {\n    border-left: 3px solid #f56c6c;\n  }\n  \n  &.level-warn {\n    border-left: 3px solid #e6a23c;\n  }\n  \n  &.level-info {\n    border-left: 3px solid #409eff;\n  }\n  \n  &.level-debug {\n    border-left: 3px solid #909399;\n  }\n  \n  &.level-mark {\n    border-left: 3px solid #67c23a;\n  }\n}\n\n.log-header {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 4px;\n  font-size: 12px;\n}\n\n.log-timestamp {\n  color: #909399;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n}\n\n.log-level {\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-weight: 500;\n  font-size: 11px;\n  \n  &.level-error {\n    background-color: #fef0f0;\n    color: #f56c6c;\n  }\n  \n  &.level-warn {\n    background-color: #fdf6ec;\n    color: #e6a23c;\n  }\n  \n  &.level-info {\n    background-color: #ecf5ff;\n    color: #409eff;\n  }\n  \n  &.level-debug {\n    background-color: #f4f4f5;\n    color: #909399;\n  }\n  \n  &.level-mark {\n    background-color: #f0f9ff;\n    color: #67c23a;\n  }\n}\n\n.log-module {\n  background-color: #f0f0f0;\n  color: #606266;\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-size: 11px;\n  font-weight: 500;\n}\n\n.log-caller {\n  color: #909399;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n}\n\n.log-message {\n  color: #303133;\n  line-height: 1.5;\n  word-break: break-word;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  font-size: 13px;\n  \n  :deep(mark) {\n    background-color: #fff2cc;\n    color: #e6a23c;\n    padding: 1px 2px;\n    border-radius: 2px;\n  }\n}\n\n.json-message,\n.object-message {\n  cursor: pointer;\n  color: #409eff;\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  padding: 2px 6px;\n  border-radius: 4px;\n  transition: all 0.2s;\n  \n  &:hover {\n    background-color: #ecf5ff;\n    color: #337ecc;\n  }\n}\n\n.object-message {\n  color: #e6a23c; // \n  \n  &:hover {\n    background-color: #fdf6ec;\n    color: #cf9236;\n  }\n}\n\n.json-expand-icon {\n  font-size: 12px;\n  opacity: 0.7;\n}\n\n.log-extra {\n  margin-top: 8px;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 4px;\n  max-width: 100%;\n  overflow: hidden;\n}\n\n.log-extra-tag {\n  max-width: 200px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  flex-shrink: 1;\n  \n  &.clickable {\n    cursor: pointer;\n    transition: all 0.2s;\n    \n    &:hover {\n      transform: translateY(-1px);\n      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n    }\n  }\n  \n  :deep(.el-tag__content) {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    max-width: 100%;\n  }\n}\n\n.empty-logs {\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n// JSON \n.json-dialog {\n  :deep(.el-dialog__body) {\n    padding: 0;\n  }\n}\n\n.json-content {\n  max-height: 600px;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n\n.json-header {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 16px;\n  border-bottom: 1px solid #e4e7ed;\n  background-color: #fafafa;\n  font-size: 12px;\n}\n\n.json-timestamp {\n  color: #909399;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n}\n\n.json-level {\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-weight: 500;\n  font-size: 11px;\n  \n  &.level-error {\n    background-color: #fef0f0;\n    color: #f56c6c;\n  }\n  \n  &.level-warn {\n    background-color: #fdf6ec;\n    color: #e6a23c;\n  }\n  \n  &.level-info {\n    background-color: #ecf5ff;\n    color: #409eff;\n  }\n  \n  &.level-debug {\n    background-color: #f4f4f5;\n    color: #909399;\n  }\n  \n  &.level-mark {\n    background-color: #f0f9ff;\n    color: #67c23a;\n  }\n}\n\n.json-module {\n  background-color: #f0f0f0;\n  color: #606266;\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-size: 11px;\n  font-weight: 500;\n}\n\n.json-body {\n  flex: 1;\n  overflow: auto;\n  padding: 16px;\n}\n\n.json-pre {\n  margin: 0;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  font-size: 13px;\n  line-height: 1.5;\n  color: #303133;\n  background-color: #f8f9fa;\n  padding: 16px;\n  border-radius: 6px;\n  border: 1px solid #e4e7ed;\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n\n// \n@media (max-width: 768px) {\n  .logs-view {\n    padding: 16px;\n  }\n  \n  .logs-header-row {\n    flex-direction: column;\n    align-items: stretch;\n    gap: 12px;\n  }\n  \n  .logs-controls {\n    justify-content: center;\n  }\n  \n  .log-item {\n    padding: 8px 12px;\n  }\n  \n  .log-header {\n    flex-wrap: wrap;\n    gap: 8px;\n  }\n  \n  .log-message {\n    font-size: 12px;\n  }\n  \n  .json-dialog {\n    :deep(.el-dialog) {\n      width: 95% !important;\n      margin: 5vh auto;\n    }\n  }\n  \n  .json-content {\n    max-height: 70vh;\n  }\n  \n  .json-pre {\n    font-size: 12px;\n    padding: 12px;\n  }\n}\n</style>"],"file":"views-_ZJGgods.js"}