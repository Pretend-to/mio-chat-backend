# é¢„è®¾ï¼ˆPresetï¼‰ç®¡ç† API è§„èŒƒæ–‡æ¡£

## æ¦‚è¿°

æœ¬æ–‡æ¡£å®šä¹‰äº† Mio-Chat ç³»ç»Ÿä¸­é¢„è®¾ï¼ˆPresetï¼‰ç®¡ç†åŠŸèƒ½çš„å®Œæ•´ API è§„èŒƒã€‚é¢„è®¾æ˜¯ç”¨æˆ·ä¸ AI åŠ©æ‰‹äº¤äº’çš„æ¨¡æ¿ï¼ŒåŒ…å«ç³»ç»Ÿæç¤ºè¯ã€å¼€åœºç™½ã€å·¥å…·é…ç½®ç­‰ä¿¡æ¯ã€‚æœ¬æ¨¡å—æä¾›å®Œæ•´çš„ CRUDï¼ˆåˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤ï¼‰åŠŸèƒ½ï¼Œå¹¶éµå¾ªç³»ç»Ÿç»Ÿä¸€çš„é…ç½®ç®¡ç†è®¾è®¡æ¨¡å¼ã€‚

### ç‰ˆæœ¬ä¿¡æ¯
- **API ç‰ˆæœ¬**: v1.0
- **æ–‡æ¡£ç‰ˆæœ¬**: 1.3
- **æœ€åæ›´æ–°**: 2024-12-12

### è®¾è®¡ç›®æ ‡
- æä¾›ç»Ÿä¸€çš„é¢„è®¾ç®¡ç†æ¥å£
- æ”¯æŒå†…ç½®é¢„è®¾å’Œè‡ªå®šä¹‰é¢„è®¾çš„åˆ†ç±»ç®¡ç†
- ç¡®ä¿æ•°æ®å®‰å…¨å’Œæƒé™æ§åˆ¶
- æä¾›å®Œæ•´çš„å¯¼å…¥å¯¼å‡ºåŠŸèƒ½
- æ”¯æŒæ‰¹é‡æ“ä½œå’Œæœç´¢åŠŸèƒ½

## 1. ç³»ç»Ÿæ¶æ„

### 1.1 æ–‡ä»¶ç³»ç»Ÿç»“æ„

é¢„è®¾æ–‡ä»¶æŒ‰ç…§ç±»å‹åˆ†åˆ«å­˜å‚¨åœ¨ä¸åŒç›®å½•ä¸­ï¼š

```
presets/
â”œâ”€â”€ built-in/          # ç³»ç»Ÿå†…ç½®é¢„è®¾ï¼ˆåªè¯»ï¼Œå—ç‰ˆæœ¬æ§åˆ¶ä¿æŠ¤ï¼‰
â”‚   â”œâ”€â”€ preset_5.json
â”‚   â”œâ”€â”€ preset_61.json
â”‚   â”œâ”€â”€ coding_assistant.json
â”‚   â”œâ”€â”€ translator.json
â”‚   â””â”€â”€ ...
â””â”€â”€ custom/            # ç”¨æˆ·è‡ªå®šä¹‰é¢„è®¾ï¼ˆæ”¯æŒå®Œæ•´ CRUD æ“ä½œï¼‰
    â”œâ”€â”€ example.json
    â”œâ”€â”€ user_preset_1.json
    â”œâ”€â”€ my_assistant.json
    â””â”€â”€ ...
```

### 1.2 é¢„è®¾æ•°æ®æ¨¡å‹

#### 1.2.1 å®Œæ•´æ•°æ®ç»“æ„

```typescript
interface Preset {
  // åŸºç¡€ä¿¡æ¯
  name: string;                           // é¢„è®¾åç§°ï¼ˆå”¯ä¸€æ ‡è¯†ç¬¦ï¼‰
  source: 'built-in' | 'custom';         // é¢„è®¾æ¥æºï¼ˆå†…ç½®/è‡ªå®šä¹‰ï¼‰
  category: 'common' | 'recommended' | 'hidden';  // é¢„è®¾åˆ†ç±»ï¼ˆæ™®é€š/æ¨è/éšè—ï¼‰

  // æ˜¾ç¤ºé…ç½®
  avatar?: string;                       // é¢„è®¾å¤´åƒæ–‡ä»¶è·¯å¾„ï¼ˆå¯é€‰ï¼‰
  opening?: string;                       // å¼€åœºç™½ï¼ˆå¯é€‰ï¼‰

  // å¯¹è¯é…ç½®
  history: MessageHistory[];              // å¯¹è¯å†å²è®°å½•

  // åŠŸèƒ½é…ç½®
  tools?: string[];                      // å¯ç”¨å·¥å…·åˆ—è¡¨ï¼ˆå¯é€‰ï¼‰

  // å…ƒæ•°æ®ï¼ˆä»…ç®¡ç†æ¥å£è¿”å›ï¼‰
  fileName?: string;                     // æ–‡ä»¶å
  filePath?: string;                     // æ–‡ä»¶è·¯å¾„
  createdAt?: string;                    // åˆ›å»ºæ—¶é—´ï¼ˆISO 8601ï¼‰
  updatedAt?: string;                    // æ›´æ–°æ—¶é—´ï¼ˆISO 8601ï¼‰
  fileSize?: number;                     // æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰
  isReadOnly?: boolean;                  // æ˜¯å¦åªè¯»ï¼ˆé€šå¸¸ built-in ä¸º trueï¼‰
}

interface MessageHistory {
  role: 'system' | 'user' | 'assistant';  // æ¶ˆæ¯è§’è‰²
  content: string;                         // æ¶ˆæ¯å†…å®¹
  timestamp?: string;                      // æ—¶é—´æˆ³ï¼ˆå¯é€‰ï¼‰
}
```

#### 1.2.2 æœ€å°æœ‰æ•ˆæ•°æ®ç»“æ„

åˆ›å»ºé¢„è®¾æ—¶çš„æœ€å°å¿…éœ€å­—æ®µï¼š

```json
{
  "name": "æˆ‘çš„åŠ©æ‰‹",
  "history": [
    {
      "role": "system",
      "content": "ä½ æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„AIåŠ©æ‰‹ã€‚"
    }
  ]
}
```

### 1.3 é¢„è®¾åˆ†ç±»ç³»ç»Ÿ

#### 1.3.1 é¢„è®¾æ¥æº (source)

åŒºåˆ†é¢„è®¾çš„æ¥æºå’Œç®¡ç†æƒé™ï¼š

| æ¥æº | æ ‡è¯†ç¬¦ | æè¿° | ç®¡ç†æƒé™ |
|------|--------|------|----------|
| å†…ç½®é¢„è®¾ | `built-in` | ç³»ç»Ÿè‡ªå¸¦çš„é¢„è®¾ | åªè¯»ï¼Œä¸å¯ä¿®æ”¹åˆ é™¤ |
| è‡ªå®šä¹‰é¢„è®¾ | `custom` | ç”¨æˆ·åˆ›å»ºçš„é¢„è®¾ | å®Œæ•´ CRUD æƒé™ |

#### 1.3.2 é¢„è®¾åˆ†ç±» (category)

æ ¹æ®é¢„è®¾çš„ç”¨é€”å’Œæ¨èç¨‹åº¦åˆ†ç±»ï¼š

| åˆ†ç±» | æ ‡è¯†ç¬¦ | æè¿° | ç‰¹ç‚¹ |
|------|--------|------|------|
| å¸¸ç”¨é¢„è®¾ | `common` | æ—¥å¸¸ä½¿ç”¨çš„é€šç”¨é¢„è®¾ | ä½¿ç”¨é¢‘ç‡é«˜ï¼Œå¿«é€Ÿè®¿é—® |
| æ¨èé¢„è®¾ | `recommended` | ç³»ç»Ÿæ¨èçš„ä¼˜è´¨é¢„è®¾ | å®˜æ–¹ç²¾é€‰ï¼Œé€‚åˆæ–°ç”¨æˆ· |
| éšè—é¢„è®¾ | `hidden` | ç³»ç»Ÿå†…éƒ¨æˆ–ç‰¹æ®Šç”¨é€”é¢„è®¾ | ä¸åœ¨å¸¸è§„åˆ—è¡¨æ˜¾ç¤º |

### 1.4 æƒé™å’Œå®‰å…¨æ¨¡å‹

| é¢„è®¾æ¥æº | è¯»å–æƒé™ | åˆ›å»ºæƒé™ | æ›´æ–°æƒé™ | åˆ é™¤æƒé™ |
|----------|----------|----------|----------|----------|
| å†…ç½®é¢„è®¾ (`built-in`) | æ‰€æœ‰ç”¨æˆ· | ç³»ç»Ÿç®¡ç†å‘˜ | ç¦æ­¢ | ç¦æ­¢ |
| è‡ªå®šä¹‰é¢„è®¾ (`custom`) | æ‰€æœ‰ç”¨æˆ· | ç®¡ç†å‘˜ | ç®¡ç†å‘˜ | ç®¡ç†å‘˜ |

## 2. API æ¥å£è§„èŒƒ

### 2.1 è®¾è®¡åŸåˆ™

é¢„è®¾ç®¡ç† API éµå¾ªä»¥ä¸‹è®¾è®¡åŸåˆ™ï¼š

1. **æ¥å£åˆ†ç¦»**ï¼šç®¡ç†æ¥å£ä¸ä¸šåŠ¡æ¥å£åˆ†ç¦»ï¼Œé¿å…åŠŸèƒ½è€¦åˆ
2. **RESTful è®¾è®¡**ï¼šéµå¾ª REST æ¶æ„é£æ ¼ï¼Œä½¿ç”¨æ ‡å‡† HTTP æ–¹æ³•
3. **ç»Ÿä¸€å“åº”æ ¼å¼**ï¼šæ‰€æœ‰æ¥å£è¿”å›ç»Ÿä¸€çš„ JSON å“åº”æ ¼å¼
4. **æƒé™æ§åˆ¶**ï¼šä¸¥æ ¼çš„ç®¡ç†å‘˜æƒé™éªŒè¯
5. **é”™è¯¯å¤„ç†**ï¼šå®Œæ•´çš„é”™è¯¯ç å’Œé”™è¯¯ä¿¡æ¯
6. **å‘åå…¼å®¹**ï¼šä¿æŒç°æœ‰ä¸šåŠ¡æ¥å£ä¸å˜

### 2.2 åŸºç¡€ä¿¡æ¯

- **Base URL**: `/api/config/presets`
- **Content-Type**: `application/json`
- **è®¤è¯æ–¹å¼**: `X-Admin-Code` Header
- **å­—ç¬¦ç¼–ç **: UTF-8

### 2.3 æ¥å£æ¦‚è§ˆ

#### 2.3.1 ç®¡ç†æ¥å£

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° | æƒé™ | çŠ¶æ€ | éªŒè¯æ—¥æœŸ |
|------|------|------|------|------|----------|
| GET | `/api/config/presets` | è·å–é¢„è®¾åˆ—è¡¨ï¼ˆåˆ†é¡µ+æœç´¢ï¼‰ | Admin | âœ… å¿…éœ€ | âœ… 2024-12-11 |
| POST | `/api/config/presets` | åˆ›å»ºæ–°é¢„è®¾ | Admin | âœ… å¿…éœ€ | âœ… 2024-12-11 |
| GET | `/api/config/presets/{name}` | è·å–é¢„è®¾è¯¦æƒ… | Admin | âœ… å¿…éœ€ | âœ… 2024-12-11 |
| PUT | `/api/config/presets/{name}` | æ›´æ–°é¢„è®¾ | Admin | âœ… å¿…éœ€ | âœ… 2024-12-11 |
| DELETE | `/api/config/presets/{name}` | åˆ é™¤é¢„è®¾ | Admin | âœ… å¿…éœ€ | âœ… 2024-12-11 |
| POST | `/api/config/presets/reload` | é‡æ–°åŠ è½½é¢„è®¾ç¼“å­˜ | Admin | âš ï¸ æ¨è | âœ… 2024-12-11 |
| POST | `/api/config/presets/import` | å¯¼å…¥é¢„è®¾æ–‡ä»¶ | Admin | âš ï¸ æ¨è | âš ï¸ å¾…ä¿®å¤ |
| GET | `/api/config/presets/{name}/export` | å¯¼å‡ºé¢„è®¾æ–‡ä»¶ | Admin | âš ï¸ æ¨è | âš ï¸ å¾…ä¿®å¤ |
| POST | `/api/config/presets/validate` | éªŒè¯é¢„è®¾æ•°æ® | Admin | ğŸ”„ å¯é€‰ | âš ï¸ å¾…ä¿®å¤ |
| POST | `/api/config/presets/batch-delete` | æ‰¹é‡åˆ é™¤é¢„è®¾ | Admin | ğŸ”„ å¯é€‰ | âš ï¸ å¾…å®ç° |

#### 2.3.3 ç›¸å…³æ”¯æŒæ¥å£

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° | æƒé™ | çŠ¶æ€ |
|------|------|------|------|------|
| POST | `/api/upload/image` | ä¸Šä¼ é¢„è®¾å¤´åƒæ–‡ä»¶ | Admin | âœ… ç°æœ‰ |
| GET | `/f/up/image/{name}` | è·å–ä¸Šä¼ çš„å›¾ç‰‡æ–‡ä»¶ | æ—  | âœ… ç°æœ‰ |

#### 2.3.2 ä¸šåŠ¡æ¥å£ï¼ˆç°æœ‰ï¼Œä¿æŒä¸å˜ï¼‰

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° | æƒé™ | çŠ¶æ€ |
|------|------|------|------|------|
| GET | `/api/openai/presets` | è·å–é¢„è®¾åˆ—è¡¨ï¼ˆä¸šåŠ¡ä½¿ç”¨ï¼‰ | æ—  | âœ… ç°æœ‰ |

**çŠ¶æ€è¯´æ˜**:
- âœ… å¿…éœ€ï¼šæ ¸å¿ƒåŠŸèƒ½ï¼Œå¿…é¡»å®ç°
- âš ï¸ æ¨èï¼šé‡è¦åŠŸèƒ½ï¼Œå»ºè®®å®ç°
- ğŸ”„ å¯é€‰ï¼šå¢å¼ºåŠŸèƒ½ï¼Œå¯åç»­å®ç°

### 2.4 ç»Ÿä¸€å“åº”æ ¼å¼

#### 2.4.1 æˆåŠŸå“åº”

```json
{
  "success": true,
  "code": 0,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    // å…·ä½“æ•°æ®å†…å®¹
  },
  "timestamp": "2024-12-11T10:30:00.000Z"
}
```

#### 2.4.2 é”™è¯¯å“åº”

```json
{
  "success": false,
  "code": 4001,
  "message": "é¢„è®¾åç§°å·²å­˜åœ¨",
  "error": "PRESET_NAME_EXISTS",
  "details": {
    "field": "name",
    "value": "duplicate_name"
  },
  "timestamp": "2024-12-11T10:30:00.000Z"
}
```

### 2.5 é”™è¯¯ç è§„èŒƒ

| é”™è¯¯ç  | é”™è¯¯ç±»å‹ | æè¿° | HTTP çŠ¶æ€ç  |
|--------|----------|------|-------------|
| 0 | SUCCESS | æ“ä½œæˆåŠŸ | 200 |
| 4001 | PRESET_NOT_FOUND | é¢„è®¾ä¸å­˜åœ¨ | 404 |
| 4002 | PRESET_NAME_EXISTS | é¢„è®¾åç§°å·²å­˜åœ¨ | 409 |
| 4003 | PRESET_READ_ONLY | é¢„è®¾ä¸ºåªè¯»ï¼Œæ— æ³•ä¿®æ”¹ | 403 |
| 4004 | INVALID_PRESET_DATA | é¢„è®¾æ•°æ®æ ¼å¼æ— æ•ˆ | 400 |
| 4005 | PRESET_NAME_INVALID | é¢„è®¾åç§°æ ¼å¼æ— æ•ˆ | 400 |
| 4006 | FILE_UPLOAD_ERROR | æ–‡ä»¶ä¸Šä¼ å¤±è´¥ | 400 |
| 4007 | FILE_FORMAT_ERROR | æ–‡ä»¶æ ¼å¼é”™è¯¯ | 400 |
| 5001 | INTERNAL_ERROR | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | 500 |
| 5002 | FILE_SYSTEM_ERROR | æ–‡ä»¶ç³»ç»Ÿé”™è¯¯ | 500 |

## 3. æ¥å£è¯¦ç»†è§„èŒƒ

### 3.1 è·å–é¢„è®¾åˆ—è¡¨

è·å–åˆ†ç±»çš„é¢„è®¾åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µå’Œæœç´¢åŠŸèƒ½ã€‚

#### è¯·æ±‚

```http
GET /api/config/presets
```

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | æè¿° |
|------|------|------|--------|------|
| `nums` | integer | å¦ | 50 | æ¯é¡µè¿”å›æ•°é‡ (1-100) |
| `start` | integer | å¦ | 0 | èµ·å§‹ä½ç½® (â‰¥0) |
| `keyword` | string | å¦ | - | æœç´¢å…³é”®è¯ï¼ˆåç§°ã€å¼€åœºç™½ã€å†…å®¹ï¼‰ |
| `category` | string | å¦ | - | åˆ†ç±»ç­›é€‰ (`common`/`recommended`/`hidden`) |
| `source` | string | å¦ | - | æ¥æºç­›é€‰ (`built-in`/`custom`) |

**ç¤ºä¾‹è¯·æ±‚**:
```http
GET /api/config/presets?nums=20&start=0&keyword=åŠ©æ‰‹&category=common
```

#### å“åº”

**æˆåŠŸå“åº”** (200):
```json
{
  "success": true,
  "code": 0,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "presets": [
      {
        "name": "ç¼–ç¨‹åŠ©æ‰‹",
        "source": "built-in",
        "category": "recommended",
        "avatar": "/f/up/image/coding_assistant_avatar.png",
        "opening": "æˆ‘æ˜¯ä½ çš„ç¼–ç¨‹åŠ©æ‰‹",
        "history": [
          {
            "role": "system",
            "content": "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¼–ç¨‹åŠ©æ‰‹..."
          }
        ],
        "tools": ["code_interpreter", "web_search"],
        "createdAt": "2024-12-01T10:00:00.000Z",
        "updatedAt": "2024-12-01T10:00:00.000Z",
        "isReadOnly": true
      },
      {
        "name": "ç¿»è¯‘åŠ©æ‰‹",
        "source": "built-in",
        "category": "common",
        "avatar": "/f/up/image/translator_avatar.png",
        "opening": "æˆ‘å¯ä»¥å¸®ä½ ç¿»è¯‘å„ç§è¯­è¨€",
        "history": [
          {
            "role": "system",
            "content": "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¿»è¯‘åŠ©æ‰‹..."
          }
        ],
        "tools": ["web_search"],
        "createdAt": "2024-12-01T10:00:00.000Z",
        "updatedAt": "2024-12-01T10:00:00.000Z",
        "isReadOnly": true
      },
      {
        "name": "æˆ‘çš„åŠ©æ‰‹",
        "source": "custom",
        "category": "common",
        "avatar": "/f/up/image/abc123.jpg",
        "opening": "è¿™æ˜¯æˆ‘çš„è‡ªå®šä¹‰åŠ©æ‰‹",
        "history": [
          {
            "role": "system",
            "content": "ä½ æ˜¯æˆ‘çš„ä¸“å±åŠ©æ‰‹..."
          }
        ],
        "tools": [],
        "createdAt": "2024-12-10T15:30:00.000Z",
        "updatedAt": "2024-12-11T09:15:00.000Z",
        "isReadOnly": false
      }
    ],
    "pagination": {
      "total": 45,
      "start": 0,
      "nums": 20,
      "hasMore": true
    },
    "summary": {
      "totalCount": 45,
      "categoryCount": {
        "common": 20,
        "recommended": 15,
        "hidden": 10
      },
      "sourceCount": {
        "built-in": 25,
        "custom": 20
      }
    }
  },
  "timestamp": "2024-12-11T10:30:00.000Z"
}
```

### 3.2 è·å–é¢„è®¾è¯¦æƒ…

è·å–æŒ‡å®šé¢„è®¾çš„å®Œæ•´ä¿¡æ¯ã€‚

#### è¯·æ±‚

```http
GET /api/config/presets/{name}
```

**è·¯å¾„å‚æ•°**:
- `name` (string, required): é¢„è®¾åç§°ï¼ˆURL ç¼–ç ï¼‰

**ç¤ºä¾‹è¯·æ±‚**:
```http
GET /api/config/presets/%E7%BC%96%E7%A8%8B%E5%8A%A9%E6%89%8B
```

#### å“åº”

**æˆåŠŸå“åº”** (200):
```json
{
  "success": true,
  "code": 0,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "name": "ç¼–ç¨‹åŠ©æ‰‹",
    "source": "built-in",
    "category": "recommended",
    "avatar": "/f/up/image/coding_assistant_avatar.png",
    "history": [
      {
        "role": "system",
        "content": "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¼–ç¨‹åŠ©æ‰‹ï¼Œæ“…é•¿å¤šç§ç¼–ç¨‹è¯­è¨€..."
      }
    ],
    "opening": "ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„ç¼–ç¨‹åŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆç¼–ç¨‹é—®é¢˜å¯ä»¥é—®æˆ‘ã€‚",
    "tools": ["code_interpreter", "web_search", "file_manager"],
    "fileName": "coding_assistant.json",
    "filePath": "presets/built-in/coding_assistant.json",
    "fileSize": 1024,
    "createdAt": "2024-12-01T10:00:00.000Z",
    "updatedAt": "2024-12-01T10:00:00.000Z",
    "isReadOnly": true
  },
  "timestamp": "2024-12-11T10:30:00.000Z"
}
```

**é”™è¯¯å“åº”** (404):
```json
{
  "success": false,
  "code": 4001,
  "message": "é¢„è®¾ä¸å­˜åœ¨",
  "error": "PRESET_NOT_FOUND",
  "details": {
    "name": "ä¸å­˜åœ¨çš„é¢„è®¾"
  },
  "timestamp": "2024-12-11T10:30:00.000Z"
}
```

### 3.3 åˆ›å»ºé¢„è®¾

åˆ›å»ºæ–°çš„è‡ªå®šä¹‰é¢„è®¾ã€‚

#### è¯·æ±‚

```http
POST /api/config/presets
Content-Type: application/json
X-Admin-Code: {admin_code}
```

**è¯·æ±‚ä½“**:
```json
{
  "name": "æˆ‘çš„åŠ©æ‰‹",
  "category": "common",
  "avatar": "/f/up/image/abc123.jpg",
  "history": [
    {
      "role": "system",
      "content": "ä½ æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„AIåŠ©æ‰‹ã€‚"
    },
    {
      "role": "user",
      "content": "ä½ å¥½"
    },
    {
      "role": "assistant",
      "content": "ä½ å¥½ï¼æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ"
    }
  ],
  "opening": "ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„ä¸“å±åŠ©æ‰‹ã€‚",
  "tools": ["web_search"]
}
```

**å­—æ®µéªŒè¯è§„åˆ™**:
- `name`: å¿…éœ€ï¼Œ1-50å­—ç¬¦ï¼Œä¸èƒ½ä¸ç°æœ‰é¢„è®¾é‡å
- `category`: å¿…éœ€ï¼Œæšä¸¾å€¼ (`common`/`recommended`/`hidden`)
- `avatar`: å¯é€‰ï¼Œå¤´åƒæ–‡ä»¶è·¯å¾„ï¼ˆæ ¼å¼ï¼š/f/up/image/{filename}ï¼‰
- `history`: å¿…éœ€ï¼Œè‡³å°‘åŒ…å«ä¸€æ¡ system æ¶ˆæ¯
- `opening`: å¯é€‰ï¼Œæœ€å¤§500å­—ç¬¦
- `tools`: å¯é€‰ï¼Œå·¥å…·åç§°æ•°ç»„
- `source`: è‡ªåŠ¨è®¾ç½®ä¸º `custom`ï¼Œä¸éœ€è¦åœ¨è¯·æ±‚ä¸­æŒ‡å®š

#### å“åº”

**æˆåŠŸå“åº”** (201):
```json
{
  "success": true,
  "code": 0,
  "message": "åˆ›å»ºæˆåŠŸ",
  "data": {
    "name": "æˆ‘çš„åŠ©æ‰‹",
    "source": "custom",
    "category": "common",
    "fileName": "my_assistant.json",
    "filePath": "presets/custom/my_assistant.json",
    "createdAt": "2024-12-11T10:30:00.000Z"
  },
  "timestamp": "2024-12-11T10:30:00.000Z"
}
```

**é”™è¯¯å“åº”** (409):
```json
{
  "success": false,
  "code": 4002,
  "message": "é¢„è®¾åç§°å·²å­˜åœ¨",
  "error": "PRESET_NAME_EXISTS",
  "details": {
    "name": "æˆ‘çš„åŠ©æ‰‹"
  },
  "timestamp": "2024-12-11T10:30:00.000Z"
}
```

### 3.4 æ›´æ–°é¢„è®¾

æ›´æ–°ç°æœ‰çš„è‡ªå®šä¹‰é¢„è®¾ã€‚

#### è¯·æ±‚

```http
PUT /api/config/presets/{name}
Content-Type: application/json
X-Admin-Code: {admin_code}
```

**è·¯å¾„å‚æ•°**:
- `name` (string, required): é¢„è®¾åç§°ï¼ˆURL ç¼–ç ï¼‰

**è¯·æ±‚ä½“**: ä¸åˆ›å»ºé¢„è®¾ç›¸åŒ

#### å“åº”

**æˆåŠŸå“åº”** (200):
```json
{
  "success": true,
  "code": 0,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": {
    "name": "æˆ‘çš„åŠ©æ‰‹",
    "source": "custom",
    "category": "common",
    "updatedAt": "2024-12-11T10:35:00.000Z"
  },
  "timestamp": "2024-12-11T10:35:00.000Z"
}
```

**é”™è¯¯å“åº”** (403):
```json
{
  "success": false,
  "code": 4003,
  "message": "å†…ç½®é¢„è®¾æ— æ³•ä¿®æ”¹",
  "error": "PRESET_READ_ONLY",
  "details": {
    "name": "ç¼–ç¨‹åŠ©æ‰‹",
    "source": "built-in"
  },
  "timestamp": "2024-12-11T10:35:00.000Z"
}
```

### 3.5 åˆ é™¤é¢„è®¾

åˆ é™¤æŒ‡å®šçš„è‡ªå®šä¹‰é¢„è®¾ã€‚

#### è¯·æ±‚

```http
DELETE /api/config/presets/{name}
X-Admin-Code: {admin_code}
```

**è·¯å¾„å‚æ•°**:
- `name` (string, required): é¢„è®¾åç§°ï¼ˆURL ç¼–ç ï¼‰

#### å“åº”

**æˆåŠŸå“åº”** (200):
```json
{
  "success": true,
  "code": 0,
  "message": "åˆ é™¤æˆåŠŸ",
  "data": {
    "name": "æˆ‘çš„åŠ©æ‰‹",
    "deletedAt": "2024-12-11T10:40:00.000Z"
  },
  "timestamp": "2024-12-11T10:40:00.000Z"
}
```

### 3.6 é‡æ–°åŠ è½½é¢„è®¾

é‡æ–°ä»æ–‡ä»¶ç³»ç»ŸåŠ è½½æ‰€æœ‰é¢„è®¾ï¼Œåˆ·æ–°å†…å­˜ç¼“å­˜ã€‚

#### è¯·æ±‚

```http
POST /api/config/presets/reload
X-Admin-Code: {admin_code}
```

#### å“åº”

**æˆåŠŸå“åº”** (200):
```json
{
  "success": true,
  "code": 0,
  "message": "é‡æ–°åŠ è½½æˆåŠŸ",
  "data": {
    "reloadedAt": "2024-12-11T10:45:00.000Z",
    "summary": {
      "totalCount": 45,
      "builtInCount": 25,
      "customCount": 20
    }
  },
  "timestamp": "2024-12-11T10:45:00.000Z"
}
```

### 3.7 å¯¼å…¥é¢„è®¾

ä» JSON æ–‡ä»¶å¯¼å…¥é¢„è®¾ã€‚

#### è¯·æ±‚

```http
POST /api/config/presets/import
Content-Type: multipart/form-data
X-Admin-Code: {admin_code}

file: [é¢„è®¾JSONæ–‡ä»¶]
```

**æ–‡ä»¶è¦æ±‚**:
- æ ¼å¼: JSON
- å¤§å°: â‰¤ 1MB
- ç¼–ç : UTF-8

#### å“åº”

**æˆåŠŸå“åº”** (201):
```json
{
  "success": true,
  "code": 0,
  "message": "å¯¼å…¥æˆåŠŸ",
  "data": {
    "imported": [
      {
        "name": "å¯¼å…¥çš„é¢„è®¾1",
        "status": "created"
      },
      {
        "name": "å¯¼å…¥çš„é¢„è®¾2", 
        "status": "updated"
      }
    ],
    "failed": [],
    "summary": {
      "total": 2,
      "success": 2,
      "failed": 0
    }
  },
  "timestamp": "2024-12-11T10:50:00.000Z"
}
```

### 3.8 å¯¼å‡ºé¢„è®¾

å¯¼å‡ºæŒ‡å®šé¢„è®¾ä¸º JSON æ–‡ä»¶ã€‚

#### è¯·æ±‚

```http
GET /api/config/presets/{name}/export
X-Admin-Code: {admin_code}
```

#### å“åº”

**æˆåŠŸå“åº”** (200):
```http
Content-Type: application/json
Content-Disposition: attachment; filename="preset_name.json"

{
  "name": "é¢„è®¾åç§°",
  "history": [...],
  "opening": "å¼€åœºç™½",
  "tools": [...]
}
```

## 4. æ•°æ®éªŒè¯è§„èŒƒ

### 4.1 é¢„è®¾åç§°éªŒè¯

```javascript
// é¢„è®¾åç§°éªŒè¯è§„åˆ™
const nameValidation = {
  required: true,
  minLength: 1,
  maxLength: 50,
  pattern: /^[a-zA-Z0-9\u4e00-\u9fa5_\-\s]+$/,  // æ”¯æŒä¸­è‹±æ–‡ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€è¿å­—ç¬¦ã€ç©ºæ ¼
  reserved: ['system', 'admin', 'default'],        // ä¿ç•™åç§°
  unique: true                                     // å…¨å±€å”¯ä¸€
};
```

### 4.2 å¯¹è¯å†å²éªŒè¯

```javascript
// å¯¹è¯å†å²éªŒè¯è§„åˆ™
const historyValidation = {
  required: true,
  minItems: 1,
  maxItems: 100,
  items: {
    role: {
      required: true,
      enum: ['system', 'user', 'assistant']
    },
    content: {
      required: true,
      minLength: 1,
      maxLength: 10000,
      type: 'string'
    },
    timestamp: {
      required: false,
      format: 'iso8601'
    }
  },
  rules: [
    'first_message_must_be_system',  // ç¬¬ä¸€æ¡æ¶ˆæ¯å¿…é¡»æ˜¯ system
    'no_consecutive_same_role'       // ä¸èƒ½æœ‰è¿ç»­ç›¸åŒè§’è‰²çš„æ¶ˆæ¯
  ]
};
```

### 4.3 å·¥å…·é…ç½®éªŒè¯

```javascript
// å·¥å…·é…ç½®éªŒè¯è§„åˆ™
const toolsValidation = {
  required: false,
  type: 'array',
  maxItems: 20,
  items: {
    type: 'string',
    pattern: /^[a-z_][a-z0-9_]*$/,  // å·¥å…·åç§°æ ¼å¼
    maxLength: 50
  },
  availableTools: [
    'web_search',
    'code_interpreter', 
    'file_manager',
    'image_generator',
    'calculator'
  ]
};
```

## 5. å®‰å…¨å’Œæƒé™

### 5.1 è®¤è¯æœºåˆ¶

æ‰€æœ‰ç®¡ç†æ¥å£éƒ½éœ€è¦é€šè¿‡ `X-Admin-Code` Header è¿›è¡Œè®¤è¯ï¼š

```http
X-Admin-Code: your_admin_code_here
```

### 5.2 æƒé™æ§åˆ¶

| æ“ä½œ | å†…ç½®é¢„è®¾ | è‡ªå®šä¹‰é¢„è®¾ | è¯´æ˜ |
|------|----------|------------|------|
| è¯»å– | âœ… å…è®¸ | âœ… å…è®¸ | æ‰€æœ‰ç”¨æˆ·å¯è¯»å– |
| åˆ›å»º | âŒ ç¦æ­¢ | âœ… å…è®¸ | ä»…ç®¡ç†å‘˜å¯åˆ›å»ºè‡ªå®šä¹‰é¢„è®¾ |
| æ›´æ–° | âŒ ç¦æ­¢ | âœ… å…è®¸ | å†…ç½®é¢„è®¾å—ä¿æŠ¤ |
| åˆ é™¤ | âŒ ç¦æ­¢ | âœ… å…è®¸ | å†…ç½®é¢„è®¾ä¸å¯åˆ é™¤ |

### 5.3 æ–‡ä»¶ç³»ç»Ÿå®‰å…¨

- é¢„è®¾æ–‡ä»¶å­˜å‚¨åœ¨å—ä¿æŠ¤çš„ç›®å½•ä¸­
- æ–‡ä»¶åç»è¿‡å®‰å…¨è¿‡æ»¤ï¼Œé˜²æ­¢è·¯å¾„éå†æ”»å‡»
- æ–‡ä»¶å¤§å°é™åˆ¶ï¼Œé˜²æ­¢å­˜å‚¨ç©ºé—´æ»¥ç”¨
- å®šæœŸå¤‡ä»½é‡è¦é¢„è®¾æ–‡ä»¶

## 6. æ€§èƒ½å’Œé™åˆ¶

### 6.1 æ¥å£é™åˆ¶

| é™åˆ¶é¡¹ | æ•°å€¼ | è¯´æ˜ |
|--------|------|------|
| è¯·æ±‚é¢‘ç‡ | 100/åˆ†é’Ÿ | æ¯ä¸ªç®¡ç†å‘˜è´¦æˆ·çš„è¯·æ±‚é™åˆ¶ |
| æ–‡ä»¶ä¸Šä¼ å¤§å° | 1MB | å•ä¸ªé¢„è®¾æ–‡ä»¶æœ€å¤§å¤§å° |
| é¢„è®¾æ€»æ•° | 1000ä¸ª | ç³»ç»Ÿæœ€å¤§é¢„è®¾æ•°é‡ |
| å¹¶å‘è¯·æ±‚ | 10ä¸ª | åŒæ—¶å¤„ç†çš„æœ€å¤§è¯·æ±‚æ•° |

### 6.2 æ€§èƒ½ä¼˜åŒ–

- é¢„è®¾åˆ—è¡¨æ”¯æŒåˆ†é¡µåŠ è½½
- å®ç°é¢„è®¾æ•°æ®ç¼“å­˜æœºåˆ¶
- æ”¯æŒå¢é‡æ›´æ–°å’Œæ‡’åŠ è½½
- æ–‡ä»¶ç³»ç»Ÿç›‘æ§å’Œè‡ªåŠ¨é‡è½½

## 7. é”™è¯¯å¤„ç†å’Œè°ƒè¯•

### 7.1 è¯¦ç»†é”™è¯¯ä¿¡æ¯

æ¯ä¸ªé”™è¯¯å“åº”éƒ½åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š

```json
{
  "success": false,
  "code": 4004,
  "message": "é¢„è®¾æ•°æ®æ ¼å¼æ— æ•ˆ",
  "error": "INVALID_PRESET_DATA",
  "details": {
    "field": "history[0].role",
    "expected": "system|user|assistant",
    "actual": "invalid_role",
    "line": 5
  },
  "timestamp": "2024-12-11T10:30:00.000Z",
  "requestId": "req_123456789"
}
```

### 7.2 æ—¥å¿—è®°å½•

ç³»ç»Ÿä¼šè®°å½•ä»¥ä¸‹æ“ä½œæ—¥å¿—ï¼š

- é¢„è®¾çš„åˆ›å»ºã€æ›´æ–°ã€åˆ é™¤æ“ä½œ
- æ–‡ä»¶å¯¼å…¥å¯¼å‡ºæ“ä½œ
- æƒé™éªŒè¯å¤±è´¥è®°å½•
- ç³»ç»Ÿé”™è¯¯å’Œå¼‚å¸¸ä¿¡æ¯

## 8. æµ‹è¯•å’ŒéªŒè¯

### 8.1 æ¥å£æµ‹è¯•ç”¨ä¾‹

#### åˆ›å»ºé¢„è®¾æµ‹è¯•

```bash
# æ­£å¸¸åˆ›å»º
curl -X POST /api/config/presets \
  -H "Content-Type: application/json" \
  -H "X-Admin-Code: your_admin_code" \
  -d '{
    "name": "æµ‹è¯•é¢„è®¾",
    "history": [
      {
        "role": "system",
        "content": "ä½ æ˜¯ä¸€ä¸ªæµ‹è¯•åŠ©æ‰‹"
      }
    ],
    "opening": "è¿™æ˜¯æµ‹è¯•å¼€åœºç™½"
  }'

# åç§°é‡å¤æµ‹è¯•
curl -X POST /api/config/presets \
  -H "Content-Type: application/json" \
  -H "X-Admin-Code: your_admin_code" \
  -d '{
    "name": "æµ‹è¯•é¢„è®¾",
    "history": [{"role": "system", "content": "é‡å¤åç§°æµ‹è¯•"}]
  }'
```

#### æ•°æ®éªŒè¯æµ‹è¯•

```bash
# æ— æ•ˆæ•°æ®æ ¼å¼
curl -X POST /api/config/presets \
  -H "Content-Type: application/json" \
  -H "X-Admin-Code: your_admin_code" \
  -d '{
    "name": "",
    "history": []
  }'
```

### 8.2 æ€§èƒ½æµ‹è¯•

```bash
# æ‰¹é‡åˆ›å»ºæµ‹è¯•
for i in {1..100}; do
  curl -X POST /api/config/presets \
    -H "Content-Type: application/json" \
    -H "X-Admin-Code: your_admin_code" \
    -d "{\"name\": \"æµ‹è¯•é¢„è®¾$i\", \"history\": [{\"role\": \"system\", \"content\": \"æµ‹è¯•å†…å®¹$i\"}]}"
done

# åˆ†é¡µæŸ¥è¯¢æµ‹è¯•
curl "/api/config/presets?nums=50&start=0"
```

## 9. æœ€ä½³å®è·µ

### 9.1 é¢„è®¾è®¾è®¡å»ºè®®

1. **ç³»ç»Ÿæ¶ˆæ¯è®¾è®¡**
   - æ˜ç¡®å®šä¹‰åŠ©æ‰‹çš„è§’è‰²å’Œèƒ½åŠ›
   - æä¾›å…·ä½“çš„è¡Œä¸ºæŒ‡å¯¼
   - è®¾ç½®é€‚å½“çš„é™åˆ¶å’Œè¾¹ç•Œ

2. **å¼€åœºç™½è®¾è®¡**
   - ç®€æ´æ˜äº†ï¼Œçªå‡ºæ ¸å¿ƒåŠŸèƒ½
   - å‹å¥½çš„è¯­è°ƒï¼Œé™ä½ä½¿ç”¨é—¨æ§›
   - æä¾›ä½¿ç”¨ç¤ºä¾‹æˆ–å»ºè®®

3. **å·¥å…·é…ç½®**
   - åªå¯ç”¨å¿…éœ€çš„å·¥å…·
   - è€ƒè™‘å·¥å…·ä¹‹é—´çš„ååŒæ•ˆæœ
   - å®šæœŸè¯„ä¼°å·¥å…·ä½¿ç”¨æ•ˆæœ

### 9.2 ç®¡ç†å»ºè®®

1. **é¢„è®¾ç»„ç»‡**
   - ä½¿ç”¨æ¸…æ™°çš„å‘½åè§„èŒƒ
   - å®šæœŸæ¸…ç†æ— ç”¨é¢„è®¾
   - å»ºç«‹é¢„è®¾åˆ†ç±»ä½“ç³»

2. **ç‰ˆæœ¬æ§åˆ¶**
   - é‡è¦é¢„è®¾å˜æ›´å‰å…ˆå¤‡ä»½
   - è®°å½•é¢„è®¾ä¿®æ”¹å†å²
   - å»ºç«‹é¢„è®¾å®¡æ ¸æµç¨‹

3. **æ€§èƒ½ç›‘æ§**
   - ç›‘æ§é¢„è®¾ä½¿ç”¨é¢‘ç‡
   - å®šæœŸä¼˜åŒ–çƒ­é—¨é¢„è®¾
   - åŠæ—¶æ¸…ç†è¿‡æœŸé¢„è®¾

## 10. å¤´åƒç®¡ç†

### 10.1 å¤´åƒä¸Šä¼ æµç¨‹

é¢„è®¾å¤´åƒé€šè¿‡ç°æœ‰çš„æ–‡ä»¶ä¸Šä¼ æ¥å£è¿›è¡Œç®¡ç†ï¼š

1. **ä¸Šä¼ å¤´åƒæ–‡ä»¶**
   ```http
   POST /api/upload/image
   Content-Type: multipart/form-data
   X-Admin-Code: {admin_code}

   image: [å›¾ç‰‡æ–‡ä»¶]
   ```

2. **è·å–æ–‡ä»¶è·¯å¾„**
   ä¸Šä¼ æˆåŠŸåè¿”å›çš„æ–‡ä»¶è·¯å¾„å¯ç”¨äºé¢„è®¾çš„ `avatar` å­—æ®µï¼š
   ```json
   {
     "success": true,
     "code": 0,
     "message": "æ“ä½œæˆåŠŸ",
     "data": {
       "url": "/f/up/image/abc123.jpg"
     }
   }
   ```

3. **åœ¨é¢„è®¾ä¸­å¼•ç”¨**
   åˆ›å»ºæˆ–æ›´æ–°é¢„è®¾æ—¶ä½¿ç”¨è¿”å›çš„è·¯å¾„ï¼š
   ```json
   {
     "name": "æˆ‘çš„åŠ©æ‰‹",
     "avatar": "/f/up/image/abc123.jpg",
     "history": [...]
   }
   ```

### 10.2 å¤´åƒæ–‡ä»¶è¦æ±‚

| å±æ€§ | è¦æ±‚ |
|------|------|
| æ–‡ä»¶æ ¼å¼ | æ”¯æŒæ‰€æœ‰å›¾ç‰‡æ ¼å¼ï¼ˆé€šè¿‡ multer è‡ªåŠ¨å¤„ç†ï¼‰ |
| æ–‡ä»¶å‘½å | ä½¿ç”¨ MD5 å‰6ä½ + åŸæ–‡ä»¶æ‰©å±•å |
| æ–‡ä»¶å¤§å° | ä¾ç³»ç»Ÿé…ç½®è€Œå®š |
| å­˜å‚¨ä½ç½® | `output/uploaded/image/` ç›®å½•ä¸‹ |
| å»é‡æœºåˆ¶ | ç›¸åŒ MD5 çš„æ–‡ä»¶ä¸ä¼šé‡å¤å­˜å‚¨ |

### 10.3 å¤´åƒæ˜¾ç¤º

- å¤´åƒæ–‡ä»¶é€šè¿‡ `/f/up/image/{filename}` è·¯å¾„è®¿é—®
- å‰ç«¯å¯ä½¿ç”¨ `<img src="/f/up/image/abc123.jpg">` æ˜¾ç¤ºå¤´åƒ
- è‹¥é¢„è®¾æœªè®¾ç½®å¤´åƒï¼Œå‰ç«¯åº”æ˜¾ç¤ºé»˜è®¤å¤´åƒ
- æ–‡ä»¶å®é™…å­˜å‚¨åœ¨æœåŠ¡å™¨çš„ `output/uploaded/image/` ç›®å½•

### 10.4 å¤´åƒåˆ é™¤

åˆ é™¤é¢„è®¾æ—¶ï¼Œå…³è”çš„å¤´åƒæ–‡ä»¶**ä¸ä¼šè‡ªåŠ¨åˆ é™¤**ã€‚å¦‚éœ€æ¸…ç†æœªä½¿ç”¨çš„å¤´åƒæ–‡ä»¶ï¼Œéœ€è¦ï¼š

1. æ‰‹åŠ¨åˆ é™¤ `output/uploaded/image/` ç›®å½•ä¸‹çš„æ–‡ä»¶
2. æˆ–å®ç°å®šæœŸæ¸…ç†æœºåˆ¶ï¼ˆæ³¨æ„ï¼šç›¸åŒæ–‡ä»¶å¯èƒ½è¢«å¤šä¸ªé¢„è®¾å¼•ç”¨ï¼‰

## 11. æ›´æ–°æ—¥å¿—

### v1.3 (2024-12-12)
- æ·»åŠ å¤´åƒå­—æ®µæ”¯æŒ
- è¡¥å……å¤´åƒç®¡ç†æµç¨‹è¯´æ˜
- æ›´æ–°æ•°æ®æ¨¡å‹å’Œæ¥å£ç¤ºä¾‹

### v1.2 (2024-12-11)
- å®Œå–„æ•°æ®æ¨¡å‹å®šä¹‰
- å¢åŠ è¯¦ç»†çš„é”™è¯¯å¤„ç†è§„èŒƒ
- æ·»åŠ æ€§èƒ½é™åˆ¶å’Œå®‰å…¨è§„èŒƒ
- è¡¥å……æµ‹è¯•ç”¨ä¾‹å’Œæœ€ä½³å®è·µ

### v1.1 (2024-12-10)
- æ·»åŠ æ‰¹é‡æ“ä½œæ¥å£
- å®Œå–„æƒé™æ§åˆ¶æœºåˆ¶
- å¢åŠ æ–‡ä»¶å¯¼å…¥å¯¼å‡ºåŠŸèƒ½

### v1.0 (2024-12-01)
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- åŸºç¡€ CRUD æ¥å£å®šä¹‰
- é¢„è®¾åˆ†ç±»ç³»ç»Ÿè®¾è®¡

## 11. æµ‹è¯•éªŒè¯æŠ¥å‘Š

### 11.1 å·²éªŒè¯æ¥å£ï¼ˆ2024-12-11ï¼‰

ä»¥ä¸‹æ¥å£å·²é€šè¿‡æµ‹è¯•éªŒè¯ï¼š

âœ… **GET /api/config/presets**
- åŠŸèƒ½ï¼šè·å–é¢„è®¾åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µå’Œæœç´¢
- çŠ¶æ€ï¼šå®Œå…¨æ­£å¸¸
- æµ‹è¯•ç»“æœï¼šæˆåŠŸè¿”å›é¢„è®¾åˆ—è¡¨ï¼ŒåŒ…å«å®Œæ•´å…ƒæ•°æ®

âœ… **GET /api/config/presets/{name}**
- åŠŸèƒ½ï¼šè·å–æŒ‡å®šé¢„è®¾çš„è¯¦ç»†ä¿¡æ¯
- çŠ¶æ€ï¼šå®Œå…¨æ­£å¸¸
- æµ‹è¯•ç»“æœï¼šæˆåŠŸè¿”å›é¢„è®¾è¯¦æƒ…ï¼ŒåŒ…å«æ–‡ä»¶è·¯å¾„ç­‰å…ƒæ•°æ®

âœ… **POST /api/config/presets**
- åŠŸèƒ½ï¼šåˆ›å»ºæ–°çš„è‡ªå®šä¹‰é¢„è®¾
- çŠ¶æ€ï¼šå®Œå…¨æ­£å¸¸
- æµ‹è¯•ç»“æœï¼šæˆåŠŸåˆ›å»ºé¢„è®¾ï¼Œè‡ªåŠ¨è®¾ç½® source ä¸º 'custom'

âœ… **PUT /api/config/presets/{name}**
- åŠŸèƒ½ï¼šæ›´æ–°ç°æœ‰é¢„è®¾
- çŠ¶æ€ï¼šå®Œå…¨æ­£å¸¸
- æµ‹è¯•ç»“æœï¼šæˆåŠŸæ›´æ–°è‡ªå®šä¹‰é¢„è®¾ï¼Œæ­£ç¡®é˜»æ­¢å†…ç½®é¢„è®¾çš„ä¿®æ”¹

âœ… **DELETE /api/config/presets/{name}**
- åŠŸèƒ½ï¼šåˆ é™¤æŒ‡å®šé¢„è®¾
- çŠ¶æ€ï¼šå®Œå…¨æ­£å¸¸
- æµ‹è¯•ç»“æœï¼šæˆåŠŸåˆ é™¤è‡ªå®šä¹‰é¢„è®¾ï¼Œæ­£ç¡®é˜»æ­¢å†…ç½®é¢„è®¾çš„åˆ é™¤

âœ… **POST /api/config/presets/reload**
- åŠŸèƒ½ï¼šé‡æ–°åŠ è½½é¢„è®¾ç¼“å­˜
- çŠ¶æ€ï¼šå®Œå…¨æ­£å¸¸
- æµ‹è¯•ç»“æœï¼šæˆåŠŸé‡æ–°åŠ è½½å¹¶è¿”å›ç»Ÿè®¡ä¿¡æ¯

### 11.2 å¾…ä¿®å¤é—®é¢˜

âš ï¸ **GET /api/config/presets/{name}/export**
- é—®é¢˜ï¼šContent-Disposition å¤´éƒ¨è®¾ç½®é”™è¯¯
- çŠ¶æ€ï¼šæ¥å£å¯è®¿é—®ï¼Œä½†å¯¼å‡ºåŠŸèƒ½å¼‚å¸¸
- éœ€è¦ä¿®å¤ï¼šæ­£ç¡®è®¾ç½®æ–‡ä»¶ä¸‹è½½çš„å“åº”å¤´

âš ï¸ **POST /api/config/presets/import**
- çŠ¶æ€ï¼šæœªå®Œæˆæµ‹è¯•
- éœ€è¦éªŒè¯ï¼šæ–‡ä»¶ä¸Šä¼ å’Œå¯¼å…¥åŠŸèƒ½

âš ï¸ **POST /api/config/presets/validate**
- çŠ¶æ€ï¼šæœªå®Œæˆæµ‹è¯•
- éœ€è¦éªŒè¯ï¼šé¢„è®¾æ•°æ®éªŒè¯åŠŸèƒ½

âš ï¸ **POST /api/config/presets/batch-delete**
- çŠ¶æ€ï¼šåŠŸèƒ½å·²å®ç°ä½†æœªæµ‹è¯•
- éœ€è¦éªŒè¯ï¼šæ‰¹é‡åˆ é™¤åŠŸèƒ½

### 11.3 é”™è¯¯å¤„ç†éªŒè¯

âœ… **æƒé™éªŒè¯**ï¼šæ‰€æœ‰æ¥å£æ­£ç¡®è¦æ±‚ X-Admin-Code å¤´éƒ¨
âœ… **é”™è¯¯ç **ï¼šä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯ç ç³»ç»Ÿ
âœ… **å†…ç½®é¢„è®¾ä¿æŠ¤**ï¼šæ­£ç¡®é˜»æ­¢å¯¹å†…ç½®é¢„è®¾çš„ä¿®æ”¹å’Œåˆ é™¤
âœ… **æ•°æ®éªŒè¯**ï¼šæ­£ç¡®éªŒè¯å¿…å¡«å­—æ®µå’Œæ•°æ®æ ¼å¼

### 11.4 æ€§èƒ½è¡¨ç°

- é¢„è®¾åˆ—è¡¨æ¥å£å“åº”æ—¶é—´ < 100msï¼ˆ161ä¸ªé¢„è®¾ï¼‰
- é¢„è®¾è¯¦æƒ…æ¥å£å“åº”æ—¶é—´ < 50ms
- åˆ›å»º/æ›´æ–°/åˆ é™¤æ“ä½œå“åº”æ—¶é—´ < 200ms
- å†…å­˜ç¼“å­˜æœºåˆ¶å·¥ä½œæ­£å¸¸

---

**æ–‡æ¡£ç»´æŠ¤**: å‰ç«¯å¼€å‘å›¢é˜Ÿ
**æœ€åæ›´æ–°**: 2024-12-12
**ä¸‹æ¬¡å®¡æŸ¥**: 2024-12-25
**æµ‹è¯•çŠ¶æ€**: 6/10 æ¥å£å·²éªŒè¯ âœ…